const t=window.dotcmsFields.h;import{a as e}from"./chunk-1d89c98b.js";import{b as a,o as s,c as i,h as l,d as r,e as h}from"./chunk-62cd3eff.js";import{c as n,a as m,b as u}from"./chunk-4205a04e.js";const d="-date",o="-time";class c{constructor(){this.value="",this.name="",this.label="",this.hint="",this.required=!1,this.requiredMessage="This field is required",this.validationMessage="The field doesn't comply with the specified format",this.disabled=!1,this.min="",this.max="",this.step="1,1",this.dateLabel="Date",this.timeLabel="Time",this._step={date:null,time:null},this._status={date:null,time:null}}reset(){this._status.date=null,this._status.time=null,this.el.querySelectorAll("dot-input-calendar").forEach(t=>{t.reset()}),this.valueChange.emit({name:this.name,value:""})}componentWillLoad(){this.validateProps()}valueWatch(){this.value=a(this,"value","dateTime"),this._value=s(this.value)}minWatch(){this.min=a(this,"min","dateTime"),this._minDateTime=s(this.min)}maxWatch(){this.max=a(this,"max","dateTime"),this._maxDateTime=s(this.max)}stepWatch(){this.step=a(this,"step")||"1,1",[this._step.date,this._step.time]=this.step.split(",")}emitValueChange(t){const e=t.detail;t.stopImmediatePropagation(),this.formatValue(e),this.isValueComplete()&&(this.value=this.getValue(),this.valueChange.emit({name:this.name,value:this.value}))}emitStatusChange(t){const e=t.detail;let a;t.stopImmediatePropagation(),this.setStatus(e),this.setErrorMessageElement(e),this.isStatusComplete()&&(a=this.statusHandler(),this.classNames=i(a,a.dotValid,this.required),this.statusChange.emit({name:this.name,status:a}))}hostData(){return{class:this.classNames}}componentDidLoad(){this.setDotAttributes()}render(){return t(e,null,t("dot-label",{label:this.label,required:this.required,name:this.name},t("div",{class:"dot-date-time__body","aria-describedby":l(this.hint),tabIndex:this.hint?0:null},t("label",null,this.dateLabel,t("dot-input-calendar",{disabled:this.disabled,type:"date",name:this.name+d,value:this._value.date,required:this.required,min:this._minDateTime.date,max:this._maxDateTime.date,step:this._step.date})),t("label",null,this.timeLabel,t("dot-input-calendar",{disabled:this.disabled,type:"time",name:this.name+o,value:this._value.time,required:this.required,min:this._minDateTime.time,max:this._maxDateTime.time,step:this._step.time})))),r(this.hint),this.errorMessageElement)}setDotAttributes(){const t=this.el.querySelector('input[type="date"]'),e=this.el.querySelector('input[type="time"]'),a=["dottype","dotstep","dotmin","dotmax","dotvalue"];setTimeout(()=>{let s=Array.from(this.el.attributes);s.forEach(({name:t,value:e})=>{const a=t.replace(n,"");this[a]&&(this[a]=e)}),s=m(Array.from(this.el.attributes),a),u(t,s),u(e,s)},0)}validateProps(){this.minWatch(),this.maxWatch(),this.stepWatch(),this.valueWatch()}statusHandler(){return{dotTouched:this._status.date.dotTouched||this._status.time.dotTouched,dotValid:this._status.date.dotValid&&this._status.time.dotValid,dotPristine:this._status.date.dotPristine&&this._status.time.dotPristine}}formatValue(t){t.name.indexOf(d)>=0?this._value.date=t.value:this._value.time=t.value}getValue(){return this._value.date&&this._value.time?`${this._value.date} ${this._value.time}`:""}setStatus(t){t.name.indexOf(d)>=0?this._status.date=t.status:this._status.time=t.status}isValueComplete(){return!!this._value.time&&!!this._value.date}isStatusComplete(){return this._status.date&&this._status.time}isValid(){return!this.isStatusComplete()||!!this.isStatusInRange()}isStatusInRange(){return this._status.time.isValidRange&&this._status.date.isValidRange}setErrorMessageElement(t){this.errorMessageElement=this.isStatusComplete()?h(!this.statusHandler().dotValid&&!this.statusHandler().dotPristine,this.getErrorMessage()):h(!t.status.dotPristine,this.getErrorMessage())}getErrorMessage(){return this.getValue()?this.isValid()?"":this.validationMessage:this.requiredMessage}static get is(){return"dot-date-time"}static get properties(){return{classNames:{state:!0},dateLabel:{type:String,attr:"date-label",reflectToAttr:!0},disabled:{type:Boolean,attr:"disabled",reflectToAttr:!0},el:{elementRef:!0},errorMessageElement:{state:!0},hint:{type:String,attr:"hint",reflectToAttr:!0},label:{type:String,attr:"label",reflectToAttr:!0},max:{type:String,attr:"max",reflectToAttr:!0,mutable:!0,watchCallbacks:["maxWatch"]},min:{type:String,attr:"min",reflectToAttr:!0,mutable:!0,watchCallbacks:["minWatch"]},name:{type:String,attr:"name",reflectToAttr:!0},required:{type:Boolean,attr:"required",reflectToAttr:!0},requiredMessage:{type:String,attr:"required-message",reflectToAttr:!0},reset:{method:!0},step:{type:String,attr:"step",reflectToAttr:!0,mutable:!0,watchCallbacks:["stepWatch"]},timeLabel:{type:String,attr:"time-label",reflectToAttr:!0},validationMessage:{type:String,attr:"validation-message",reflectToAttr:!0},value:{type:String,attr:"value",reflectToAttr:!0,mutable:!0,watchCallbacks:["valueWatch"]}}}static get events(){return[{name:"valueChange",method:"valueChange",bubbles:!0,cancelable:!0,composed:!0},{name:"statusChange",method:"statusChange",bubbles:!0,cancelable:!0,composed:!0}]}static get listeners(){return[{name:"_valueChange",method:"emitValueChange"},{name:"_statusChange",method:"emitStatusChange"}]}static get style(){return"/**style-placeholder:dot-date-time:**/"}}export{c as DotDateTime};