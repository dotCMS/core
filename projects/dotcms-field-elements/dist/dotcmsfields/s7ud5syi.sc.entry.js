const t=window.dotcmsFields.h;import{a as e}from"./chunk-1d89c98b.js";import{a as s,b as a,c as i,h as r,i as h,k as l,d as u,e as n,f as d}from"./chunk-62cd3eff.js";import{a as o,b as c}from"./chunk-4205a04e.js";class g{constructor(){this.value="",this.name="",this.label="",this.hint="",this.required=!1,this.requiredMessage="This field is required",this.validationMessage="The field doesn't comply with the specified format",this.disabled=!1,this.regexCheck=""}reset(){this.value="",this.status=s(this.isValid()),this.emitStatusChange(),this.emitValueChange()}componentWillLoad(){this.value=this.value||"",this.validateProps(),this.status=s(this.isValid()),this.emitStatusChange()}componentDidLoad(){const t=this.el.querySelector("textarea");setTimeout(()=>{const e=o(Array.from(this.el.attributes),[]);c(t,e)},0)}regexCheckWatch(){this.regexCheck=a(this,"regexCheck")}valueWatch(){this.value=this.value||""}hostData(){return{class:i(this.status,this.isValid(),this.required)}}render(){return t(e,null,t("dot-label",{label:this.label,required:this.required,name:this.name},t("textarea",{"aria-describedby":r(this.hint),class:h(this.status.dotValid),id:l(this.name),name:this.name,value:this.value,required:this.getRequiredAttr(),onInput:t=>this.setValue(t),onBlur:()=>this.blurHandler(),disabled:this.getDisabledAtt()})),u(this.hint),n(this.shouldShowErrorMessage(),this.getErrorMessage()))}validateProps(){this.regexCheckWatch()}getDisabledAtt(){return this.disabled||null}getRequiredAttr(){return!!this.required||null}isValid(){return!this.isValueRequired()&&this.isRegexValid()}isValueRequired(){return this.required&&!this.value.length}isRegexValid(){return!this.regexCheck||!this.value.length||new RegExp(this.regexCheck,"ig").test(this.value)}shouldShowErrorMessage(){return this.getErrorMessage()&&!this.status.dotPristine}getErrorMessage(){return this.isRegexValid()?this.isValid()?"":this.requiredMessage:this.validationMessage}blurHandler(){this.status.dotTouched||(this.status=d(this.status,{dotTouched:!0}),this.emitStatusChange())}setValue(t){this.value=t.target.value.toString(),this.status=d(this.status,{dotTouched:!0,dotPristine:!1,dotValid:this.isValid()}),this.emitValueChange(),this.emitStatusChange()}emitStatusChange(){this.statusChange.emit({name:this.name,status:this.status})}emitValueChange(){this.valueChange.emit({name:this.name,value:this.value})}static get is(){return"dot-textarea"}static get properties(){return{disabled:{type:Boolean,attr:"disabled",reflectToAttr:!0,mutable:!0},el:{elementRef:!0},hint:{type:String,attr:"hint",reflectToAttr:!0},label:{type:String,attr:"label",reflectToAttr:!0},name:{type:String,attr:"name",reflectToAttr:!0},regexCheck:{type:String,attr:"regex-check",reflectToAttr:!0,mutable:!0,watchCallbacks:["regexCheckWatch"]},required:{type:Boolean,attr:"required",reflectToAttr:!0,mutable:!0},requiredMessage:{type:String,attr:"required-message",reflectToAttr:!0},reset:{method:!0},status:{state:!0},validationMessage:{type:String,attr:"validation-message",reflectToAttr:!0},value:{type:String,attr:"value",reflectToAttr:!0,mutable:!0,watchCallbacks:["valueWatch"]}}}static get events(){return[{name:"valueChange",method:"valueChange",bubbles:!0,cancelable:!0,composed:!0},{name:"statusChange",method:"statusChange",bubbles:!0,cancelable:!0,composed:!0}]}static get style(){return"input{outline:none}.dot-field__input--error{border:1px solid red}"}}export{g as DotTextarea};