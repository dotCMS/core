@use "variables" as *;
@use "mixins";
@use "common";
@use "../buttons/common" as common2;
@use "../../../../shared/colors";
@use "../../../../shared/common" as common3;
@use "../../../../shared/fonts";
@use "../../../../shared/shadows";
@use "../../../../shared/spacing";

// Input with Button
.p-calendar.p-calendar-w-btn {
    border-radius: common3.$border-radius-md;
    height: common3.$field-height-md;
    box-sizing: border-box;
    border: common3.$field-border-size solid colors.$color-palette-gray-400;

    input {
        height: auto;
        @include mixins.truncate-text;
    }

    &:focus-within {
        background-color: transparent;
        @include mixins.field-focus;
    }

    &:hover {
        border-color: var(--color-palette-primary-400);
    }

    &.p-calendar-disabled {
        border-color: colors.$color-palette-gray-200;
    }

    input.p-inputtext,
    input.p-inputtext:focus,
    input.p-inputtext:hover,
    .p-button:focus {
        outline: transparent;
        border-right: none;
        border-color: transparent;
    }

    .p-button:disabled.p-datepicker-trigger,
    .p-button:enabled.p-datepicker-trigger {
        height: auto;
        aspect-ratio: 1/1;
        background-color: colors.$color-palette-gray-200;
        color: colors.$color-palette-primary;
        border-radius: 0 common3.$border-radius-sm common3.$border-radius-sm 0;

        .pi {
            width: common3.$icon-lg-box;
            font-size: common3.$icon-lg;
        }

        .p-icon-wrapper {
            color: colors.$color-palette-primary-500;
        }
    }

    .p-button:enabled.p-datepicker-trigger .pi {
        color: colors.$color-palette-primary-500;
    }
}

.p-datepicker {
    padding: spacing.$spacing-3;
    background: colors.$white;
    color: colors.$black;
    border-radius: common3.$border-radius-md;

    &:not(.p-datepicker-inline) {
        margin-top: spacing.$spacing-3;
        box-shadow: shadows.$shadow-l;
        min-width: auto;
        display: flex;
        flex-direction: column;
        gap: spacing.$spacing-3;
    }

    // Days/Month/Year containers
    .p-datepicker-calendar span,
    .p-monthpicker span,
    .p-yearpicker span {
        display: inline-flex;
        justify-content: center;
        align-items: center;

        border-radius: 50%;
        transition: background-color $basic-speed;
        color: colors.$black;

        &:hover {
            cursor: pointer;
            background: colors.$color-palette-primary-op-10;
        }

        &.p-disabled {
            color: colors.$color-palette-gray-500;
        }

        &.p-highlight:not(.p-disabled) {
            // Selected
            background: colors.$color-palette-primary-op-10;
            color: colors.$color-accessible-text-blue;
        }
    }

    // DatePicker
    .p-datepicker-group {
        display: flex;
        flex-direction: column;
        gap: spacing.$spacing-3;

        // Header
        .p-datepicker-header {
            color: colors.$black;
            background: colors.$white;
            margin: 0;
            min-height: 40px;

            .p-datepicker-title {
                line-height: spacing.$spacing-5;
                display: flex;
                gap: spacing.$spacing-1;

                // Header Buttons
                .p-datepicker-year,
                .p-datepicker-month,
                .p-datepicker-decade {
                    font-size: fonts.$font-size-lmd;
                    font-family: fonts.$font-default;
                    font-weight: fonts.$font-weight-regular-bold;
                    color: inherit;

                    &:hover {
                        color: colors.$color-palette-primary-500;
                    }
                }
            }

            .p-datepicker-prev,
            .p-datepicker-next {
                height: common3.$field-height-md;
                width: common3.$field-height-md;
                border-radius: 50%;
                color: colors.$color-palette-primary-500;

                @extend #outlined-primary-severity;
            }
        }

        // Calendar
        table.p-datepicker-calendar {
            tbody {
                gap: spacing.$spacing-1;
                display: flex;
                flex-direction: column;
            }

            tr {
                display: flex;
                gap: spacing.$spacing-1;
            }

            td,
            th {
                border-spacing: 0;
                padding: 0;
                margin: 0;
                color: colors.$black;
            }

            th {
                font-size: fonts.$font-size-md;
                font-weight: fonts.$font-weight-semi-bold;
            }

            span {
                width: spacing.$spacing-6;
                height: spacing.$spacing-6;
            }

            th > span {
                width: spacing.$spacing-6;
                height: 22px;
            }

            td.p-datepicker-today > span:not(.p-highlight) {
                background: colors.$color-palette-gray-300;
                border-color: transparent;
            }
        }
    }

    .p-timepicker {
        gap: spacing.$spacing-0;
        border-top: 1px solid colors.$color-palette-gray-300;
        padding: spacing.$spacing-3;

        button {
            width: common3.$icon-lg-box;
            height: auto;
            aspect-ratio: 1/1;
            font-size: common3.$icon-lg;
            color: colors.$color-palette-primary-500;
        }

        span {
            font-size: fonts.$font-size-md;
            font-weight: fonts.$font-weight-regular-bold;
            width: spacing.$spacing-5;
            height: spacing.$spacing-5;
            display: flex;
            justify-content: center;
            align-content: center;
            flex-wrap: wrap;
        }

        button {
            border-radius: common3.$border-radius-sm;

            @extend #text-primary-severity;
        }
    }

    &.p-datepicker-timeonly .p-timepicker {
        border-top: 0 none;
    }

    // Monthpicker and Yearpicker
    .p-monthpicker,
    .p-yearpicker {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        justify-items: center;
        gap: spacing.$spacing-1;
        width: 328px;

        span {
            width: spacing.$spacing-9;
            height: spacing.$spacing-6;
            border-radius: 100px;
        }
    }
}

p-calendar.p-calendar-clearable {
    .p-inputtext {
        padding-right: spacing.$spacing-6;
    }

    .p-calendar-clear-icon {
        margin-top: -0.438rem;
        color: colors.$color-palette-primary;
        width: common3.$icon-lg-box;
        font-size: common3.$icon-lg;
        right: 44px;

        &:hover {
            color: colors.$color-palette-primary-600;
        }
    }
}
