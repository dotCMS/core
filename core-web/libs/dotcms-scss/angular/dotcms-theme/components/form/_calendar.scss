@use "variables" as *;
@import "mixins";
@import "common";
@import "../buttons/common";

$btn-height: 2.3125rem;
$calendar-th-height: 22px;
$month-year-picker-width: 328px;
$month-year-border-radius: 100px;

// Input with Button
.p-calendar.p-calendar-w-btn {
    border-radius: $border-radius-md;
    height: $field-height-md;
    box-sizing: border-box;
    border: $field-border-size solid $color-palette-gray-400;

    input {
        height: auto;
        @include truncate-text;
    }
    &:focus-within {
        background-color: transparent;
        @include field-focus;
    }

    &:hover {
        border-color: var(--color-palette-primary-400);
    }

    &.p-calendar-disabled {
        border-color: $color-palette-gray-200;
    }

    input.p-inputtext,
    input.p-inputtext:focus,
    input.p-inputtext:hover,
    .p-button:focus {
        outline: transparent;
        border-right: none;
        border-color: transparent;
    }

    .p-button:disabled.p-datepicker-trigger,
    .p-button:enabled.p-datepicker-trigger {
        height: auto;
        aspect-ratio: 1/1;
        background-color: $color-palette-gray-200;
        .pi {
            width: $icon-lg-box;
            font-size: $icon-lg;
        }
    }

    .p-button:enabled.p-datepicker-trigger .pi {
        color: $color-palette-primary-500;
    }
}

.p-calendar .p-datepicker {
    padding: $spacing-3;
    background: $white;
    color: $black;
    border-radius: $border-radius-md;

    &:not(.p-datepicker-inline) {
        margin-top: $spacing-3;
        box-shadow: $md-shadow-6;
        min-width: auto;
        display: flex;
        flex-direction: column;
        gap: $spacing-3;
    }
}
.p-calendar .p-datepicker .p-datepicker-group {
    display: flex;
    flex-direction: column;
    gap: $spacing-3;
}
.p-calendar .p-datepicker .p-datepicker-group .p-datepicker-header {
    color: $black;
    background: $white;
    margin: 0;
    min-height: 40px;
}
.p-calendar .p-datepicker .p-datepicker-group .p-datepicker-header .p-datepicker-title {
    line-height: $spacing-5;
    display: flex;
    gap: $spacing-1;

    .p-datepicker-year,
    .p-datepicker-month,
    .p-datepicker-decade {
        font-size: $font-size-lg;
        font-family: $font-default;
        font-weight: $font-weight-regular-bold;
        color: inherit;

        &:hover {
            color: $color-palette-primary-500;
        }
    }
}
.p-calendar .p-datepicker .p-datepicker-group .p-datepicker-header .p-datepicker-prev,
.p-calendar .p-datepicker .p-datepicker-group .p-datepicker-header .p-datepicker-next {
    height: $field-height-md;
    width: $field-height-md;
    border-radius: 50%;

    @extend #outlined-primary-severity;
}

// Calendar
.p-calendar .p-datepicker .p-datepicker-group table.p-datepicker-calendar {
    tbody {
        gap: $spacing-1;
        display: flex;
        flex-direction: column;
    }

    tr {
        display: flex;
        gap: $spacing-1;
    }
    td,
    th {
        border-spacing: 0;
        padding: 0;
        margin: 0;
        color: $black;
    }

    th {
        font-size: $font-size-md;
        font-weight: $font-weight-semi-bold;
    }

    th > span,
    td > span {
        display: flex;
        justify-content: center;
        align-items: center;
        cursor: pointer;
    }

    th > span {
        width: $spacing-6;
        height: $calendar-th-height;
    }

    td > span {
        border-radius: 50%;
        width: $spacing-6;
        height: $spacing-6;
    }

    td.p-datepicker-today > span:not(.p-highlight) {
        background: $color-palette-gray-300;
        border-color: transparent;
    }
}

// timepicker
.p-calendar .p-datepicker .p-timepicker {
    gap: $spacing-0;
    border-top: 1px solid $color-palette-gray-300;
    padding: $spacing-3;
    span {
        font-size: $font-size-md;
        font-weight: $font-weight-regular-bold;
        width: $spacing-5;
        height: $spacing-5;
        display: flex;
        justify-content: center;
        align-content: center;
        flex-wrap: wrap;

        &.pi {
            width: $icon-lg-box;
            height: auto;
            aspect-ratio: 1/1;
            font-size: $icon-lg;
            color: $color-palette-primary-500;
        }
    }
    button {
        border-radius: $border-radius-sm;

        @extend #text-primary-severity;
    }
}

.p-calendar .p-datepicker.p-datepicker-timeonly .p-timepicker {
    border-top: 0 none;
}

// Monthpicker and Yearpicker
.p-calendar .p-datepicker .p-monthpicker,
.p-calendar .p-datepicker .p-yearpicker {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    justify-items: center;
    gap: $spacing-1;
    width: $month-year-picker-width;
}

.p-datepicker .p-monthpicker .p-monthpicker-month,
.p-datepicker .p-yearpicker .p-yearpicker-year {
    color: $black;
    width: $spacing-9;
    height: $spacing-6;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    transition: background-color $basic-speed;
}

// Days, Months and Years span container
.p-datepicker .p-datepicker-calendar span,
.p-datepicker .p-monthpicker .p-monthpicker-month,
.p-datepicker .p-yearpicker .p-yearpicker-year {
    &.p-disabled {
        color: $color-palette-gray-500;
    }

    &.p-highlight:not(.p-disabled) {
        // Selected
        background: $color-accessible-text-blue-bg;
        color: $color-accessible-text-blue;
    }
}
.p-datepicker .p-monthpicker .p-monthpicker-month,
.p-datepicker .p-yearpicker .p-yearpicker-year {
    border-radius: $month-year-border-radius;
}

// Hover when no disabled
.p-datepicker:not(.p-disabled) {
    table td span:not(.p-highlight):not(.p-disabled) {
        &:hover {
            background: $color-palette-primary-100;
        }
    }

    .p-monthpicker .p-monthpicker-month:not(.p-disabled),
    .p-yearpicker .p-yearpicker-year:not(.p-disabled) {
        &:not(.p-highlight):hover {
            background: $color-palette-primary-100;
        }
    }
}

p-calendar.p-calendar-clearable {
    .p-inputtext {
        padding-right: $spacing-6;
    }

    .p-calendar-clear-icon {
        margin-top: -12px;
        color: $color-palette-gray-500;
        width: $icon-lg-box;
        font-size: $icon-lg;
        right: 44px;
        &:hover {
            color: $color-palette-primary-600;
        }
    }
}
