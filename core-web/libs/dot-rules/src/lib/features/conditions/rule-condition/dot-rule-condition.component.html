@let condition = $condition();

<div class="dot-rules-condition-toggle">
    @if ($index() !== 0) {
        <button
            (click)="toggleOperator()"
            [label]="condition.operator"
            pButton
            severity="secondary"
            size="small"
            ariaLabel="Swap And/Or"></button>
    }
</div>
<p-select
    (onChange)="onTypeChange($event.value)"
    [ngModel]="condition.type?.key"
    [options]="typeDropdownOptions$ | async"
    [style]="{ width: '100%' }"
    [placeholder]="$conditionTypePlaceholder()"
    [filter]="true"
    class="dot-rules-type-dropdown"
    appendTo="body" />
<div class="dot-rules-condition-main">
    @switch (condition.type?.key) {
        @case ('NoSelection') {
            <div class="dot-rules-condition-component"></div>
        }
        @case ('VisitorsGeolocationConditionlet') {
            <dot-visitors-location-container
                (parameterValuesChange)="onParameterValuesChange($event)"
                [componentInstance]="condition" />
        }
        @default {
            <dot-serverside-condition
                (parameterValueChange)="onParameterValueChange($event)"
                [componentInstance]="condition"
                class="dot-rules-condition-component" />
        }
    }
</div>
<div class="dot-rules-delete-btn">
    <button
        (click)="onDeleteConditionClicked()"
        [disabled]="!condition.isPersisted()"
        [rounded]="true"
        [text]="true"
        pButton
        type="button"
        severity="danger"
        icon="pi pi-trash"
        ariaLabel="Delete Condition"></button>
</div>
