@if (shellProperties$ | async; as sp) {
    @if (sp.canRead) {
        <router-outlet (activate)="onActivateRoute($event)"></router-outlet>
        <dot-edit-ema-navigation-bar
            [items]="sp.items"
            data-testId="ema-nav-bar"></dot-edit-ema-navigation-bar>
        <p-toast position="top-center" data-testId="ema-toast"></p-toast>
        <dot-page-tools-seo
            [currentPageUrlParams]="sp.seoProperties"
            #pageTools></dot-page-tools-seo>
    } @else {
        @switch (sp.error) {
            @case (403) {
                <dot-info-page [info]="EMA_INFO_PAGES.ACCESS_DENIED" />
            }
            @case (404) {
                <dot-info-page [info]="EMA_INFO_PAGES.NOT_FOUND" />
            }
            @case (401) {
                <dot-not-license />
            }
        }
    }
    <ng-template #error>
        @switch (sp.error) {
            @case (403) {
                <dot-info-page [info]="EMA_INFO_PAGES.ACCESS_DENIED" />
            }
            @case (404) {
                <dot-info-page [info]="EMA_INFO_PAGES.NOT_FOUND" />
            }
            @case (401) {
                <dot-not-license />
            }
        }
    </ng-template>
}

<dot-edit-ema-dialog
    (action)="handleNgEvent($event)"
    (reloadFromDialog)="reloadFromDialog()"
    #dialog
    data-testId="ema-dialog"></dot-edit-ema-dialog>
