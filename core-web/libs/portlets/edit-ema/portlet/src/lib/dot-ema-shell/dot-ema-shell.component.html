@if ($shellProps()?.canRead) {
    @if ($toggleLockOptions()?.showBanner && $showBanner()) {
        <p-messages severity="warning" data-testid="message">
            <ng-template pTemplate="content">
                <div class="flex align-items-center justify-content-between gap-2 w-full">
                    <div class="flex align-items-center gap-2">
                        <i class="pi pi-info-circle"></i>
                        <span class="lock-message" data-testid="message-content">
                            {{
                                'uve.shell.page.locked.locked.by'
                                    | dm: [$toggleLockOptions().lockedBy]
                            }}
                            @if ($toggleLockOptions().canLock) {
                                <button class="unlock-link" type="button" (click)="toggleLock()">
                                    {{ 'uve.shell.page.locked.unlock.to.start.editing' | dm }}
                                </button>
                                {{
                                    'uve.shell.page.locked.unlock.to.start.editing.description' | dm
                                }}
                            } @else {
                                {{
                                    'uve.shell.page.locked.you.dont.have.permissions.to.unlock.this.content'
                                        | dm
                                }}
                            }
                        </span>
                    </div>
                    <p-button
                        styleClass="p-button-text p-button-sm p-button-icon-only clear-button"
                        type="button"
                        icon="pi pi-times"
                        data-testid="close-message"
                        (click)="onCloseMessage()" />
                </div>
            </ng-template>
        </p-messages>
    }

    <router-outlet></router-outlet>
    <dot-edit-ema-navigation-bar
        [items]="$shellProps().items"
        (action)="handleItemAction($event)"
        data-testId="ema-nav-bar"></dot-edit-ema-navigation-bar>
    <p-toast position="top-center" data-testId="ema-toast"></p-toast>
    <dot-page-tools-seo
        [currentPageUrlParams]="$shellProps().seoParams"
        #pageTools></dot-page-tools-seo>
} @else {
    @if ($shellProps().error?.code === 401) {
        <dot-not-license />
    } @else if ($shellProps()?.error?.pageInfo) {
        <dot-info-page [info]="$shellProps().error.pageInfo" />
    }
}

<dot-edit-ema-dialog
    (action)="handleNgEvent($event)"
    (reloadFromDialog)="reloadFromDialog()"
    #dialog
    data-testId="ema-dialog"></dot-edit-ema-dialog>
<p-confirmDialog
    [style]="{
        width: '400px'
    }"
    key="shell-confirm-dialog"
    rejectIcon="hidden"
    acceptIcon="hidden"
    rejectButtonStyleClass="p-button-outlined"
    data-testId="confirm-dialog"></p-confirmDialog>
