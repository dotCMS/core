<p-tabs [value]="$activeTab()" (valueChange)="handleTabChange($event)">
    <p-tablist>
        <p-tab [value]="TABS_MAP.CONTENT_TYPES">
            <div class="tab-header" pTooltip="Content types" tooltipPosition="bottom">
                <i class="pi pi-stop"></i>
            </div>
        </p-tab>
        <p-tab [value]="TABS_MAP.WIDGETS">
            <div class="tab-header" pTooltip="Widgets" tooltipPosition="bottom">
                <i class="pi pi-th-large"></i>
            </div>
        </p-tab>
        <p-tab [value]="TABS_MAP.FAVORITES">
            <div class="tab-header" pTooltip="Favorites" tooltipPosition="bottom">
                <i class="pi pi-star"></i>
            </div>
        </p-tab>
        @if ($showStyleEditorTab()) {
            <p-tab [value]="TABS_MAP.STYLE_EDITOR">
                <div class="tab-header" pTooltip="Style Editor" tooltipPosition="bottom">
                    <i class="pi pi-palette"></i>
                </div>
            </p-tab>
        }
    </p-tablist>
    <p-tabpanels>
        <p-tabpanel [value]="TABS_MAP.CONTENT_TYPES">
            <!-- Without this constrain, primeng is instanciating the component even if the tab is not active.
            creating triple renders and triple requests to the server. -->
            @if ($activeTab() === TABS_MAP.CONTENT_TYPES) {
                <dot-uve-palette-list
                    [listType]="DotUVEPaletteListTypes.CONTENT"
                    [languageId]="$languageId()"
                    [pagePath]="$pagePath()" />
            }
        </p-tabpanel>
        <p-tabpanel [value]="TABS_MAP.WIDGETS">
            @if ($activeTab() === TABS_MAP.WIDGETS) {
                <dot-uve-palette-list
                    [listType]="DotUVEPaletteListTypes.WIDGET"
                    [languageId]="$languageId()"
                    [pagePath]="$pagePath()" />
            }
        </p-tabpanel>
        <p-tabpanel [value]="TABS_MAP.FAVORITES">
            @if ($activeTab() === TABS_MAP.FAVORITES) {
                <dot-uve-palette-list
                    [listType]="DotUVEPaletteListTypes.FAVORITES"
                    [languageId]="$languageId()"
                    [pagePath]="$pagePath()" />
            }
        </p-tabpanel>
        @if ($showStyleEditorTab()) {
            <p-tabpanel [value]="TABS_MAP.STYLE_EDITOR">
                @if ($activeTab() === TABS_MAP.STYLE_EDITOR) {
                    <div
                        class="w-full h-full flex flex-column justify-content-center align-items-center gap-2">
                        @if ($styleSchema()) {
                            <dot-uve-style-editor-form [schema]="$styleSchema()" />
                        } @else {
                            <span>No styles to show yet.</span>
                            <span>
                                <strong>Select a contentlet</strong>
                                to begin styling.
                                <a
                                    href="https://dev.dotcms.com/docs/style-editor"
                                    target="_blank"
                                    rel="noopener">
                                    Learn more
                                </a>
                            </span>
                        }
                    </div>
                }
            </p-tabpanel>
        }
    </p-tabpanels>
</p-tabs>
