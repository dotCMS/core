<div class="dot-uve-palette-list__controls">
    @if ($currentView() === DotUVEPaletteListView.CONTENTLETS) {
        <p-button
            icon="pi pi-chevron-left"
            [text]="true"
            [rounded]="true"
            styleClass="options-menu-button"
            (onClick)="onBackToContentTypes()"></p-button>
    }

    <p-iconField iconPosition="left" [style]="{ width: '100%' }">
        <p-inputIcon styleClass="pi pi-search" />
        <input
            type="text"
            placeholder="Search"
            pInputText
            [style]="{ width: '100%' }"
            styleClass="input-text-sm"
            (input)="onSearch($event)"
            [value]="" />
    </p-iconField>

    @if ($currentView() === DotUVEPaletteListView.CONTENT_TYPES && $type() !== 'FAVORITES') {
        <p-button
            icon="pi pi-arrow-right-arrow-left"
            [text]="true"
            [rounded]="true"
            styleClass="options-menu-button"
            (onClick)="menu.toggle($event)"></p-button>
        <p-menu
            #menu
            [model]="$menuItems()"
            [popup]="true"
            appendTo="body"
            styleClass="options-menu-popup"
            showTransitionOptions="0ms" />
    } @else if ($type() === 'FAVORITES') {
        <p-button
            icon="pi pi-plus"
            [text]="true"
            [rounded]="true"
            styleClass="options-menu-button"
            (onClick)="onAddFavoriteContentType()"></p-button>
    }
</div>

<div class="dot-uve-palette-list__grid" [class.dot-uve-palette-list__grid--list]="$showViewList()">
    @switch ($currentView()) {
        @case (DotUVEPaletteListView.LOADING) {
            @for (i of LOADING_ROWS_MOCK; track i) {
                <p-skeleton width="100%" [height]="$skeletonHeight()"></p-skeleton>
            }
        }
        @case (DotUVEPaletteListView.CONTENTLETS) {
            @for (contentlet of $contentlets(); track contentlet.identifier) {
                <dot-uve-palette-contentlet [contentlet]="contentlet" />
            }
        }
        @case (DotUVEPaletteListView.CONTENT_TYPES) {
            @for (contentType of $contenttypes(); track contentType.id) {
                <dot-uve-palette-item
                    [contentType]="contentType"
                    [view]="$view()"
                    (selectContentType)="onSelectContentType($event)"
                    (rightClick)="onRightClick(contentType); cm.show($event)" />
            }
        }
    }
</div>

@if ($pagination()) {
    <p-paginator
        (onPageChange)="onPageChange($event)"
        [first]="$start()"
        [rows]="$rowsPerPage()"
        [totalRecords]="$pagination.totalEntries()"
        [showPageLinks]="false"
        [showJumpToPageDropdown]="false"
        [showCurrentPageReport]="true"
        [showFirstLastIcon]="false"
        [currentPageReportTemplate]="
            '{first} - {last} ' + ('uve.palette.pagination.of' | dm) + ' {totalRecords}'
        " />
}

<p-menu
    #cm
    [model]="$favoriteMenuItems()"
    [popup]="true"
    appendTo="body"
    styleClass="options-menu-popup"
    showTransitionOptions="0ms" />
