<p-button
    [ngStyle]="getTopButtonPosition()"
    (click)="setPositionFlag('before'); menu.toggle($event)"
    data-testId="add-top-button"
    icon="pi pi-plus"></p-button>
<p-button
    *ngIf="!isContainerEmpty"
    [ngStyle]="getBottomButtonPosition()"
    (click)="setPositionFlag('after'); menu.toggle($event)"
    data-testId="add-bottom-button"
    icon="pi pi-plus"></p-button>
<p-menu #menu [model]="items" [popup]="true" appendTo="body" data-testId="menu-add"></p-menu>

<div
    class="actions"
    *ngIf="!isContainerEmpty"
    [ngStyle]="getActionPosition()"
    data-testId="actions">
    @if (contentlet.payload.vtlFiles?.length) {
    <p-menu #menuVTL [model]="vtlFiles" [popup]="true" appendTo="body" />
    <p-button
        (click)="menuVTL.toggle($event)"
        data-testId="edit-vtl-button"
        styleClass="p-button-rounded p-button-raised"
        icon="pi pi-code" />
    }

    <p-button
        (dragstart)="dragStart($event, contentlet.payload)"
        (dragend)="dragEnd($event)"
        draggable="true"
        data-testId="drag-button"
        styleClass="p-button-rounded p-button-raised"
        icon="pi pi-arrows-alt" />
    <p-button
        (click)="delete.emit(contentlet.payload)"
        data-testId="delete-button"
        styleClass="p-button-rounded p-button-raised delete"
        icon="pi pi-times" />
    <p-button
        (click)="edit.emit(contentlet.payload)"
        data-testId="edit-button"
        styleClass="p-button-rounded p-button-raised"
        icon="pi pi-pencil" />
</div>

<div class="bounds" [ngStyle]="getPosition()" data-testId="bounds"></div>
<div class="drag-image" #dragImage *ngIf="contentlet" data-testId="drag-image">
    {{ contentlet.payload.contentlet.contentType }}
</div>
