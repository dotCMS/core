@for (device of defaultDevices; track $index) {
    <p-button
        [icon]="device.icon"
        [pTooltip]="device.name | dm"
        tooltipPosition="bottom"
        [text]="true"
        [rounded]="true"
        [ngClass]="{ active: device.inode === $currentDevice()?.inode }"
        (click)="onDeviceSelect(device)"
        [attr.data-testId]="device.inode" />
}

<p-button
    [text]="true"
    [rounded]="true"
    styleClass="orientation"
    [disabled]="$disableOrientation()"
    (click)="onOrientationChange()"
    data-testId="orientation">
    <!-- ROTATE THE ICON WHEN THE ORIENTATION IS LANDSCAPE -->
    <ng-template pTemplate="content">
        <svg
            [ngClass]="$currentOrientation()"
            fill="currentColor"
            viewBox="0 0 24 24"
            width="24px"
            height="24px">
            <use
                data-testId="orientation"
                href="./assets/edit-ema/orientation.svg#orientation"
                width="24px"
                height="24px"></use>
        </svg>
    </ng-template>
</p-button>

@if ($menuItems().length) {
    <p-button
        icon="pi pi-angle-down"
        iconPos="right"
        [label]="$moreButtonLabel() | dm"
        [class.active]="$isMoreButtonActive()"
        [text]="true"
        (click)="menu.toggle($event)"
        data-testId="more-button" />

    <p-menu #menu [popup]="true" [model]="$menuItems()" data-testId="more-menu">
        <ng-template pTemplate="submenuheader" let-item>
            <div class="text-sm font-semibold text-gray-900">{{ item.label }}</div>
            <div class="mt-2 border-t border-gray-200"></div>
        </ng-template>
        <ng-template pTemplate="item" let-item>
            <button
                type="button"
                pRipple
                class="flex w-full items-center text-left px-4 py-3 text-sm text-gray-900 hover:bg-gray-50 focus:bg-gray-50 focus:outline-none"
                [ngClass]="{
                    'bg-gray-100 font-semibold': item.id === activeMenuItemId()
                }"
                (click)="onMoreMenuItemClick($event, item, menu)">
                <span class="truncate">{{ item.label }}</span>
            </button>
        </ng-template>
    </p-menu>
}
