<dot-select-seo-tool [socialMedia]="seoMedia"></dot-select-seo-tool>
<div class="results-seo-tool__main-card">
    <p-card>
        <div class="results-seo-tool__main-card-content">
            <div>
                @switch (seoMedia) {
                    @case (seoMediaTypes.GOOGLE) {
                        <div>
                            @for (preview of allPreview; track preview) {
                                <div>
                                    <span class="results-seo-tool__main-card-title">
                                        {{ preview.type }} Version
                                    </span>
                                    <div
                                        [class.results-seo-tool__version--small]="preview.isMobile"
                                        class="results-seo-tool__card"
                                        data-testId="seo-preview-mobile">
                                        <div class="results-seo-tool__card-title">
                                            @if (noFavicon) {
                                                <div
                                                    class="results-seo-tool__card-favicon"
                                                    data-testId="favicon-default">
                                                    <i class="pi pi-globe"></i>
                                                </div>
                                            } @else {
                                                <img
                                                    (error)="onFaviconError()"
                                                    [src]="seoOGTags.favicon"
                                                    class="results-seo-tool__card-favicon"
                                                    data-testId="favicon-image"
                                                    alt="favicon" />
                                            }
                                            <span data-testId="page-hostName">
                                                {{ preview.hostName }}
                                            </span>
                                        </div>
                                        <a
                                            class="results-seo-tool__search-title"
                                            data-testId="results-seo-tool-search-title">
                                            {{ preview.title }}
                                        </a>
                                        <p
                                            class="results-seo-tool__search-description"
                                            data-testId="results-seo-tool-search-description">
                                            {{ preview.description }}
                                        </p>
                                    </div>
                                </div>
                            }
                        </div>
                    }
                    @case (seoMediaTypes.TWITTER) {
                        <div>
                            <dot-seo-image-preview
                                [image]="mainPreview.image"></dot-seo-image-preview>
                            <div class="results-seo-tool__preview">
                                <span data-testId="page-hostName">{{ mainPreview.hostName }}</span>
                                <h5>{{ mainPreview.twitterTitle }}</h5>
                                <p>{{ mainPreview.twitterDescription }}</p>
                            </div>
                        </div>
                    }
                    @default {
                        <div>
                            <dot-seo-image-preview
                                [image]="mainPreview.image"></dot-seo-image-preview>
                            <div class="results-seo-tool__preview">
                                <span data-testId="page-hostName">{{ mainPreview.hostName }}</span>
                                <h5>{{ mainPreview.title }}</h5>
                                <p>{{ mainPreview.description }}</p>
                            </div>
                        </div>
                    }
                }
            </div>
        </div>
    </p-card>
</div>

@for (result of currentResults$ | async; track result) {
    <p-card class="results-seo-tool__result-card">
        <ng-template pTemplate="header">
            <div class="results-seo-tool__result-card-title">
                <span data-testId="result-key">{{ result.title | titlecase }}</span>
            </div>
        </ng-template>
        <ul class="results-seo-tool__result-card-list">
            @for (item of result.items; track item) {
                <li data-testId="seo-tag">
                    <i [ngClass]="[item.color, item.itemIcon]" class="pi"></i>
                    <span [innerHTML]="item.message | safeHtml"></span>
                </li>
            }
        </ul>
    </p-card>
}

<p-card class="results-seo-tool__result-card results-seo-tool__result-card--read-more">
    <ng-template pTemplate="header">
        <div class="results-seo-tool__result-card-title">
            <span>{{ 'seo.rules.read-more.title' | dm }}</span>
        </div>
    </ng-template>
    <ul class="results-seo-tool__result-card-list">
        @for (item of readMoreValues[seoMedia]; track item) {
            <li>
                <i class="results-seo-tool__result-icon pi pi-info-circle"></i>
                <span
                    [innerHTML]="item | safeHtml"
                    class="results-seo-tool__read-more-label"
                    data-testId="readmore"></span>
            </li>
        }
    </ul>
</p-card>
