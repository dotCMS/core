<!-- Instructions -->
<div class="mb-4">
    <p class="mb-2">{{ 'tags.import.instructions' | dm }}</p>
    <ul class="list-disc pl-5 mb-2 text-sm text-color-secondary">
        <li>
            <strong>{{ 'tags.import.column.tag-name' | dm }}</strong>
            — {{ 'tags.import.column.tag-name.description' | dm }}
        </li>
        <li>
            <strong>{{ 'tags.import.column.host-id' | dm }}</strong>
            — {{ 'tags.import.column.host-id.description' | dm }}
            <code>SYSTEM_HOST</code>
            {{ 'tags.import.column.host-id.global' | dm }}
        </li>
    </ul>
    <p class="text-sm text-color-secondary">{{ 'tags.import.example' | dm }}</p>
    <pre class="bg-surface-100 p-2 rounded text-sm mt-1">
"Tag Name","Host ID"
"Marketing","SYSTEM_HOST"
"News","48190c8c-42c4-..."</pre
    >
</div>

<!-- File Upload -->
<p-fileupload
    mode="basic"
    [chooseLabel]="'tags.import.choose-file' | dm"
    chooseIcon="pi pi-upload"
    accept=".csv"
    (onSelect)="onFileSelect($event)"
    (onClear)="onFileClear()"
    data-testid="tag-import-file" />

<!-- Import Result -->
@if (result(); as res) {
    <div class="mt-4">
        <p-message [severity]="res.failureCount === 0 ? 'success' : 'warn'">
            {{ resultMessage() }}
        </p-message>
    </div>
}

<!-- Actions -->
<div class="flex justify-end gap-2 mt-4">
    @if (result()) {
        <p-button
            [label]="'tags.done' | dm"
            (onClick)="close(true)"
            data-testid="tag-import-done-btn" />
    } @else {
        <p-button
            [label]="'tags.cancel' | dm"
            severity="secondary"
            [outlined]="true"
            (onClick)="close(false)" />
        <p-button
            [label]="'tags.import' | dm"
            icon="pi pi-upload"
            [disabled]="!selectedFile()"
            [loading]="importing()"
            (onClick)="importFile()"
            data-testid="tag-import-submit-btn" />
    }
</div>
