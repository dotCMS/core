<!-- Metrics Section -->
<div class="flex gap-3 flex-wrap max-lg:flex-col">
    @for (metric of $metricsData(); track metric.name) {
        <dot-analytics-dashboard-metrics
            class="flex-1 min-w-[280px] max-lg:min-w-0 max-lg:w-full "
            [name]="metric.name"
            [value]="metric.value || 0"
            [subtitle]="metric.subtitle || ''"
            [icon]="metric.icon || ''"
            [status]="metric.status"
            data-testid="analytics-metric-card" />
    }
</div>

<!-- Charts Section -->
<div class="flex gap-3">
    <!-- Line Chart -->
    <div
        class="flex-1 min-w-0 ">
        <dot-analytics-dashboard-chart
            [title]="'analytics.charts.pageviews-timeline.title' | dm"
            type="line"
            [data]="$pageViewTimeLineData()"
            [status]="$pageViewTimeLineStatus()"
            data-testid="analytics-timeline-chart" />
    </div>
</div>

<!-- Table and Pie Chart Section -->
<div class="flex gap-3 items-stretch max-lg:flex-col">
    <!-- Pie Chart -->
    <div
        class="w-[450px] shrink-0 max-lg:w-full max-lg:shrink ">
        <dot-analytics-dashboard-chart
            [title]="'analytics.charts.device-breakdown.title' | dm"
            type="pie"
            [data]="$pageViewDeviceBrowsersData()"
            [status]="$pageViewDeviceBrowsersStatus()"
            data-testid="analytics-device-chart" />
    </div>

    <!-- Table -->
    <div
        class="flex-1 min-w-0 max-lg:w-full max-lg:min-w-0 ">
        <dot-analytics-dashboard-table
            [tableState]="$topPagesTable()"
            data-testid="analytics-table" />
    </div>
</div>
