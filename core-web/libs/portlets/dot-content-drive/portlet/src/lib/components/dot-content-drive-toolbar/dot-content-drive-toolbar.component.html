<p-toolbar class="gap-1 h-full px-3  justify-start border-none! ">
    <div
        class="grid w-full items-center transition-all duration-300 ease-in-out gap-y-1 py-3"
        [class.gap-x-1]="!$treeExpanded()"
        [class.gap-x-0]="$treeExpanded()"
        [class]="'grid-cols-[min-content_1fr] grid-rows-2'">
        @if (!$treeExpanded()) {
            <dot-content-drive-tree-toggler
                data-testid="tree-toggler"
              />
        }

        <div
            class="grid items-center w-full gap-1 row-start-1 col-start-2"
            [class]="'grid-cols-[repeat(2,minmax(4.5rem,14rem))_1fr]'">
            <dot-content-drive-search-input data-testid="search-input" class="col-span-2" />

            @if ($displayButton()) {
                <p-button
                    [@slideAnimation]
                    [label]="'content-drive.add-new' | dm"
                    icon="pi pi-chevron-down"
                    iconPos="right"
                    class="justify-self-end"
                    data-testid="add-new-button"
                    (click)="menu.toggle($event)"
                    #button />
            }

            @if ($displayActions()) {
                <dot-content-drive-workflow-actions
                    [@slideAnimation]
                    class="justify-self-end"
                    data-testid="workflow-actions" />
            }
        </div>

        <div
            class="grid w-full gap-1 row-start-2 col-start-2"
            [class]="'grid-cols-[repeat(3,minmax(4.5rem,14rem))_1fr]'">
            <dot-content-drive-base-type-selector data-testid="base-type-selector" />
            <dot-content-drive-content-type-field data-testid="content-type-field" />
            <dot-content-drive-language-field data-testid="language-field" />
        </div>
    </div>
</p-toolbar>

<p-menu [model]="$items()" #menu data-testId="actionsMenu" [popup]="true" appendTo="body" />
