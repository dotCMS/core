<div [formGroup]="folderForm">
    <p-tabs [value]="0">
        <p-tablist class="w-full">
            <p-tab [value]="0" class="flex-1 justify-center text-center">
                {{ 'content-drive.dialog.folder.general.header' | dm }}
            </p-tab>
            <p-tab [value]="1" class="flex-1 justify-center text-center">
                {{ 'content-drive.dialog.folder.advanced.header' | dm }}
            </p-tab>
        </p-tablist>
        <p-tabpanels>
            <p-tabpanel [value]="0" class="flex flex-col gap-4 mt-4">
                <div class="flex flex-col gap-2 mb-4">
                    <label [checkIsRequiredControl]="'name'" for="name" dotFieldRequired>
                        {{ 'content-drive.dialog.folder.field.name' | dm }}
                    </label>
                    <input
                    pInputText
                    id="name"
                    aria-describedby="name-help"
                    formControlName="name" />
                </div>
                <div class="flex flex-col gap-2 mb-4">
                    <label [checkIsRequiredControl]="'title'" for="title" dotFieldRequired>
                        {{ 'content-drive.dialog.folder.field.title' | dm }}
                    </label>
                    <input
                        pInputText
                        id="title"
                        aria-describedby="title-help"
                        formControlName="title"
                        [autofocus]="true" />
                </div>

                <div class="flex flex-col gap-2 mb-4">
                    <span>{{ 'content-drive.dialog.folder.field.path' | dm }}</span>
                    <p class="bg-gray-100 h-8 rounded-md px-2 flex items-center m-0">
                        {{ $finalPath() }}
                    </p>
                </div>
            </p-tabpanel>
            <p-tabpanel [value]="1" class="flex flex-col gap-4 mt-4">
                <div class="flex flex-col gap-2 mb-4">
                    <label [checkIsRequiredControl]="'sortOrder'" for="sortOrder" dotFieldRequired>
                        {{ 'content-drive.dialog.folder.field.sort-order' | dm }}
                    </label>
                    <p-inputNumber
                        inputId="minmax"
                        mode="decimal"
                        [min]="0"
                        formControlName="sortOrder" />
                </div>

                <div class="flex flex-col gap-2 mb-4">
                    <label
                        [checkIsRequiredControl]="'allowedFileExtensions'"
                        for="allowedFileExtensions"
                        dotFieldRequired>
                        {{ 'content-drive.dialog.folder.field.allowed-file-extensions' | dm }}
                    </label>
                    <p-autoComplete
                        formControlName="allowedFileExtensions"
                        data-testid="allowed-file-extensions-autocomplete"
                        (completeMethod)="onCompleteMethod($event)"
                        [suggestions]="$filteredAllowedFileExtensions()"
                        [multiple]="true"
                        (keyup.enter)="onEnterKey($event)" />
                    <small id="allowedFileExtensions-help">
                        {{ 'content-drive.dialog.folder.field.allowed-file-extensions.help' | dm }}
                    </small>
                </div>

                <div class="flex flex-col gap-2 mb-4">
                    <label
                        [checkIsRequiredControl]="'defaultFileAssetType'"
                        for="defaultFileAssetType"
                        dotFieldRequired>
                        {{ 'content-drive.dialog.folder.field.default-file-asset-type' | dm }}
                    </label>
                    <p-select
                        [options]="$fileAssetTypes()"
                        optionLabel="name"
                        optionValue="variable"
                        [loading]="false"
                        id="defaultFileAssetType"
                        aria-describedby="defaultFileAssetType-help"
                        [placeholder]="
                            'content-drive.dialog.folder.field.default-file-asset-type.help' | dm
                        "
                        formControlName="defaultFileAssetType" />
                </div>

                <div class="flex flex-col gap-2 mb-4">
                    <label
                        [checkIsRequiredControl]="'showOnMenu'"
                        for="showOnMenu"
                        dotFieldRequired>
                        {{ 'content-drive.dialog.folder.field.show-on-menu' | dm }}
                    </label>
                    <p-toggleSwitch
                        id="showOnMenu"
                        aria-describedby="showOnMenu-help"
                        formControlName="showOnMenu" />
                </div>
            </p-tabpanel>
        </p-tabpanels>
    </p-tabs>
</div>

<div class="flex justify-end gap-4 mt-4 px-6">
    <button
        pButton
        type="button"
        class="p-button-outlined"
        data-testid="content-drive-dialog-folder-cancel"
        [label]="'content-drive.dialog.folder.cancel' | dm"
        (click)="closeDialog()"></button>
    <button
        pButton
        type="button"
        class="p-button-primary"
        data-testid="content-drive-dialog-folder-create"
        [label]="
            ($folder() ? 'content-drive.dialog.folder.save' : 'content-drive.dialog.folder.create')
                | dm
        "
        [disabled]="folderForm.invalid"
        [loading]="$isLoading()"
        (click)="$folder() ? saveFolder() : createFolder()"></button>
</div>
