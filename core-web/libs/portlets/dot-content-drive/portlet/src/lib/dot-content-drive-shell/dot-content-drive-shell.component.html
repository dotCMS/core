@if ($showMessage()) {
    <p-messages severity="info" data-testid="message">
        <ng-template pTemplate="content">
            <div class="flex align-items-center justify-content-between gap-2 w-full">
                <div class="flex align-items-center gap-2">
                    <i class="pi pi-info-circle"></i>
                    <span data-testid="message-content">
                        {{ 'content-drive.feature.state' | dm }}
                        <b>{{ 'development' | dm }}</b>
                    </span>
                </div>
                <div class="flex align-items-center gap-2">
                    <p-button
                        styleClass="p-button-text p-button-sm"
                        type="button"
                        [label]="'learn-more' | dm"
                        data-testid="learn-more"
                        (click)="onLearnMore()"></p-button>

                    <p-button
                        styleClass="p-button-text p-button-rounded p-button-sm p-button-icon-only"
                        type="button"
                        icon="pi pi-times"
                        data-testid="close-message"
                        (click)="onCloseMessage()"></p-button>
                </div>
            </div>
        </ng-template>
    </p-messages>
}

<dot-content-drive-toolbar data-testid="toolbar" />

<div
    class="tree-selector center-content"
    [class.expanded]="$treeExpanded()"
    data-testid="tree-selector">
    <dot-content-drive-sidebar data-testid="sidebar" />
</div>

<dot-folder-list-view
    [items]="$items()"
    [totalItems]="$totalItems()"
    [loading]="$status() === DOT_CONTENT_DRIVE_STATUS.LOADING"
    (paginate)="onPaginate($event)"
    (sort)="onSort($event)"
    (rightClick)="onContextMenu($event)"
    (doubleClick)="onDoubleClick($event)"
    #listView />

<dot-folder-list-context-menu />

<p-toast position="top-center" data-testId="content-drive-toast" />

@if ($contextMenuData()?.showAddToBundle) {
    <dot-add-to-bundle
        (cancel)="cancelAddToBundle()"
        [assetIdentifier]="$contextMenuData().contentlet.identifier" />
}

<!-- Just placeholders for now. Let's leave it here so we can maintain the layout. But we are not going to use for this version. -->
<div class="detail-view center-content"></div>
<p-dialog
    [visible]="!!$dialog()"
    [header]="$dialog()?.header"
    [draggable]="false"
    [resizable]="false"
    [modal]="true"
    appendTo="body"
    data-testId="dialog"
    (visibleChange)="onHideDialog()"
    #dialogRef>
    @switch ($dialog()?.type) {
        @case (DIALOG_TYPE.FOLDER) {
            <div>Folder dialog</div>
        }
        @case (DIALOG_TYPE.MESSAGE) {
            <div class="flex flex-column gap-4">
                <div class="dialog-development-message">
                    {{ 'content-drive.dialog.in-development-message-1' | dm }}
                    <br />
                    {{ 'content-drive.dialog.in-development-message-2' | dm }}
                </div>
                <div class="flex justify-content-end">
                    <p-button
                        styleClass="p-button-sm"
                        type="button"
                        [label]="'close' | dm"
                        data-testid="close-dialog"
                        (click)="dialogRef.close($event)"></p-button>
                </div>
            </div>
        }
        @default {
            <div>Default dialog</div>
        }
    }
</p-dialog>
