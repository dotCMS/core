@for (device of systemDevices; track $index) {
    @let isActive = device.inode === $currentDeviceInode();
    <p-button
        tooltipPosition="bottom"
        [icon]="device.icon"
        [pTooltip]="device.name | dm"
        [styleClass]="
            'p-button-text p-button-sm p-button-rounded ' + (isActive ? 'active-device' : '')
        "
        (click)="onDeviceSelect(device)" />
}

<p-button
    styleClass="p-button-text p-button-sm p-button-rounded orientation p-button-icon-only"
    [ngClass]="'vertical'"
    [disabled]="$allowRotation()"
    (click)="onOrientationChange()"
    data-testId="orientation">
    <svg fill="currentColor" viewBox="0 0 24 24" width="24px" height="24px">
        <use href="./assets/edit-ema/orientation.svg#orientation" width="24px" height="24px"></use>
    </svg>
</p-button>

@if ($menuItems().length) {
    <p-button
        icon="pi pi-angle-down"
        iconPos="right"
        [label]="'more' | dm"
        [class.active]="false"
        styleClass="p-button-text p-2 p-button-sm"
        (click)="menu.toggle($event)"
        data-testId="more-button" />

    <p-menu
        #menu
        [model]="$menuItems()"
        [popup]="true"
        styleClass="more-menu"
        data-testId="more-menu">
        <ng-template pTemplate="submenuheader" let-item>
            <span class="text-primary font-bold">{{ item.label | dm }}</span>
        </ng-template>
        <ng-template pTemplate="item" let-item>
            <a
                pRipple
                class="flex align-items-center p-menuitem-link menu-item"
                [ngClass]="{ 'menu-item--active': item.id === 'social-media' }">
                <span>{{ item.label }}</span>
            </a>
        </ng-template>
    </p-menu>
}
