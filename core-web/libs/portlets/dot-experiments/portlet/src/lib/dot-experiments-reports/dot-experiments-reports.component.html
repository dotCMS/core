<ng-container *ngIf="vm$ | async as vm">
    <dot-experiments-header
        [isLoading]="vm.isLoading"
        [status]="vm?.experiment?.status"
        [title]="vm.experiment?.name"
        (goBack)="goToExperimentList(vm.experiment.pageId)"
    >
    </dot-experiments-header>
    <div class="flex flex-column dot-experiment-report-content">
        <ng-container *ngIf="!vm.isLoading; else loadingTpl">
            <dot-experiments-experiment-summary
                *ngIf="vm.showSummary"
                [goals]="vm.experiment.goals"
                [scheduling]="vm.experiment.scheduling"
                [sessionsReached]="vm.results ? vm.results.sessions.total : 0"
                [suggestedWinner]="vm.winnerLegendSummary"
            />

            <div class="flex justify-content-center w-full container">
                <p-tabView>
                    <p-tabPanel header="{{ 'experiments.reports.chart.title' | dm }}">
                        <div class="flex flex-column gap-2 content">
                            <dot-experiments-reports-chart
                                [config]="chartConfig"
                                [data]="vm.chartData"
                                [isEmpty]="!vm.hasEnoughSessions"
                                [isLoading]="vm.isLoading"
                            />

                            <dot-experiments-report-daily-details
                                [detailData]="vm.detailData"
                                [experimentId]="vm.experiment.id"
                                [hasEnoughSessions]="vm.hasEnoughSessions"
                                [promotedVariantId]="vm.promotedVariant"
                            />
                        </div>
                    </p-tabPanel>
                </p-tabView>
            </div>
        </ng-container>
    </div>
</ng-container>

<ng-template #loadingTpl>
    <dot-experiments-reports-skeleton />
</ng-template>
<ng-template dotDynamic></ng-template>
<p-confirmPopup></p-confirmPopup>
