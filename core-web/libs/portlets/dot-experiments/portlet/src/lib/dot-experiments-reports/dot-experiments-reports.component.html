@if (vm$ | async; as vm) {
    <dot-experiments-header
        (goBack)="goToExperimentList(vm.experiment.pageId)"
        [experiment]="vm.experiment"
        [isLoading]="vm.isLoading"
        [title]="vm.experiment?.name" />
    <div class="flex flex-column dot-experiment-report__wrapper">
        @if (!vm.isLoading) {
            <dot-experiments-experiment-summary
                (updateResults)="loadExperimentsResults()"
                [goals]="vm.experiment.goals"
                [scheduling]="vm.experiment.scheduling"
                [sessionsReached]="vm.results ? vm.results.sessions.total : 0"
                [suggestedWinner]="vm.winnerLegendSummary" />
            <div
                class="flex align-items-center flex-column w-full dot-experiment-report__container gap-3">
                <div class="dot-experiment-report__tabview">
                    <p-tabView>
                        <p-tabPanel header="{{ 'experiments.reports.chart.title' | dm }}">
                            <div class="flex flex-column gap-2 align-items-center content">
                                <dot-experiments-reports-chart
                                    [config]="axisLabelsProbabilityChart"
                                    [data]="vm.dailyChart.chartData"
                                    [isEmpty]="!vm.dailyChart.hasEnoughData"
                                    [isLoading]="vm.isLoading"
                                    data-testId="daily-chart" />
                            </div>
                        </p-tabPanel>
                        <p-tabPanel header="{{ 'experiments.bayesian.reports.chart.title' | dm }}">
                            <div class="flex flex-column gap-2 align-items-center content">
                                <dot-experiments-reports-chart
                                    [config]="axisLabelsBayesianChart"
                                    [data]="vm.bayesianChart.chartData"
                                    [isEmpty]="!vm.bayesianChart.hasEnoughData"
                                    [isLinearAxis]="true"
                                    [isLoading]="vm.isLoading"
                                    data-testId="bayesian-chart" />
                            </div>
                        </p-tabPanel>
                    </p-tabView>
                    <dot-experiments-report-daily-details
                        [detailData]="vm.detailData"
                        [experimentId]="vm.experiment.id"
                        [hasEnoughSessions]="vm.dailyChart.hasEnoughData"
                        [promotedVariantId]="vm.promotedVariant" />
                </div>
            </div>
        } @else {
            <dot-experiments-reports-skeleton />
        }
    </div>
}

<ng-template dotDynamic></ng-template>
<p-confirmPopup></p-confirmPopup>
