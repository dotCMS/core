<div [formGroup]="primaryFormGroup" class="flex flex-col wrapper">
    <div class="flex-auto flex flex-col">
        <h3>{{ 'experiments.goal.reach_page.form.conditions.label' | dm }}</h3>

        @for (condition of conditionsFormArray.controls; track condition; let i = $index) {
            <ng-container formArrayName="conditions">
                <div [formGroupName]="i" class="condition flex">
                    <div class="field flex-grow-1 flex flex-col w-15rem" formGroupName="value">
                        <label dotFieldRequired for="name">
                            {{
                                'experiments.goal.url_parameter.form.conditions.parameter.label'
                                    | dm
                            }}
                        </label>
                        <input
                            id="name"
                            data-testId="name-input"
                            dotAutofocus
                            formControlName="name"
                            name="value"
                            pInputText
                            placeholder="{{
                                'experiments.goal.url_parameter.form.conditions.parameter.placeholder'
                                    | dm
                            }}"
                            required
                            type="text" />
                        <dot-field-validation-message
                            [field]="
                                getConditionsFormArrayItemByIndex(i).controls['parameter']
                            "></dot-field-validation-message>
                    </div>
                    <div class="field flex-none flex flex-col w-15rem">
                        <label dotFieldRequired for="operator">
                            {{
                                'experiments.goal.url_parameter.form.conditions.operator.label' | dm
                            }}
                        </label>
                        <p-select
                            [dotOptions]="operatorsList"
                            id="operator"
                            data-testId="operator-input"
                            dotDropdown
                            formControlName="operator"
                            placeholder="{{
                                'experiments.goal.url_parameter.form.conditions.operator.placeholder'
                                    | dm
                            }}"></p-select>
                        <dot-field-validation-message
                            [field]="
                                getConditionsFormArrayItemByIndex(i).controls['operator']
                            "></dot-field-validation-message>
                    </div>
                    <div class="field flex-grow-1 flex flex-col" formGroupName="value">
                        <label dotFieldRequired for="value">
                            {{ 'experiments.goal.url_parameter.form.conditions.value.label' | dm }}
                        </label>
                        <input
                            id="value"
                            data-testId="value-input"
                            formControlName="value"
                            name="value"
                            pInputText
                            placeholder="{{
                                'experiments.goal.url_parameter.form.conditions.value.placeholder'
                                    | dm
                            }}"
                            required
                            type="text" />
                        <dot-field-validation-message
                            [field]="
                                getConditionsFormArrayItemByIndex(i).controls['value']
                            "></dot-field-validation-message>
                    </div>
                </div>
            </ng-container>
        }
    </div>
</div>
