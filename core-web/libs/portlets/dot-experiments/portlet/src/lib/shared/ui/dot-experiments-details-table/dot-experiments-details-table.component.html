@if (!isLoading) {
    @if (!isEmpty) {
        <div class="flex flex-col gap-2">
            @if (title) {
                <div
                    class="header-title flex flex-row flex-wrap items-center"
                    data-testId="header-title">
                    <ng-container *dotStringTemplateOutlet="title">
                        {{ title }}
                    </ng-container>
                </div>
            }
            <div class="flex flex-col gap-4 details">
                <div class="details__headers grid grid-cols-12 gap-4 grid-nogutter">
                    <ng-container
                        *ngTemplateOutlet="
                            headers || defaultHeaders;
                            context: { $implicit: data }
                        " />
                </div>
                <div class="details__rows-wrapper flex flex-col gap-2">
                    @for (row of data; track row) {
                        <div
                            class="details__row grid grid-cols-12 gap-4 grid-nogutter"
                            data-testId="detail-row">
                            <ng-container
                                *ngTemplateOutlet="
                                    rows || defaultRowsTemplate;
                                    context: { $implicit: row }
                                " />
                        </div>
                    }
                </div>
            </div>
            <ng-template #defaultHeaders let-data>
                @if (data) {
                    @for (header of data[0] | keyvalue; track header; let last = $last) {
                        <div
                            [ngClass]="{ 'justify-content-end': last }"
                            class="flex col flex-wrap items-center capitalize"
                            data-testId="default-header-columns">
                            {{ header.key }}
                        </div>
                    }
                }
            </ng-template>
            <ng-template #defaultRowsTemplate let-row>
                @for (r of row | keyvalue; track r) {
                    <div
                        class="flex col flex-wrap items-center capitalize"
                        data-testId="default-row">
                        {{ r.value }}
                    </div>
                }
            </ng-template>
        </div>
    } @else {
        <div class="empty flex justify-center items-center flex-col" data-testId="empty-template">
            <i class="empty__icon pi pi-table mb-2"></i>
            <p class="empty__message m-0" data-testId="empty-title">
                {{ 'experiments.reports.summary.empty.title' | dm }}
            </p>
            <p class="empty__description m-0" data-testId="empty-description">
                {{ 'experiments.reports.summary.empty.description' | dm }}
            </p>
        </div>
    }
} @else {
    <div class="grid grid-cols-12 gap-4" data-testId="loading-skeleton">
        <div class="col-span-2 mt-6">
            <p-skeleton height="1rem" width="100%"></p-skeleton>
        </div>
        <div class="col-span-12">
            <p-skeleton height="33rem" width="100%"></p-skeleton>
        </div>
    </div>
}
