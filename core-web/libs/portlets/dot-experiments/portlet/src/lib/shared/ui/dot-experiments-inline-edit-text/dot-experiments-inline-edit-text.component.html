<p-inplace [disabled]="disabled" class="flex w-full">
    <ng-template pTemplate="display">
        <div class="flex flex-wrap items-center gap-2">
            @if (text) {
                <span data-testId="text-input">{{ text }}</span>
            } @else {
                <span class="text-muted" data-testId="empty-text-message">
                    {{ emptyTextMessage | dm }}
                </span>
            }
            @if (!disabled) {
                <button
                    [class]="inplaceSizes[inputSize].button"
                    class="p-button-rounded p-button-sm p-button-text"
                    data-testId="text-input-button"
                    icon="pi pi-pencil"
                    pButton></button>
            }
        </div>
    </ng-template>

    <ng-template pTemplate="content">
        <form [class]="inputSize" [formGroup]="form" class="flex grow gap-2" novalidate>
            <div class="grow flex p-input-icon-right">
                <input
                    (keydown.enter)="saveAction()"
                    (keydown.escape)="deactivateInplace()"
                    [class]="inplaceSizes[inputSize].input"
                    class="w-full"
                    data-testId="inplace-input"
                    dotAutofocus
                    dotTrimInput
                    formControlName="text"
                    pInputText />
                <i
                    (click)="deactivateInplace()"
                    class="pi pi-times cursor-pointer"
                    data-testId="variant-inplace-button"></i>
            </div>
            <button
                (click)="saveAction()"
                [class]="inplaceSizes[inputSize].button"
                [disabled]="form.invalid || textControl.pristine"
                [loading]="isLoading"
                class="p-button-rounded p-button-text"
                data-testId="text-save-btn"
                icon="pi pi-save"
                pButton
                type="button"></button>
        </form>

        @if (form.invalid && showErrorMsg) {
            <dot-field-validation-message [field]="textControl"></dot-field-validation-message>
        }
    </ng-template>
</p-inplace>
