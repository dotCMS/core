@if (vm$ | async; as vm) {
    <p-card>
        <ng-template pTemplate="title">
            <h2 class="flex items-center gap-1 uppercase" data-testId="traffic-card-title">
                <dot-icon
                    [ngClass]="{ isDone: vm.trafficAllocation }"
                    [size]="16"
                    class="inline-flex"
                    data-testId="traffic-step-done"
                    name="check_circle" />
                {{ 'experiments.configure.traffic.name' | dm }}
            </h2>
        </ng-template>
        <p-card>
            <div class="flex flex-row items-center content-between gap-2">
                <div class="title flex grow flex-col">
                    <span data-testId="card-title">
                        {{ 'experiments.configure.traffic.load.name' | dm }}
                    </span>
                </div>
                <div
                    [pTooltip]="vm.disabledTooltipLabel | dm"
                    [tooltipDisabled]="!vm.disabledTooltipLabel"
                    data-testId="tooltip-on-disabled"
                    tooltipPosition="bottom">
                    <button
                        (click)="changeTrafficAllocation()"
                        [disabled]="vm.disabledTooltipLabel"
                        class="p-button-sm p-button-link"
                        data-testId="traffic-allocation-button"
                        pButton>
                        {{ vm.trafficAllocation }}%
                    </button>
                </div>
            </div>
        </p-card>
    </p-card>
}

<ng-container dotDynamic />
