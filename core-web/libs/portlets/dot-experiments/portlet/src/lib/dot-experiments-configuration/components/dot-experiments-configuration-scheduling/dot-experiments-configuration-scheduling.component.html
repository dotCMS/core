@if (vm$ | async; as vm) {
    <p-card>
        <ng-template #title>
            <h2
                class="flex items-center gap-1 uppercase m-0 font-bold"
                data-testId="scheduling-card-name">
                <i
                    [style.font-size.px]="16"
                    class="material-icons"
                    [ngClass]="
                        !!vm.scheduling?.endDate || !!vm.scheduling?.startDate
                            ? 'text-green-600'
                            : 'text-gray-500'
                    "
                    data-testId="schedule-step-done">
                    check_circle
                </i>
                {{ 'experiments.configure.scheduling.name' | dm }}
            </h2>
        </ng-template>
        <p-card>
            <div class="flex flex-row items-center justify-between gap-2">
                <div class="flex grow flex-col">
                    <span data-testId="scheduling-card-title-row">
                        {{ 'experiments.configure.scheduling.start' | dm }}
                    </span>
                </div>
                <div
                    [pTooltip]="vm.disabledTooltipLabel | dm"
                    [tooltipDisabled]="!vm.disabledTooltipLabel"
                    data-testId="tooltip-on-disabled"
                    tooltipPosition="bottom">
                    <p-button
                        (onClick)="setupSchedule()"
                        [disabled]="vm.disabledTooltipLabel"
                        [link]="true"
                        [size]="'small'"
                        data-testId="scheduling-setup-button"
                        type="button">
                        @if (!(!!vm.scheduling?.endDate || !!vm.scheduling?.startDate)) {
                            {{ 'experiments.configure.scheduling.setup' | dm }}
                        } @else {
                            @if (!!vm.scheduling?.startDate) {
                                <span>
                                    {{ 'start' | dm | titlecase }}:
                                    <span>
                                        {{
                                            vm.scheduling.startDate
                                                | date: 'EEE, LLL dd, y, h:mm aa zz'
                                        }}
                                    </span>
                                </span>
                            }
                            @if (vm.scheduling?.startDate && vm.scheduling.endDate) {
                                <span class="mx-1">-</span>
                            }
                            @if (!!vm.scheduling?.endDate) {
                                <span>
                                    {{ 'end' | dm | titlecase }}:
                                    <span>
                                        {{
                                            vm.scheduling.endDate
                                                | date: 'EEE, LLL dd, y, h:mm aa zz'
                                        }}
                                    </span>
                                </span>
                            }
                        }
                    </p-button>
                </div>
            </div>
        </p-card>
    </p-card>
}

<ng-container dotDynamic />
