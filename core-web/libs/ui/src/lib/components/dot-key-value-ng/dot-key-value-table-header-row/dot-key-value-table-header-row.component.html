<tr class="font-bold">
    @if ($dragAndDrop()) {
        <th scope="col" class="w-12 align-bottom text-left p-2" data-testId="drag-column"></th>
    }
    <th class="align-bottom text-left p-2">
        <div class="flex flex-col gap-1">
            <label for="key-value-input-row-key-input" class="font-bold">
                {{ 'keyValue.key_header.label' | dm }}
            </label>
            <input
                (keydown.escape)="onCancel($event)"
                (keydown.enter)="handleKeyInputEnter($event)"
                [formControl]="keyControl"
                [placeholder]="'keyValue.key_input.placeholder' | dm"
                class="w-full"
                #keyCell
                id="key-value-input-row-key-input"
                data-testId="key-input"
                pInputText
                type="text"
                pSize="small"
                autocomplete="false" />
            <small class="text-red-500 text-xs h-4">
                @if (keyControl.dirty && keyControl.hasError('required')) {
                    {{ 'keyValue.key_input.required' | dm }}
                } @else if (keyControl.dirty && keyControl.hasError('duplicatedKey')) {
                    {{ 'keyValue.key_input.duplicated' | dm }}
                }
            </small>
        </div>
    </th>
    <th class="align-bottom text-left p-2">
        <div class="flex flex-col gap-1">
            <label for="key-value-input-row-value-input" class="font-bold">
                {{ 'keyValue.value_header.label' | dm }}
            </label>
            <input
                (keydown.escape)="onCancel($event)"
                (keydown.enter)="handleValueInputEnter($event)"
                (keypress.enter)="handleValueInputEnter($event)"
                [formControl]="valueControl"
                [type]="hiddenControl.value ? 'password' : 'text'"
                [placeholder]="'keyValue.value_input.placeholder' | dm"
                class="w-full"
                id="key-value-input-row-value-input"
                #valueCell
                data-testId="value-input"
                pInputText
                pSize="small"
                autocomplete="false" />
            <small class="text-red-500 text-xs h-4">
                @if (valueControl.dirty && valueControl.hasError('required')) {
                    {{ 'keyValue.value_input.required' | dm }}
                }
            </small>
        </div>
    </th>
    @if ($showHiddenField()) {
        <th class="align-bottom text-left p-2">
            <div class="flex flex-col gap-1">
                <label for="key-value-input-row-hidden-input" class="font-bold">
                    {{ 'keyValue.hidden_header.label' | dm }}
                </label>
                <p-toggleSwitch
                    [formControl]="hiddenControl"
                    id="key-value-input-row-hidden-input"
                    data-testId="hidden-switch" />
                <small class="h-4"></small>
            </div>
        </th>
    }
    <th class="align-bottom text-left p-2 w-16 min-w-12" scope="col">
        <div class="flex flex-col gap-1 justify-end h-full">
            <p-button
                (click)="saveVariable()"
                icon="pi pi-plus"
                [text]="true"
                #saveButton
                size="small"
                data-testId="save-button"
                type="button" />
            <small class="h-4"></small>
        </div>
    </th>
</tr>
