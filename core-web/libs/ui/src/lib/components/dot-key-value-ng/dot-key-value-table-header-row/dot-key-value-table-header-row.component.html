<tr class="dot-key-value__header">
    @if ($dragAndDrop()) {
        <th scope="col" class="w-12" data-testId="drag-column"></th>
    }
    <th>
        <div class="flex flex-col">
            <label for="key-value-input-row-key-input" class="mb-1">
                {{ 'keyValue.key_header.label' | dm }}
            </label>
            <input
                (keydown.escape)="onCancel($event)"
                (keydown.enter)="handleKeyInputEnter($event)"
                [formControl]="keyControl"
                [placeholder]="'keyValue.key_input.placeholder' | dm"
                class="w-full h-8"
                #keyCell
                id="key-value-input-row-key-input"
                data-testId="key-input"
                pInputText
                type="text"
                pSize="small"
                autocomplete="false" />
            @if (keyControl.dirty && keyControl.hasError('required')) {
                <small class="text-red-500 text-xs">{{ 'keyValue.key_input.required' | dm }}</small>
            }
            @if (keyControl.dirty && keyControl.hasError('duplicatedKey')) {
                <small class="text-red-500 text-xs">
                    {{ 'keyValue.key_input.duplicated' | dm }}
                </small>
            }
        </div>
    </th>
    <th>
        <div class="flex flex-col">
            <label for="key-value-input-row-value-input" class="mb-1">
                {{ 'keyValue.value_header.label' | dm }}
            </label>
            <input
                (keydown.escape)="onCancel($event)"
                (keydown.enter)="handleValueInputEnter($event)"
                (keypress.enter)="handleValueInputEnter($event)"
                [formControl]="valueControl"
                [type]="hiddenControl.value ? 'password' : 'text'"
                [placeholder]="'keyValue.value_input.placeholder' | dm"
                class="w-full h-8"
                id="key-value-input-row-value-input"
                #valueCell
                data-testId="value-input"
                pInputText
                pSize="small"
                autocomplete="false" />
            @if (valueControl.dirty && valueControl.hasError('required')) {
                <small class="text-red-500 text-xs">
                    {{ 'keyValue.value_input.required' | dm }}
                </small>
            }
        </div>
    </th>
    @if ($showHiddenField()) {
        <th>
            <div class="flex flex-col">
                <label for="key-value-input-row-hidden-input" class="mb-1">
                    {{ 'keyValue.hidden_header.label' | dm }}
                </label>
                <p-inputSwitch
                    class="inline-block mt-2"
                    [formControl]="hiddenControl"
                    id="key-value-input-row-hidden-input"
                    data-testId="hidden-switch" />
            </div>
        </th>
    }
    <th class="relative w-16 min-w-12" scope="col">
        <button
            (click)="saveVariable()"
            icon="pi pi-plus"
            [text]="true"
            class="absolute top-9"
            #saveButton
            size="small"
            data-testId="save-button"
            type="button"
            pButton></button>
    </th>
</tr>
