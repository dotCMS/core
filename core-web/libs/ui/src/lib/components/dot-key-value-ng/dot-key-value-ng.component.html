@let variableList = $variableList();

<p-table
    [value]="variableList()"
    #table
    dataKey="key"
    (onRowReorder)="reorderVariables()"
    styleClass="dotTable p-datatable-key-value p-datatable-no-gridlines">
    <ng-template pTemplate="header" let-columns>
        <dot-key-value-table-input-row
            (save)="saveVariable($event)"
            [autoFocus]="$autoFocus()"
            [showHiddenField]="$showHiddenField()"
            [forbiddenkeys]="$forbiddenkeys()" />
    </ng-template>
    <ng-template pTemplate="body" let-variable let-rowIndex="rowIndex">
        <dot-key-value-table-row
            (delete)="deleteVariable(rowIndex)"
            (save)="updateKeyValue($event, rowIndex)"
            [showHiddenField]="$showHiddenField()"
            [variable]="variable"
            [index]="rowIndex"
            #tableRow />
    </ng-template>
    <ng-template pTemplate="emptymessage" let-variables>
        <tr data-testId="no-rows">
            <td [attr.colspan]="$showHiddenField() ? 5 : 4">
                {{ 'keyValue.value_no_rows.label' | dm }}
            </td>
        </tr>
    </ng-template>
</p-table>
