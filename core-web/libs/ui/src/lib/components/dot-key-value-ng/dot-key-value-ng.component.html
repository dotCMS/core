@let variableList = $variableList();

<p-table
    [value]="variableList()"
    #table
    dataKey="key"
    (onRowReorder)="reorderVariables()"
    styleClass="dotTable p-datatable-key-value">
    <ng-template pTemplate="header" let-columns>
        <dot-key-value-table-header-row
            (save)="saveVariable($event)"
            [showHiddenField]="$showHiddenField()"
            [dragAndDrop]="$dragAndDrop()"
            [forbiddenkeys]="$forbiddenkeys()" />
    </ng-template>
    <ng-template pTemplate="body" let-variable let-rowIndex="rowIndex">
        <dot-key-value-table-row
            (delete)="deleteVariable(rowIndex)"
            (save)="updateKeyValue($event, rowIndex)"
            [showHiddenField]="$showHiddenField()"
            [variable]="variable"
            [index]="rowIndex"
            [dragAndDrop]="$dragAndDrop()"
            #tableRow />
    </ng-template>
    <ng-template pTemplate="emptymessage" let-variables>
        <tr data-testId="no-rows">
            <td [attr.colspan]="$colspan()">
                <div class="flex p-2 gap-2 justify-content-center">
                    <i class="pi pi-folder-open"></i>
                    <p class="text-500">{{ 'keyValue.value_no_rows.label' | dm }}</p>
                </div>
            </td>
        </tr>
    </ng-template>
</p-table>
