@let variableList = $variableList();

<p-table [value]="variableList()" #table dataKey="key" (onRowReorder)="reorderVariables()">
    <ng-template #header let-columns>
        <dot-key-value-table-header-row
            (save)="saveVariable($event)"
            [showHiddenField]="$showHiddenField()"
            [dragAndDrop]="$dragAndDrop()"
            [forbiddenkeys]="$forbiddenkeys()" />
    </ng-template>
    <ng-template #body let-variable let-rowIndex="rowIndex">
        <dot-key-value-table-row
            (delete)="deleteVariable(rowIndex)"
            (save)="updateKeyValue($event, rowIndex)"
            [showHiddenField]="$showHiddenField()"
            [variable]="variable"
            [index]="rowIndex"
            [dragAndDrop]="$dragAndDrop()"
            #tableRow />
    </ng-template>
    <ng-template #emptymessage let-variables>
        <tr>
            <td [attr.colspan]="$colspan()">
                <div class="flex p-2 gap-2 justify-center" data-testId="no-rows">
                    <i class="pi pi-folder-open"></i>
                    <p class="text-surface-500 dark:text-surface-300">
                        {{ 'keyValue.value_no_rows.label' | dm }}
                    </p>
                </div>
            </td>
        </tr>
    </ng-template>
</p-table>
