<p-select
    #select
    optionLabel="hostname"
    [appendTo]="'body'"
    (onChange)="onSiteChange($event.value)"
    (onLazyLoad)="onLazyLoad($event)"
    (onShow)="onSelectShow()"
    [ngModel]="value()"
    (ngModelChange)="value.set($event)"
    [disabled]="$disabled()"
    [filter]="true"
    [loading]="$state.loading()"
    [options]="$options()"
    [placeholder]="placeholder()"
    [virtualScroll]="true"
    [lazy]="true"
    [scrollHeight]="'300px'"
    [virtualScrollOptions]="{
        itemSize: 34,
        step: 40,
        autoSize: false,
        style: {
            height: '300px',
            minHeight: '300px'
        }
    }"
    class="w-full">
    <ng-template pTemplate="filter" let-options>
        <p-iconfield>
            <input
                pInputText
                class="w-full"
                type="text"
                role="searchbox"
                autocomplete="off"
                [value]="$state.filterValue() || ''"
                [placeholder]="'Search sites...'"
                (input)="onFilterChange($any($event.target).value)"
                (click)="$event.stopPropagation()" />
            <p-inputicon class="pi pi-search" />
        </p-iconfield>
    </ng-template>

    <ng-template let-site let-i="index" #item>
        @if ($state.pinnedOption()?.hostname === site.hostname) {
            <div class="font-bold">
                {{ site.hostname }}
            </div>
        } @else {
            {{ site.hostname }}
        }
    </ng-template>
</p-select>
