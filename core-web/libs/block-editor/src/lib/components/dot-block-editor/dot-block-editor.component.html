@if (editor) {
    <div
        [ngClass]="{
            'editor-wrapper--fullscreen': isFullscreen,
            'editor-wrapper--default': !isFullscreen,
            'editor-wrapper--disabled': disabled,
            'editor-wrapper--error': hasError
        }"
        [style]="customStyles"
        class="editor-wrapper"
        data-testid="block-editor-wrapper">
        <tiptap-editor
            (keyup)="subject.next()"
            (ngModelChange)="onBlockEditorChange($event)"
            [editor]="editor"
            [ngClass]="{ 'overflow-hidden': freezeScroll, 'editor-disabled': disabled }"
            [ngModel]="content"
            data-testid="tiptap-editor" />
    </div>
    <div
        dotDragHandle
        [editor]="editor"
        [tippyOptions]="dotDragHandleOptions"
        class="dot-drag-handle">
        <i class="pi pi-ellipsis-v"></i>
        <i class="pi pi-ellipsis-v"></i>
    </div>

    @if (showCharData || charLimitError || requiredError) {
        <div class="block-editor__footer">
            <div class="block-editor__footer-error">
                @if (requiredError) {
                    <small data-testid="required-error">
                        {{ 'dot.edit.content.form.field.required' | dm }}
                    </small>
                }
                @if (charLimitError) {
                    <small data-testid="char-limit-error">
                        {{
                            'dot.edit.content.form.field.charLimitExceeded'
                                | dm: [charLimitError.max]
                        }}
                    </small>
                }
            </div>
            @if (showCharData) {
                <dot-editor-count-bar
                    [charLimit]="charLimit"
                    [characterCount]="characterCount"
                    [readingTime]="readingTime"
                    data-testid="editor-count-bar" />
            }
        </div>
    }

    <dot-editor-context-menu [editor]="editor" />
    <dot-add-button [editor]="editor" />
    <dot-bubble-menu [editor]="editor" />
}
