<ng-container *ngIf="vm$ | async as vm">
    <p-dialog
        [(visible)]="vm.showDialog"
        [dismissableMask]="true"
        [draggable]="false"
        [resizable]="false"
        [style]="{ width: '882px' }"
        (onHide)="hideDialog()"
        appendTo="body"
        header="{{ 'block-editor.extension.ai-image.dialog-title' | dm }}">
        <div class="dialog-prompt__wrapper flex">
            <dot-ai-image-prompt-form
                *ngIf="vm.showDialog"
                [generatedValue]="vm.images[vm.galleryActiveIndex]"
                [isLoading]="vm.isLoading"
                (value)="generateImage($event)"
                (orientation)="vm.orientation = $event" />
            <div [class.dialog-prompt_gallery]="vm.images.length || vm.isLoading">
                <dot-ai-image-prompt-gallery
                    [isLoading]="vm.isLoading"
                    [images]="vm.images"
                    [index]="vm.galleryActiveIndex"
                    [orientation]="vm.orientation"
                    (activeIndexChange)="vm.galleryActiveIndex = $event" />
                <button
                    class="align-self-end"
                    data-testid="submit-btn"
                    *ngIf="vm.images.length || vm.isLoading"
                    [disabled]="vm.isLoading"
                    [label]="'block-editor.extension.ai-image.insert' | dm"
                    (click)="insetImage(vm.images[vm.galleryActiveIndex])"
                    pButton
                    type="submit"
                    icon="pi pi-check"></button>
            </div>
        </div>
    </p-dialog>
</ng-container>

<p-confirmDialog
    [style]="{ width: '500px' }"
    (onHide)="onHideConfirm()"
    appendTo="body"
    dismissableMask="true"
    key="ai-image-prompt-msg" />
