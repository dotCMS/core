<p-fileUpload
    *ngIf="status === 'SELECT'; else preview"
    [accept]="type + '/*'"
    [customUpload]="true"
    (onSelect)="onSelectFile($event.files)"
    chooseLabel="browse files"
    mode="basic"
></p-fileUpload>

<ng-template #preview>
    <div class="preview-container">
        <dot-asset-preview
            *ngIf="status === 'PREVIEW'; else status === 'UPLOAD' ? loading : errorTemplate"
            [type]="type"
            [file]="file"
            [src]="src"
        ></dot-asset-preview>

        <ng-template #loading>
            <dot-spinner></dot-spinner>
            <span class="warning" [@shakeit]="animation" (@shakeit.done)="shakeEnd($event)"
                >Don't close this window while the video uploads</span
            >
        </ng-template>

        <ng-template #errorTemplate>
            <span class="error">{{ error }}</span>
        </ng-template>
    </div>

    <div class="btn-container">
        <button
            class="p-button-outlined"
            [disabled]="status === 'UPLOAD'"
            (click)="removeFile()"
            data-test-id="back-btn"
            pButton
        >
            Cancel
        </button>
        <button
            [disabled]="status === 'UPLOAD'"
            (click)="uploadFile()"
            data-test-id="upload-btn"
            pButton
        >
            Upload
        </button>
    </div>
</ng-template>
