@let field = $field();
@let showLabel = $showLabel();
@let dataType = field.dataType;
@let fieldHasError = $hasError();

<dot-card-field [hasError]="fieldHasError">
    @if (showLabel) {
        <dot-card-field-label [variableName]="field.variable" [isRequired]="isRequired">
            {{ field.name }}
        </dot-card-field-label>
    }
    <dot-card-field-content>
        <input
            class="w-full"
            [id]="field.variable"
            [name]="field.variable"
            [formControlName]="field.variable"
            [class.ng-invalid]="fieldHasError"
            [class.ng-dirty]="fieldHasError"
            [attr.data-testId]="field.variable"
            [type]="inputTextOptions[dataType].type"
            [attr.inputmode]="inputTextOptions[dataType].inputMode"
            [attr.step]="inputTextOptions[dataType].step"
            pInputText />
    </dot-card-field-content>
    @if ((fieldHasError && isRequired) || (!fieldHasError && field.hint)) {
        <dot-card-field-footer>
            @if (fieldHasError && isRequired) {
                <small class="p-field-error">
                    {{ 'dot.edit.content.form.field.required' | dm }}
                </small>
            }

            @if (!fieldHasError && field.hint) {
                <small class="p-field-hint" [attr.data-testId]="'hint-' + field.variable">
                    {{ field.hint }}
                </small>
            }
        </dot-card-field-footer>
    }
</dot-card-field>
