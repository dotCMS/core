@let hasError = $hasError();

<p-treeselect
    (onNodeSelect)="store.chooseNode($event)"
    (onNodeExpand)="store.loadChildren($event)"
    [formControl]="pathControl"
    [class.ng-invalid]="hasError"
    [class.ng-dirty]="hasError"
    [filter]="true"
    [options]="store.tree()"
    [virtualScroll]="true"
    [scrollHeight]="'100%'"
    [virtualScrollItemSize]="50"
    [virtualScrollOptions]="{
        autoSize: true,
        style: {
            width: '100%',
            height: '450px',
            minHeight: '450px'
        }
    }"
    filterBy="label"
    filterMode="lenient"
    [filterInputAutoFocus]="true"
    selectionMode="single"
    placeholder="Select Host/Folder"
    class="w-full">
    <ng-template let-node pTemplate="default">
        <span>{{ node?.label | dotTruncatePath }}</span>
    </ng-template>
    <ng-template let-item pTemplate="value">
        <span>//{{ item?.label }}</span>
    </ng-template>
    <ng-template pTemplate="triggericon">
        <i [class]="store.iconClasses()" class="pi"></i>
    </ng-template>
    <ng-template pTemplate="filtericon">
        <i class="pi pi-search"></i>
    </ng-template>
    <ng-template pTemplate="closeicon">
        <i class="pi pi-times"></i>
    </ng-template>
    <ng-template pTemplate="itemtogglericon" let-expanded>
        <i class="pi" [class.pi-chevron-down]="expanded" [class.pi-chevron-right]="!expanded"></i>
    </ng-template>
</p-treeselect>
