<div class="edit-content-dialog" data-testid="edit-content-dialog">
    @if (isCompatible()) {
        @if (state() === ComponentStatus.LOADED) {
            <dot-edit-content-form-layout 
                #editContentLayout 
                [contentTypeId]="data?.mode === 'new' ? data?.contentTypeId : undefined"
                [contentletInode]="data?.mode === 'edit' ? data?.contentletInode : undefined"
                data-testid="edit-content-layout" />
        } @else if (state() === ComponentStatus.ERROR) {
            <div class="edit-content-dialog__error" data-testid="error-state">
                <i class="pi pi-exclamation-triangle edit-content-dialog__error-icon"></i>
                <h3 class="edit-content-dialog__error-title">
                    {{ 'edit.content.dialog.error.title' | dm }}
                </h3>
                <p class="edit-content-dialog__error-message">
                    {{ 'edit.content.dialog.error.loading' | dm }}
                </p>
                <p class="edit-content-dialog__error-details">
                    {{ error() }}
                </p>
            </div>
        } @else {
            <div class="edit-content-dialog__loading" data-testid="loading-state">
                <div class="edit-content-dialog__loading-spinner">
                    <i class="pi pi-spin pi-spinner"></i>
                </div>
                <p class="edit-content-dialog__loading-text">
                    {{ 'edit.content.dialog.loading' | dm }}
                </p>
            </div>
        }
    } @else {
        <div class="edit-content-dialog__legacy-placeholder" data-testid="legacy-placeholder">
            <div class="edit-content-dialog__legacy-content">
                <i class="pi pi-code edit-content-dialog__legacy-icon"></i>
                <h3 class="edit-content-dialog__legacy-title">
                    {{ 'edit.content.dialog.legacy.title' | dm }}
                </h3>
                <p class="edit-content-dialog__legacy-description">
                    {{ 'edit.content.dialog.legacy.description' | dm }}
                </p>
                <p class="edit-content-dialog__legacy-subtitle">
                    {{ 'edit.content.dialog.legacy.subtitle' | dm }}
                </p>
            </div>
        </div>
    }
</div> 