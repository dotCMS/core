@let field = $field();
@let contentlet = $contentlet();
@let contentType = $contentType();
@let showLabel = $showLabel();
@let contentTypeVariable = contentType?.variable;

<ng-template #labelTemplate>
    @if (showLabel) {
        <label
            [attr.data-testId]="'label-' + field.variable"
            [checkIsRequiredControl]="field.variable"
            [for]="field.variable"
            dotFieldRequired>
            {{ field.name }}
        </label>
    }
</ng-template>

@switch (field.fieldType) {
    @case (fieldTypes.LINE_DIVIDER) {
        <h3 class="m-0 text-gray-700">{{ field.name }}</h3>
        <p-divider />
    }
    @case (fieldTypes.SELECT) {
        @defer (on immediate) {
            <dot-edit-content-select-field
                [field]="field"
                [formControlName]="field.variable"
                [attr.data-testId]="'field-' + field.variable">
                <ng-container [ngTemplateOutlet]="labelTemplate" />
            </dot-edit-content-select-field>
        }
    }
    @case (fieldTypes.RADIO) {
        @defer (on immediate) {
            <dot-edit-content-radio-field
                [field]="field"
                [formControlName]="field.variable"
                [attr.data-testId]="'field-' + field.variable">
                <ng-container [ngTemplateOutlet]="labelTemplate" />
            </dot-edit-content-radio-field>
        }
    }
    @case (fieldTypes.TEXT) {
        @defer (on immediate) {
            <dot-edit-content-text-field
                [field]="field"
                [formControlName]="field.variable"
                [attr.data-testId]="'field-' + field.variable">
                <ng-container [ngTemplateOutlet]="labelTemplate" />
            </dot-edit-content-text-field>
        }
    }
    @case (fieldTypes.TEXTAREA) {
        @defer (on immediate) {
            <dot-edit-content-text-area
                [field]="field"
                [formControlName]="field.variable"
                [contentlet]="contentlet"
                (disabledWYSIWYGChange)="disabledWYSIWYGChange.emit($event)"
                [attr.data-testId]="'field-' + field.variable">
                <ng-container [ngTemplateOutlet]="labelTemplate" />
            </dot-edit-content-text-area>
        }
    }
    @case (fieldTypes.CHECKBOX) {
        @defer (on immediate) {
            <dot-edit-content-checkbox-field
                [field]="field"
                [formControlName]="field.variable"
                [attr.data-testId]="'field-' + field.variable">
                <ng-container [ngTemplateOutlet]="labelTemplate" />
            </dot-edit-content-checkbox-field>
        }
    }
    @case (fieldTypes.MULTI_SELECT) {
        @defer (on immediate) {
            <dot-edit-content-multi-select-field
                [field]="field"
                [formControlName]="field.variable"
                [attr.data-testId]="'field-' + field.variable">
                <ng-container [ngTemplateOutlet]="labelTemplate" />
            </dot-edit-content-multi-select-field>
        }
    }
    @case (fieldTypes.DATE) {
        @defer (on immediate) {
            <dot-edit-content-calendar-field
                [formControlName]="field.variable"
                [contentType]="contentType"
                [utcTimezone]="$systemTimezone()"
                [field]="field"
                [attr.data-testId]="'field-' + field.variable">
                <ng-container [ngTemplateOutlet]="labelTemplate" />
            </dot-edit-content-calendar-field>
        }
    }
    @case (fieldTypes.DATE_AND_TIME) {
        @defer (on immediate) {
            <dot-edit-content-calendar-field
                [formControlName]="field.variable"
                [contentType]="contentType"
                [utcTimezone]="$systemTimezone()"
                [field]="field"
                [attr.data-testId]="'field-' + field.variable">
                <ng-container [ngTemplateOutlet]="labelTemplate" />
            </dot-edit-content-calendar-field>
        }
    }
    @case (fieldTypes.TIME) {
        @defer (on immediate) {
            <dot-edit-content-calendar-field
                [formControlName]="field.variable"
                [contentType]="contentType"
                [utcTimezone]="$systemTimezone()"
                [field]="field"
                [attr.data-testId]="'field-' + field.variable">
                <ng-container [ngTemplateOutlet]="labelTemplate" />
            </dot-edit-content-calendar-field>
        }
    }
    @case (fieldTypes.TAG) {
        @defer (on immediate) {
            <dot-edit-content-tag-field
                [formControlName]="field.variable"
                [field]="field"
                [attr.data-testId]="'field-' + field.variable">
                <ng-container [ngTemplateOutlet]="labelTemplate" />
            </dot-edit-content-tag-field>
        }
    }
    @case (fieldTypes.JSON) {
        @defer (on immediate) {
            <dot-edit-content-json-field
                [field]="field"
                [formControlName]="field.variable"
                [attr.data-testId]="'field-' + field.variable">
                <ng-container [ngTemplateOutlet]="labelTemplate" />
            </dot-edit-content-json-field>
        }
    }
    @case (fieldTypes.BINARY) {
        @defer (on immediate) {
            <dot-binary-field-wrapper
                [formControlName]="field.variable"
                [contentlet]="contentlet"
                [field]="field"
                (valueUpdated)="onBinaryFieldValueUpdated($event)"
                [attr.data-testId]="'field-' + field.variable">
                <ng-container [ngTemplateOutlet]="labelTemplate" />
            </dot-binary-field-wrapper>
        }
    }
    @case (fieldTypes.CUSTOM_FIELD) {
        @defer (on immediate) {
            <dot-edit-content-custom-field
                [field]="field"
                [formControlName]="field.variable"
                [inode]="contentlet?.inode"
                [contentType]="contentTypeVariable"
                [attr.data-testId]="'field-' + field.variable">
                <ng-container [ngTemplateOutlet]="labelTemplate" />
            </dot-edit-content-custom-field>
        }
    }
    @case (fieldTypes.BLOCK_EDITOR) {
        @defer (on immediate) {
            <dot-edit-content-block-editor
                [formControlName]="field.variable"
                [contentlet]="contentlet"
                [field]="field"
                [attr.data-testId]="'field-' + field.variable">
                <ng-container [ngTemplateOutlet]="labelTemplate" />
            </dot-edit-content-block-editor>
        }
    }
    @case (fieldTypes.KEY_VALUE) {
        @defer (on immediate) {
            <dot-edit-content-key-value
                [field]="field"
                [formControlName]="field.variable"
                [attr.data-testId]="'field-' + field.variable">
                <ng-container [ngTemplateOutlet]="labelTemplate" />
            </dot-edit-content-key-value>
        }
    }
    @case (fieldTypes.WYSIWYG) {
        @defer (on immediate) {
            <dot-edit-content-wysiwyg-field
                [field]="field"
                [formControlName]="field.variable"
                [contentlet]="contentlet"
                (disabledWYSIWYGChange)="disabledWYSIWYGChange.emit($event)"
                [attr.data-testId]="'field-' + field.variable">
                <ng-container [ngTemplateOutlet]="labelTemplate" />
            </dot-edit-content-wysiwyg-field>
        }
    }
    @case (fieldTypes.HOST_FOLDER) {
        @defer (on immediate) {
            <dot-edit-content-host-folder-field
                [field]="field"
                [formControlName]="field.variable"
                [attr.data-testId]="'field-' + field.variable">
                <ng-container [ngTemplateOutlet]="labelTemplate" />
            </dot-edit-content-host-folder-field>
        }
    }
    @case (fieldTypes.CATEGORY) {
        @defer (on immediate) {
            <dot-edit-content-category-field
                [formControlName]="field.variable"
                [attr.data-testId]="'field-' + field.variable"
                [contentlet]="contentlet"
                [field]="field">
                <ng-container [ngTemplateOutlet]="labelTemplate" />
            </dot-edit-content-category-field>
        }
    }
    @case (fieldTypes.FILE) {
        @defer (on immediate) {
            <dot-edit-content-file-field
                [formControlName]="field.variable"
                [attr.data-testId]="'field-' + field.variable"
                [field]="field">
                <ng-container [ngTemplateOutlet]="labelTemplate" />
            </dot-edit-content-file-field>
        }
    }
    @case (fieldTypes.IMAGE) {
        @defer (on immediate) {
            <dot-edit-content-file-field
                [formControlName]="field.variable"
                [attr.data-testId]="'field-' + field.variable"
                [field]="field">
                <ng-container [ngTemplateOutlet]="labelTemplate" />
            </dot-edit-content-file-field>
        }
    }
    @case (fieldTypes.RELATIONSHIP) {
        @defer (on immediate) {
            <dot-edit-content-relationship-field
                [formControlName]="field.variable"
                [attr.data-testId]="'field-' + field.variable"
                [field]="field"
                [contentlet]="contentlet">
                <ng-container [ngTemplateOutlet]="labelTemplate" />
            </dot-edit-content-relationship-field>
        }
    }
}
