@let locales = $locales();
@let currentLocale = $currentLocale();
@let isLoading = $isLoading();

@if (isLoading) {
    <p-skeleton />
} @else {
    @for (locale of $localesToShow(); track locale.id) {
        @if (locale.id === currentLocale?.id) {
            <p-overlaybadge severity="danger">
                <p-button
                    [label]="locale.isoCode | dotIsoCode"
                    [severity]="getSeverity(locale)"
                    [outlined]="isOutlined(locale)"
                    size="small"
                    (onClick)="
                        currentLocale?.id !== locale.id ? switchLocale.emit(locale) : null
                    " />
            </p-overlaybadge>
        } @else {
            <p-button
                [label]="locale.isoCode | dotIsoCode"
                [severity]="getSeverity(locale)"
                [outlined]="isOutlined(locale)"
                size="small"
                (onClick)="currentLocale?.id !== locale.id ? switchLocale.emit(locale) : null" />
        }
    }
    @if (locales?.length > $maxLocaleChips()) {
        <p-button
            [label]="$btnLabel()"
            severity="secondary"
            size="small"
            data-testid="show-more-button"
            (onClick)="toggleShowAll()" />
    }
}
