<!-- Reusable Sidebar Accordion -->
<dot-sidebar-accordion
    [initialActiveTab]="'versions'"
    (activeTabChange)="onAccordionTabChange($event)">
    <!-- Versions Tab -->
    <dot-sidebar-accordion-tab id="versions" label="Versions">
        <section class="history" role="region" aria-label="Content Version History">
            @if ($isLoading()) {
                <!-- Loading state -->
                <div class="history__loading" data-testid="loading-state">
                    @for (item of [1, 2, 3, 4]; track $index) {
                        <div class="history__skeleton-item">
                            <p-skeleton width="100%" height="60px" />
                        </div>
                    }
                </div>
            } @else if (!$hasHistoryItems()) {
                <!-- Empty state -->
                <span class="history__empty">
                    {{ 'edit.content.sidebar.history.empty.message' | dm }}
                </span>
            } @else {
                <!-- History content -->
                <div class="history__content">
                    <p-timeline
                        [value]="$historyItems()"
                        layout="vertical"
                        styleClass="history__timeline"
                        data-testid="history-timeline">
                        <ng-template pTemplate="marker" let-item let-index="index">
                            <div
                                class="history__marker"
                                [class]="getTimelineMarkerClass(item)"
                                data-testid="timeline-marker"></div>
                        </ng-template>

                        <ng-template pTemplate="content" let-item let-index="index">
                            <dot-history-timeline-item
                                [item]="item"
                                (actionTriggered)="
                                    onTimelineItemAction($event)
                                "></dot-history-timeline-item>
                        </ng-template>
                    </p-timeline>

                    <!-- Pagination Controls -->
                    @if ($showPagination()) {
                        <div class="history__pagination" data-testid="history-pagination">
                            <p-button
                                icon="pi pi-chevron-left"
                                styleClass="p-button-rounded p-button-sm p-button-text history__pagination-button"
                                [disabled]="!$canGoPrevious()"
                                (click)="onPreviousPage()"
                                data-testid="previous-page-button"
                                [pTooltip]="'edit.content.sidebar.history.pagination.previous' | dm"
                                tooltipPosition="top"></p-button>

                            <p-button
                                icon="pi pi-chevron-right"
                                styleClass="p-button-rounded p-button-sm p-button-text history__pagination-button"
                                [disabled]="!$canGoNext()"
                                (click)="onNextPage()"
                                data-testid="next-page-button"
                                [pTooltip]="'edit.content.sidebar.history.pagination.next' | dm"
                                tooltipPosition="top"></p-button>
                        </div>
                    }
                </div>
            }
        </section>
    </dot-sidebar-accordion-tab>

    <!-- Push Publish Tab -->
    <dot-sidebar-accordion-tab id="push-publish" label="Push Publish">
        <div class="push-publish-content">
            <!-- TODO: Add Push Publish content here -->
            <p>Push Publish functionality will be implemented here.</p>
            <p>Push Publish functionality will be implemented here.</p>
            <ul>
                <li>Push Publish functionality will be implemented here.</li>
                <li>Push Publish functionality will be implemented here.</li>
            </ul>
        </div>
    </dot-sidebar-accordion-tab>
</dot-sidebar-accordion>
