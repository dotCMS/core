@let data = $data();
@let contentlet = data.contentlet;
@let contentType = data.contentType;
@let referencesPageCount = data.referencesPageCount;
@let loading = data.loading;

<div class="flex flex-col gap-2 w-full">
    <div class="w-full flex justify-between items-center">
        @if (contentlet | contentletStatusTag; as status) {
            <p-tag [severity]="status.severity" [value]="status.label" />
        }
        @if (contentlet?.inode) {
            <a
                data-testid="json-link"
                class="text-sm text-[var(--gray-700)]"
                [href]="$jsonUrl()"
                target="_blank"
                rel="noopener">
                json
            </a>
        }
    </div>
    <div class="flex flex-col gap-2 w-full">
        @if (contentType) {
            <a
                data-testid="content-type-link"
                [pTooltip]="'edit.content.sidebar.information.go.to.content.type' | dm"
                tooltipPosition="bottom"
                class="no-underline! py-2 flex flex-col gap-0 bg-white rounded-lg w-full min-h-[60px] transition-colors hover:bg-[var(--color-palette-primary-100)]"
                [routerLink]="'/content-types-angular/edit/' + contentType.variable"
                target="_blank">
                <span class="font-bold text-[var(--gray-900)] leading-relaxed">
                    {{ 'Content-Type' | dm }}
                </span>
                <span class="text-sm text-[var(--gray-800)] leading-relaxed">
                    {{ contentType.name }}
                </span>
            </a>
        }

        <div class="p-0 flex flex-row flex-nowrap w-full bg-white rounded-lg">
            <div
                class="flex flex-col flex-1 relative p-2 min-h-[76px] border-r border-[var(--gray-200)] last:border-r-0">
                <span class="text-sm font-bold text-[var(--gray-900)] leading-relaxed mb-0">
                    {{ 'Created' | dm }}
                </span>
                <span
                    class="text-sm text-[var(--gray-800)] leading-relaxed cursor-default"
                    [pTooltip]="contentlet?.ownerUserName"
                    tooltipPosition="bottom">
                    {{
                        contentlet?.creationDate
                            ? (contentlet?.ownerUserName | dotNameFormat) ||
                              ('edit.content.sidebar.workflow.you' | dm)
                            : '-'
                    }}
                </span>
                @if (contentlet?.creationDate) {
                    <span
                        class="text-xs text-[var(--gray-700)] leading-relaxed cursor-default"
                        data-testid="created-date"
                        [pTooltip]="contentlet?.creationDate | date: 'MM/dd/yyyy HH:mm:ss'"
                        tooltipPosition="bottom">
                        {{ contentlet?.creationDate | dotRelativeDate: 'MM/dd/yyyy' : null }}
                    </span>
                }
            </div>

            <div
                class="flex flex-col flex-1 relative p-2 min-h-[76px] border-r border-[var(--gray-200)] last:border-r-0">
                <span class="text-sm font-bold text-[var(--gray-900)] leading-relaxed mb-0">
                    {{ 'Modified' | dm }}
                </span>
                <span
                    class="text-sm text-[var(--gray-800)] leading-relaxed cursor-default"
                    [tooltipPosition]="'bottom'"
                    [pTooltip]="contentlet?.modUserName">
                    {{ contentlet?.modDate ? (contentlet?.modUserName | dotNameFormat) : '-' }}
                </span>
                @if (contentlet?.modDate) {
                    <span
                        class="text-xs text-[var(--gray-700)] leading-relaxed cursor-default"
                        data-testid="modified-date"
                        [pTooltip]="contentlet?.modDate | date: 'MM/dd/yyyy HH:mm:ss'"
                        tooltipPosition="bottom">
                        {{ contentlet?.modDate | dotRelativeDate: 'MM/dd/yyyy' : null }}
                    </span>
                }
            </div>

            <div
                class="flex flex-col flex-1 relative p-2 min-h-[76px] border-r border-[var(--gray-200)] last:border-r-0">
                <span class="text-sm font-bold text-[var(--gray-900)] leading-relaxed mb-0">
                    {{ 'Published' | dm }}
                </span>
                <span
                    class="text-sm text-[var(--gray-800)] leading-relaxed cursor-default"
                    [tooltipPosition]="'bottom'"
                    [pTooltip]="contentlet?.publishUserName">
                    {{
                        contentlet?.publishDate
                            ? (contentlet?.publishUserName | dotNameFormat)
                            : '-'
                    }}
                </span>
                @if (contentlet?.publishDate) {
                    <span
                        class="text-xs text-[var(--gray-700)] leading-relaxed cursor-default"
                        data-testid="published-date"
                        [pTooltip]="contentlet?.publishDate | date: 'MM/dd/yyyy HH:mm:ss'"
                        tooltipPosition="bottom">
                        {{ contentlet?.publishDate | dotRelativeDate: 'MM/dd/yyyy' : null }}
                    </span>
                }
            </div>
        </div>
    </div>
</div>

<div class="flex w-full min-h-[60px] py-2 flex flex-col gap-0 bg-white rounded-lg">
    <span class="text-sm font-bold text-[var(--gray-900)] leading-relaxed">
        {{ 'References' | dm }}
    </span>
    @if (loading) {
        <p-skeleton height="14px" class="min-h-[14px]" />
    } @else {
        <span class="text-sm text-[var(--gray-800)] leading-relaxed" data-testid="references-count">
            @if (referencesPageCount && referencesPageCount !== '0') {
                {{
                    'edit.content.sidebar.information.references-with.pages.tooltip'
                        | dm: [referencesPageCount]
                }}
            } @else {
                {{ 'edit.content.sidebar.information.references-with.pages.not.used' | dm }}
            }
        </span>
    }
</div>
