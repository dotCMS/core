@let showSidebar = $store.isSidebarOpen();

<div class="flex min-w-0 overflow-auto flex-col h-full">
    <div
        class="flex items-center w-full min-h-[52px] border-b border-gray-300"
        data-testId="edit-content-actions">
        <!-- Left group for lock controls -->

        <!-- Right group for all other actions -->
        <div class="flex items-center gap-4 ml-auto">
            <button
                pButton
                (click)="$store.restoreCurrentHistoricalVersion()"
                data-testId="restore-historical-version-button">
                {{ 'edit.content.sidebar.history.restore' | dm }}
            </button>

            <!-- Sidebar toggle always visible -->
            <div
                class="flex items-center justify-center border-l border-gray-300 transition-all duration-200 ease-in-out overflow-hidden min-h-[52px] min-w-16"
                [ngClass]="{
                    'opacity-0 translate-x-full max-w-0 p-0 m-0 border-l-0 min-w-0': showSidebar
                }"
                data-testId="sidebar-toggle">
                <button
                    class="p-button p-button-sm p-button-text p-button-rounded p-button-icon-only transition-all duration-200 ease-in-out [&_rect]:stroke-[var(--color-palette-primary)] [&_path]:fill-[var(--color-palette-primary)]"
                    (click)="$store.toggleSidebar()"
                    data-testId="sidebar-toggle-button">
                    <svg
                        width="20"
                        height="20"
                        viewBox="0 0 20 20"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg">
                        <rect
                            x="2.70588"
                            y="3.17659"
                            width="14.5882"
                            height="13.6471"
                            rx="1.17647"
                            stroke="#426BF0"
                            stroke-width="1.41176" />
                        <line
                            x1="12.3528"
                            y1="16.1223"
                            x2="12.3528"
                            y2="3.87797"
                            stroke="#426BF0"
                            stroke-width="1.88235" />
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <div class="flex-1 h-full overflow-y-auto p-6">
        <dot-content-compare [showActions]="false" [data]="$store.compareData()" />
    </div>
</div>
