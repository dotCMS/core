<div class="tools">
    <dotcms-add-widget
        [label]="'Add Row'"
        [icon]="rowIcon"
        data-widget-type="row"
        gs-w="12"
        gs-h="1"
        data-testId="add-row"
    ></dotcms-add-widget>
    <dotcms-add-widget
        [label]="'Add Box'"
        [icon]="colIcon"
        data-widget-type="col"
        gs-w="1"
        gs-h="1"
        data-testId="add-box"
    ></dotcms-add-widget>
</div>
<div class="grid-stack">
    <dotcms-template-builder-row
        class="grid-stack-item"
        #rowElement
        *ngFor="let row of items$ | async; trackBy: identify"
        [attr.gs-id]="row.id"
        [attr.gs-x]="row.x"
        [attr.gs-y]="row.y"
        [attr.gs-w]="row.w"
        [attr.gs-h]="row.h"
        data-testId="row"
    >
        <div class="grid-stack-item-content grid-stack">
            <dotcms-template-builder-box
                class="grid-stack-item sub"
                #boxElement
                *ngFor="let box of row.subGridOpts?.children; trackBy: identify"
                [attr.gs-id]="box.id"
                [attr.gs-auto]="true"
                [attr.gs-x]="box.x"
                [attr.gs-y]="box.y"
                [attr.gs-w]="box.w"
                [attr.gs-h]="box.h"
                [items]="box.containers"
                [size]="box.w"
                (deleteColumn)="removeColumn(box, boxElement.nativeElement, row.id)"
                data-testId="box"
            ></dotcms-template-builder-box>
        </div>
    </dotcms-template-builder-row>
</div>
