<div
    class="binary-field__container"
    *ngIf="vm$ | async as vm"
    [ngClass]="{
        'binary-field__container--uploading': vm.status === BINARY_FIEL_STATUS.UPLOADING
    }">
    <div class="binary-field__drop-zone-container" *ngIf="vm.status === BINARY_FIEL_STATUS.INIT">
        <div
            class="binary-field__drop-zone"
            [ngClass]="{ 'binary-field__drop-zone--active': dropZoneActive }">
            <dot-drop-zone
                [accept]="accept"
                [maxFileSize]="maxFileSize"
                (fileDragOver)="setDropZoneActiveState(true)"
                (fileDragLeave)="setDropZoneActiveState(false)"
                (fileDropped)="handleFileDrop($event)">
                <dot-ui-message
                    [message]="vm.UiMessage.message | dm : vm.UiMessage.args"
                    [icon]="vm.UiMessage.icon"
                    [severity]="vm.UiMessage.severity">
                    <button class="binary-field__drop-zone-btn" (click)="openFilePicker()">
                        {{ 'dot.binary.field.action.choose.file' | dm }}
                    </button>
                </dot-ui-message>
            </dot-drop-zone>
            <input
                class="binary-field__input"
                #inputFile
                [accept]="accept"
                (change)="handleFileSelection($event)"
                type="file" />
        </div>

        <div class="binary-field__actions">
            <p-button
                [label]="'dot.binary.field.action.import.from.url' | dm"
                (click)="openDialog(BINARY_FIELD_MODE.URL)"
                styleClass="p-button-link"
                icon="pi pi-link"></p-button>
            <p-button
                [label]="'dot.binary.field.action.create.new.file' | dm"
                (click)="openDialog(BINARY_FIELD_MODE.EDITOR)"
                styleClass="p-button-link"
                icon="pi pi-code">
            </p-button>
        </div>
    </div>

    <dot-spinner *ngIf="vm.status === BINARY_FIEL_STATUS.UPLOADING"></dot-spinner>

    <div *ngIf="vm.status === BINARY_FIEL_STATUS.PREVIEW">
        {{ dotTempFile.fileName }}
    </div>
</div>

<p-dialog
    *ngIf="mode$ | async as mode"
    [(visible)]="dialogOpen"
    [header]="dialogHeaderMap[mode] | dm"
    [modal]="true"
    [draggable]="false"
    [resizable]="false">
    <div [ngSwitch]="mode">
        <div *ngSwitchCase="BINARY_FIELD_MODE.URL">TODO: Implement Import from URL</div>
        <div *ngSwitchCase="BINARY_FIELD_MODE.EDITOR">TODO: Implement Write Code</div>
    </div>
</p-dialog>

<div class="binary-field__helper" *ngIf="helperText">
    <i class="pi pi-info-circle binary-field__helper-icon"></i>
    <span>{{ helperText }}</span>
</div>
