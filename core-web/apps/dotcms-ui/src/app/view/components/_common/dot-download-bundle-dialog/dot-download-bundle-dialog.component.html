<p-dialog
    [(visible)]="showDialog"
    [header]="'download.bundle.header' | dm"
    [modal]="true"
    [style]="{ width: '50rem' }"
    (visibleChange)="close()">
    @if (showDialog) {
        <form
            (ngSubmit)="handleSubmit()"
            (keyup.enter)="handleSubmit()"
            [formGroup]="form"
            class="p-fluid">
            <div class="field">
                <label dotFieldRequired for="download-btn">
                    {{ 'download.bundle.i.want' | dm }}
                </label>
                <p-selectButton
                    [options]="downloadOptions"
                    class="p-button-tabbed"
                    id="download-btn"
                    formControlName="downloadOptionSelected"></p-selectButton>
            </div>
            <div class="field">
                <label for="filterKey">{{ 'download.bundle.filter' | dm }}</label>
                <p-select
                    [options]="filterOptions"
                    id="filterKey"
                    formControlName="filterKey"
                    appendTo="body"></p-select>
            </div>
        </form>
    }
    @if (errorMessage) {
        <span class="download-bundle__error">{{ errorMessage }}</span>
    }
    <ng-template pTemplate="footer">
        @if (dialogActions?.cancel) {
            <p-button
                [label]="dialogActions.cancel.label"
                [disabled]="dialogActions.cancel.disabled"
                severity="secondary"
                (click)="dialogActions.cancel.action()"
                data-testId="dotDialogCancelAction"></p-button>
        }
        @if (dialogActions?.accept) {
            <p-button
                [label]="dialogActions.accept.label"
                [disabled]="dialogActions.accept.disabled"
                (click)="dialogActions.accept.action()"
                data-testId="dotDialogAcceptAction"></p-button>
        }
    </ng-template>
</p-dialog>
