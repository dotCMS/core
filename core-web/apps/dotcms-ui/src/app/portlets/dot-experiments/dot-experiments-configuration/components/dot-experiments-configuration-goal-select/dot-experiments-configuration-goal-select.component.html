<ng-container *ngIf="vm$ | async as vm">
  <p-sidebar (onHide)="closedSidebar.emit(true)" [(visible)]="vm.isOpen" dotSidebar>
    <dot-sidebar-header
      [actionButtonTpl]="actionHeaderBtnTpl"
      dotTitle="{{ 'experiments.configure.goals.sidebar.header' | dm }}"
    ></dot-sidebar-header>

    <div class="experiment-goal-select__form-wrapper flex flex-column">
      <p>{{ 'experiments.configure.goals.sidebar.description' | dm }}</p>
      <form
        [formGroup]="form"
        class="p-fluid"
        data-testId="select-goal-form"
        id="select-goal-form"
        novalidate
      >
        <div class="field">
          <label class="p-label-input-required">{{
            'experiments.configure.goals.sidebar.form.name.label' | dm
            }}</label>

          <p-selectButton
            [options]="goalsList"
            formControlName="goal"
            optionDisabled="inactive"
          >
            <ng-template let-item>
              <div class="flex flex-column w-full option-wrapper">
                <h2>{{ item.label | dm }}</h2>
                <p>{{ item.description | dm }}</p>
              </div>
            </ng-template>
          </p-selectButton>
        </div>
      </form>
    </div>
  </p-sidebar>

  <ng-template #actionHeaderBtnTpl>
    <button
      (click)="save()"
      [disabled]="!form.valid"
      [loading]="vm.status === statusList.SAVING"
      data-testId="add-goal-button"
      label="{{ 'experiments.configure.goals.sidebar.header.button' | dm }}"
      pButton
      pRipple
      type="submit"
    ></button>
  </ng-template>
</ng-container>
