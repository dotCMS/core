<ng-container *ngIf="vm$ | async as vm">
    <dot-dialog
        [actions]="dialogActions"
        [header]="'experiments.report.promote.variant' | dm"
        [isSaving]="vm.isSaving"
        [visible]="vm.showDialog"
        (hide)="closeDialog()"
        width="45rem"
    >
        <p class="mt-0 mb-4" data-testId="variant-legend">
            {{ 'experiments.report.promote.variant.text' | dm }}
        </p>

        <p-table
            [(selection)]="selectedVariant"
            [value]="vm.variants"
            dataKey="id"
            styleClass="p-datatable-sm"
        >
            <ng-template pTemplate="header">
                <tr>
                    <th style="width: 40%">{{ 'experiments.promote.variant' | dm }}</th>
                    <th style="width: 35%">{{ 'experiments.reports.probability.best' | dm }}</th>
                    <th class="text-right">{{ 'experiments.promote.status' | dm }}</th>
                </tr>
            </ng-template>
            <ng-template let-variant pTemplate="body">
                <tr>
                    <td>
                        <div class="control flex gap-3 align-content-center">
                            <p-tableRadioButton
                                class="flex"
                                [disabled]="variant.id == DEFAULT_VARIANT_ID"
                                [value]="variant"
                                (click)="enableButton()"
                                data-testId="variant-radio-button"
                            ></p-tableRadioButton>
                            <span data-testId="variant-name">{{ variant.name }}</span>
                        </div>
                    </td>
                    <td>
                        <span data-testId="variant-percent">{{ variant.probabilityToBeBest }}</span>
                    </td>
                    <td class="text-right">
                        <div class="flex gap-2 justify-content-end">
                            <p-tag
                                class="sm p-tag-success"
                                *ngIf="variant.isWinner"
                                [value]="'winner' | dm | titlecase"
                                data-testId="variant-winner-tag"
                                icon="pi pi-check"
                            />

                            <p-tag
                                class="sm p-tag-info"
                                *ngIf="variant.isPromoted"
                                [value]="'promoted' | dm | titlecase"
                                data-testId="variant-promoted-tag"
                                icon="pi pi-send"
                            />
                        </div>
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </dot-dialog>
</ng-container>
