<ng-container *ngIf="vm$ | async as vm">
    <p-sidebar [(visible)]="vm.isOpenSidebar" (onHide)="closeSidebar()" dotSidebar>
        <dot-sidebar-header
            [actionButtonTpl]="actionHeaderBtnTpl"
            dotTitle="{{ 'experiments.create.form.sidebar.header' | dm }}"
        ></dot-sidebar-header>

        <div class="experiment-create__form-wrapper">
            <form
                class="experiment-create__form p-fluid"
                id="new-experiment-form"
                #myForm="ngForm"
                [formGroup]="form"
                data-testId="new-experiment-form"
                novalidate
            >
                <div class="field">
                    <label class="p-label-input-required" for="name">{{
                        'experiments.create.form.name.label' | dm
                    }}</label>
                    <input
                        id="name"
                        [tabindex]="1"
                        data-testId="add-experiment-name-input"
                        dotAutofocus
                        formControlName="name"
                        name="name"
                        pInputText
                        placeholder="{{ 'experiments.create.form.name.placeholder' | dm }}"
                        required
                        type="text"
                    />
                    <dot-field-validation-message
                        [field]="form.controls.name"
                    ></dot-field-validation-message>
                </div>

                <div class="field">
                    <label class="p-label-input-required" for="description">{{
                        'experiments.create.form.description.label' | dm
                    }}</label>
                    <textarea
                        id="description"
                        [tabindex]="2"
                        data-testId="add-experiment-description-textarea"
                        formControlName="description"
                        name="description"
                        pInputTextarea
                        placeholder="{{ 'experiments.create.form.description.placeholder' | dm }}"
                        required
                        rows="6"
                    ></textarea>

                    <dot-field-validation-message
                        [field]="form.controls.description"
                    ></dot-field-validation-message>
                </div>
            </form>
        </div>
    </p-sidebar>

    <ng-template #actionHeaderBtnTpl>
        <button
            [disabled]="!form.valid"
            [loading]="vm.isLoading"
            (click)="handleSubmit()"
            data-testId="add-experiment-button"
            form="new-experiment-form"
            label="{{ 'experiments.action.add' | dm }}"
            pButton
            pRipple
            type="submit"
        ></button>
    </ng-template>
</ng-container>
