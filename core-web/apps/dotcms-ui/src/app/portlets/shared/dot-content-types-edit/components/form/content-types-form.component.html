<form [formGroup]="form" class="content-type__form p-fluid" id="content-type-form" novalidate>
    <div class="field form__group--validation">
        <label for="content-type-form-name">{{ nameFieldLabel }}</label>
        <input
            pInputText
            type="text"
            id="content-type-form-name"
            name="name"
            formControlName="name"
            [tabindex]="1"
            #name
            dotAutofocus
        />
        <dot-field-validation-message
            [message]="'dot.common.message.field.required' | dm: [nameFieldLabel]"
            [field]="form.get('name')"
        ></dot-field-validation-message>
    </div>
    <div class="field">
        <label for="content-type-form-description">{{ 'contenttypes.form.label.icon' | dm }}</label>
        <dot-md-icon-selector
            id="content-type-form-icon"
            formControlName="icon"
            [tabindex]="2"
        ></dot-md-icon-selector>
    </div>

    <div class="field">
        <label for="content-type-form-description">{{
            'contenttypes.form.label.description' | dm
        }}</label>
        <input
            pInputText
            type="text"
            id="content-type-form-description"
            name="description"
            formControlName="description"
            [tabindex]="3"
        />
    </div>
    <div class="field">
        <label for="content-type-form-host" class="form__label">{{
            'contenttypes.form.field.host_folder.label' | dm
        }}</label>
        <dot-site-selector-field
            id="content-type-form-host"
            formControlName="host"
            [system]="true"
            [tabindex]="4"
        ></dot-site-selector-field>
    </div>
    <div class="field">
        <label for="content-type-form-workflow" class="form__label">{{
            'contenttypes.form.label.workflow' | dm
        }}</label>
        <dot-workflows-selector-field
            [tabindex]="5"
            id="content-type-form-workflow"
            formControlName="workflows"
        ></dot-workflows-selector-field>
    </div>
    <div class="field" formGroupName="systemActionMappings">
        <label for="content-type-form-workflow" class="form__label">{{
            'contenttypes.form.label.workflow.actions' | dm
        }}</label>
        <dot-workflows-actions-selector-field
            [tabindex]="6"
            formControlName="NEW"
            [workflows]="workflowsSelected$ | async"
        ></dot-workflows-actions-selector-field>
    </div>
    <span
        id="field-workflow-hint"
        class="p-field-hint form-workflow-community-message"
        *ngIf="form.get('workflows').disabled"
        >{{ 'contenttypes.form.hint.error.only.default.scheme.available.in.Community' | dm }}</span
    >
    <div class="p-formgrid grid">
        <div class="field col">
            <label for="content-type-form-publish-date-field" class="form__label">{{
                'contenttypes.form.label.publish.date.field' | dm
            }}</label>
            <p-dropdown
                appendTo="body"
                [options]="dateVarOptions"
                id="content-type-form-publish-date-field"
                name="publishDateVar"
                formControlName="publishDateVar"
                (onChange)="handleDateVarChange($event, 'publishDateVar')"
                [style]="{ 'min-width': '90px' }"
                [tabindex]="7"
            ></p-dropdown>
        </div>
        <div class="field col">
            <label for="content-type-form-expire-date-field" class="form__label">{{
                'contenttypes.form.field.expire.date.field' | dm
            }}</label>
            <p-dropdown
                appendTo="body"
                [options]="dateVarOptions"
                id="content-type-form-expire-date-field"
                name="expireDateVar"
                formControlName="expireDateVar"
                (onChange)="handleDateVarChange($event, 'expireDateVar')"
                [style]="{ 'min-width': '90px' }"
                [tabindex]="8"
            ></p-dropdown>
        </div>
    </div>

    <div class="field">
        <small class="p-field-hint" *ngIf="!dateVarOptions.length" id="field-dates-hint">{{
            'contenttypes.form.message.no.date.fields.defined' | dm
        }}</small>
    </div>

    <div class="field" *ngIf="form.get('detailPage')">
        <dot-page-selector
            id="content-type-form-detail-page"
            formControlName="detailPage"
            [tabindex]="9"
            [label]="'contenttypes.form.field.detail.page' | dm"
        ></dot-page-selector>
    </div>
    <div class="field form__group--helper" *ngIf="form.get('urlMapPattern')">
        <dot-field-helper
            [message]="'contenttypes.hint.URL.map.pattern.hint1' | dm"
        ></dot-field-helper>
        <label for="content-type-form-url-map-pattern">{{
            'contenttypes.form.label.URL.pattern' | dm
        }}</label>
        <input
            pInputText
            type="text"
            id="content-type-form-url-map-pattern"
            name="urlMapPattern"
            formControlName="urlMapPattern"
            [tabindex]="10"
        />
    </div>
</form>
