@if (form) {
    <form pFocusTrap [formGroup]="form" class="form" data-testId="form">
        <div class="field" data-testId="titleField">
            <label for="title" dotFieldRequired>
                {{ 'templates.properties.form.label.title' | dm }}
            </label>
            <input
                id="title"
                pInputText
                formControlName="title"
                autofocus
                data-testId="templatePropsTitleField" />
            <dot-field-validation-message
                [field]="form.get('title')"></dot-field-validation-message>
        </div>
        <div class="field" data-testId="descriptionField">
            <label for="description">
                {{ 'templates.properties.form.label.description' | dm }}
            </label>
            <textarea id="description" pInputTextarea formControlName="friendlyName"></textarea>
        </div>
        @if (form.get('theme')) {
            <div class="field" data-testId="themeField">
                <label for="theme">{{ 'templates.properties.form.label.theme' | dm }}</label>
                <dot-theme
                    id="theme"
                    formControlName="theme"
                    data-testId="templatePropsThemeField"></dot-theme>
            </div>
        }
        <div class="field" data-testId="thumbnailField">
            <label for="thumbnail">
                {{ 'templates.properties.form.label.thumbnail' | dm }}
            </label>
            <dot-template-thumbnail-field formControlName="image"></dot-template-thumbnail-field>
        </div>
    </form>
}

<div class="flex justify-end gap-2">
    <p-button
        (click)="onCancel()"
        [label]="'cancel' | dm"
        severity="secondary"
        [outlined]="true"
        data-testid="dotFormDialogCancel"></p-button>
    <p-button
        (click)="onSave()"
        [label]="'save' | dm"
        [disabled]="(isFormValid$ | async) === false"
        data-testid="dotFormDialogSave"></p-button>
</div>
