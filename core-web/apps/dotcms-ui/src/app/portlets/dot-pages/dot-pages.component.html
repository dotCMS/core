<div>
    <div class="flex flex-col gap-4">
        <dot-page-favorites-panel
            (navigateToPage)="navigateToPage($event)"
            [favoritePages]="dotCMSPagesStore.favoritePages()"
            (openMenu)="openMenu($event)" />
        <dot-pages-table
            [pages]="dotCMSPagesStore.pages()"
            [languages]="globalStore.systemConfig().languages"
            [totalRecords]="dotCMSPagesStore.$totalRecords()"
            (navigateToPage)="navigateToPage($event)"
            (openMenu)="openMenu($event)"
            (pageChange)="scrollToTop()"
            (createPage)="dialogVisible.set(true)"
            (search)="onSearch($event)"
            (languageChange)="onLanguageChange($event)"
            (archivedChange)="onArchivedChange($event)"
            (lazyLoad)="onLazyLoad($event)"
            data-testId="pages-listing-panel" />
    </div>

    <!-- <div class="dot-pages__spinner-container">
            <div class="dot-pages__spinner-container dot-pages__spinner-overlay">
                <p-progressSpinner styleClass="p-progress-spinner-custom" />
            </div>
        </div> -->
</div>

<dot-create-page-dialog
    [visibility]="dialogVisible()"
    (visibilityChange)="dialogVisible.set($event)" />

<p-menu (onHide)="closeMenu()" [popup]="true" #menu [model]="menuItems()" />

<!-- @if (vm.pages.addToBundleCTId) {
    <dot-add-to-bundle
        (cancel)="vm.pages.addToBundleCTId = null"
        [assetIdentifier]="vm.pages.addToBundleCTId" />
} -->
