<div>
    <div class="flex flex-col gap-4">
        <dot-page-favorites-panel
            (navigateToPage)="navigateToPage($event)"
            [favoritePages]="dotCMSPagesStore.favoritePages()"
            [isLoading]="dotCMSPagesStore.$isFavoritePagesLoading()"
            (openMenu)="toggleMenu($event)" />
        <dot-pages-table
            [pages]="dotCMSPagesStore.pages()"
            [languages]="globalStore.systemConfig()?.languages ?? []"
            [totalRecords]="dotCMSPagesStore.$totalRecords()"
            [isLoading]="dotCMSPagesStore.$isPagesLoading()"
            (navigateToPage)="navigateToPage($event)"
            (openMenu)="toggleMenu($event)"
            (pageChange)="scrollToTop()"
            (createPage)="dialogVisible.set(true)"
            (search)="onSearch($event)"
            (languageChange)="onLanguageChange($event)"
            (archivedChange)="onArchivedChange($event)"
            (lazyLoad)="onLazyLoad($event)"
            data-testId="pages-listing-panel" />
    </div>
</div>

<dot-create-page-dialog
    [visibility]="dialogVisible()"
    (visibilityChange)="dialogVisible.set($event)" />

<p-menu (onHide)="closeMenu()" [appendTo]="'body'" [popup]="true" #menu [model]="menuItems()" />

@if (dotCMSPagesStore.$showBundleDialog()) {
    <dot-add-to-bundle
        (cancel)="onCloseBundleDialog()"
        [assetIdentifier]="dotCMSPagesStore.$assetIdentifier()" />
}
