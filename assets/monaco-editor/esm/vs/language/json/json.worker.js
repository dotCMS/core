/*! For license information please see json.worker.js.LICENSE.txt */
import*as worker from"../../editor/editor.worker.js";function createScanner(text,ignoreTrivia){void 0===ignoreTrivia&&(ignoreTrivia=!1);var len=text.length,pos=0,value="",tokenOffset=0,token=16,lineNumber=0,lineStartOffset=0,tokenLineStartOffset=0,prevTokenLineStartOffset=0,scanError=0;function scanHexDigits(count,exact){for(var digits=0,value2=0;digits<count||!exact;){var ch=text.charCodeAt(pos);if(ch>=48&&ch<=57)value2=16*value2+ch-48;else if(ch>=65&&ch<=70)value2=16*value2+ch-65+10;else{if(!(ch>=97&&ch<=102))break;value2=16*value2+ch-97+10}pos++,digits++}return digits<count&&(value2=-1),value2}function scanNext(){if(value="",scanError=0,tokenOffset=pos,lineStartOffset=lineNumber,prevTokenLineStartOffset=tokenLineStartOffset,pos>=len)return tokenOffset=len,token=17;var code=text.charCodeAt(pos);if(isWhiteSpace(code)){do{pos++,value+=String.fromCharCode(code),code=text.charCodeAt(pos)}while(isWhiteSpace(code));return token=15}if(isLineBreak(code))return pos++,value+=String.fromCharCode(code),13===code&&10===text.charCodeAt(pos)&&(pos++,value+="\n"),lineNumber++,tokenLineStartOffset=pos,token=14;switch(code){case 123:return pos++,token=1;case 125:return pos++,token=2;case 91:return pos++,token=3;case 93:return pos++,token=4;case 58:return pos++,token=6;case 44:return pos++,token=5;case 34:return pos++,value=function scanString(){for(var result="",start=pos;;){if(pos>=len){result+=text.substring(start,pos),scanError=2;break}var ch=text.charCodeAt(pos);if(34===ch){result+=text.substring(start,pos),pos++;break}if(92!==ch){if(ch>=0&&ch<=31){if(isLineBreak(ch)){result+=text.substring(start,pos),scanError=2;break}scanError=6}pos++}else{if(result+=text.substring(start,pos),++pos>=len){scanError=2;break}switch(text.charCodeAt(pos++)){case 34:result+='"';break;case 92:result+="\\";break;case 47:result+="/";break;case 98:result+="\b";break;case 102:result+="\f";break;case 110:result+="\n";break;case 114:result+="\r";break;case 116:result+="\t";break;case 117:var ch3=scanHexDigits(4,!0);ch3>=0?result+=String.fromCharCode(ch3):scanError=4;break;default:scanError=5}start=pos}}return result}(),token=10;case 47:var start=pos-1;if(47===text.charCodeAt(pos+1)){for(pos+=2;pos<len&&!isLineBreak(text.charCodeAt(pos));)pos++;return value=text.substring(start,pos),token=12}if(42===text.charCodeAt(pos+1)){pos+=2;for(var safeLength=len-1,commentClosed=!1;pos<safeLength;){var ch=text.charCodeAt(pos);if(42===ch&&47===text.charCodeAt(pos+1)){pos+=2,commentClosed=!0;break}pos++,isLineBreak(ch)&&(13===ch&&10===text.charCodeAt(pos)&&pos++,lineNumber++,tokenLineStartOffset=pos)}return commentClosed||(pos++,scanError=1),value=text.substring(start,pos),token=13}return value+=String.fromCharCode(code),pos++,token=16;case 45:if(value+=String.fromCharCode(code),++pos===len||!isDigit(text.charCodeAt(pos)))return token=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return value+=function scanNumber(){var start=pos;if(48===text.charCodeAt(pos))pos++;else for(pos++;pos<text.length&&isDigit(text.charCodeAt(pos));)pos++;if(pos<text.length&&46===text.charCodeAt(pos)){if(!(++pos<text.length&&isDigit(text.charCodeAt(pos))))return scanError=3,text.substring(start,pos);for(pos++;pos<text.length&&isDigit(text.charCodeAt(pos));)pos++}var end=pos;if(pos<text.length&&(69===text.charCodeAt(pos)||101===text.charCodeAt(pos)))if((++pos<text.length&&43===text.charCodeAt(pos)||45===text.charCodeAt(pos))&&pos++,pos<text.length&&isDigit(text.charCodeAt(pos))){for(pos++;pos<text.length&&isDigit(text.charCodeAt(pos));)pos++;end=pos}else scanError=3;return text.substring(start,end)}(),token=11;default:for(;pos<len&&isUnknownContentCharacter(code);)pos++,code=text.charCodeAt(pos);if(tokenOffset!==pos){switch(value=text.substring(tokenOffset,pos)){case"true":return token=8;case"false":return token=9;case"null":return token=7}return token=16}return value+=String.fromCharCode(code),pos++,token=16}}function isUnknownContentCharacter(code){if(isWhiteSpace(code)||isLineBreak(code))return!1;switch(code){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}return{setPosition:function setPosition(newPosition){pos=newPosition,value="",tokenOffset=0,token=16,scanError=0},getPosition:function(){return pos},scan:ignoreTrivia?function scanNextNonTrivia(){var result;do{result=scanNext()}while(result>=12&&result<=15);return result}:scanNext,getToken:function(){return token},getTokenValue:function(){return value},getTokenOffset:function(){return tokenOffset},getTokenLength:function(){return pos-tokenOffset},getTokenStartLine:function(){return lineStartOffset},getTokenStartCharacter:function(){return tokenOffset-prevTokenLineStartOffset},getTokenError:function(){return scanError}}}function isWhiteSpace(ch){return 32===ch||9===ch||11===ch||12===ch||160===ch||5760===ch||ch>=8192&&ch<=8203||8239===ch||8287===ch||12288===ch||65279===ch}function isLineBreak(ch){return 10===ch||13===ch||8232===ch||8233===ch}function isDigit(ch){return ch>=48&&ch<=57}function format(documentText,range,options){var initialIndentLevel,formatText,formatTextStart,rangeStart,rangeEnd;if(range){for(rangeStart=range.offset,rangeEnd=rangeStart+range.length,formatTextStart=rangeStart;formatTextStart>0&&!isEOL(documentText,formatTextStart-1);)formatTextStart--;for(var endOffset=rangeEnd;endOffset<documentText.length&&!isEOL(documentText,endOffset);)endOffset++;formatText=documentText.substring(formatTextStart,endOffset),initialIndentLevel=computeIndentLevel(formatText,options)}else formatText=documentText,initialIndentLevel=0,formatTextStart=0,rangeStart=0,rangeEnd=documentText.length;var indentValue,eol=getEOL(options,documentText),lineBreak=!1,indentLevel=0;indentValue=options.insertSpaces?repeat(" ",options.tabSize||4):"\t";var scanner=createScanner(formatText,!1),hasError=!1;function newLineAndIndent(){return eol+repeat(indentValue,initialIndentLevel+indentLevel)}function scanNext(){var token=scanner.scan();for(lineBreak=!1;15===token||14===token;)lineBreak=lineBreak||14===token,token=scanner.scan();return hasError=16===token||0!==scanner.getTokenError(),token}var editOperations=[];function addEdit(text,startOffset,endOffset2){hasError||range&&!(startOffset<rangeEnd&&endOffset2>rangeStart)||documentText.substring(startOffset,endOffset2)===text||editOperations.push({offset:startOffset,length:endOffset2-startOffset,content:text})}var firstToken=scanNext();if(17!==firstToken){var firstTokenStart=scanner.getTokenOffset()+formatTextStart;addEdit(repeat(indentValue,initialIndentLevel),formatTextStart,firstTokenStart)}for(;17!==firstToken;){for(var firstTokenEnd=scanner.getTokenOffset()+scanner.getTokenLength()+formatTextStart,secondToken=scanNext(),replaceContent="",needsLineBreak=!1;!lineBreak&&(12===secondToken||13===secondToken);){addEdit(" ",firstTokenEnd,scanner.getTokenOffset()+formatTextStart),firstTokenEnd=scanner.getTokenOffset()+scanner.getTokenLength()+formatTextStart,replaceContent=(needsLineBreak=12===secondToken)?newLineAndIndent():"",secondToken=scanNext()}if(2===secondToken)1!==firstToken&&(indentLevel--,replaceContent=newLineAndIndent());else if(4===secondToken)3!==firstToken&&(indentLevel--,replaceContent=newLineAndIndent());else{switch(firstToken){case 3:case 1:indentLevel++,replaceContent=newLineAndIndent();break;case 5:case 12:replaceContent=newLineAndIndent();break;case 13:lineBreak?replaceContent=newLineAndIndent():needsLineBreak||(replaceContent=" ");break;case 6:needsLineBreak||(replaceContent=" ");break;case 10:if(6===secondToken){needsLineBreak||(replaceContent="");break}case 7:case 8:case 9:case 11:case 2:case 4:12===secondToken||13===secondToken?needsLineBreak||(replaceContent=" "):5!==secondToken&&17!==secondToken&&(hasError=!0);break;case 16:hasError=!0}!lineBreak||12!==secondToken&&13!==secondToken||(replaceContent=newLineAndIndent())}17===secondToken&&(replaceContent=options.insertFinalNewline?eol:""),addEdit(replaceContent,firstTokenEnd,scanner.getTokenOffset()+formatTextStart),firstToken=secondToken}return editOperations}function repeat(s,count){for(var result="",i=0;i<count;i++)result+=s;return result}function computeIndentLevel(content,options){for(var i=0,nChars=0,tabSize=options.tabSize||4;i<content.length;){var ch=content.charAt(i);if(" "===ch)nChars++;else{if("\t"!==ch)break;nChars+=tabSize}i++}return Math.floor(nChars/tabSize)}function getEOL(options,text){for(var i=0;i<text.length;i++){var ch=text.charAt(i);if("\r"===ch)return i+1<text.length&&"\n"===text.charAt(i+1)?"\r\n":"\r";if("\n"===ch)return"\n"}return options&&options.eol||"\n"}function isEOL(text,offset){return-1!=="\r\n".indexOf(text.charAt(offset))}var ParseOptions;function parse(text,errors,options){void 0===errors&&(errors=[]),void 0===options&&(options=ParseOptions.DEFAULT);var currentProperty=null,currentParent=[],previousParents=[];function onValue(value){Array.isArray(currentParent)?currentParent.push(value):null!==currentProperty&&(currentParent[currentProperty]=value)}return visit(text,{onObjectBegin:function(){var object={};onValue(object),previousParents.push(currentParent),currentParent=object,currentProperty=null},onObjectProperty:function(name){currentProperty=name},onObjectEnd:function(){currentParent=previousParents.pop()},onArrayBegin:function(){var array=[];onValue(array),previousParents.push(currentParent),currentParent=array,currentProperty=null},onArrayEnd:function(){currentParent=previousParents.pop()},onLiteralValue:onValue,onError:function(error,offset,length){errors.push({error,offset,length})}},options),currentParent[0]}function getNodePath(node){if(!node.parent||!node.parent.children)return[];var path=getNodePath(node.parent);if("property"===node.parent.type){var key=node.parent.children[0].value;path.push(key)}else if("array"===node.parent.type){var index=node.parent.children.indexOf(node);-1!==index&&path.push(index)}return path}function getNodeValue(node){switch(node.type){case"array":return node.children.map(getNodeValue);case"object":for(var obj=Object.create(null),_i=0,_a=node.children;_i<_a.length;_i++){var prop=_a[_i],valueNode=prop.children[1];valueNode&&(obj[prop.children[0].value]=getNodeValue(valueNode))}return obj;case"null":case"string":case"number":case"boolean":return node.value;default:return}}function contains(node,offset,includeRightBound){return void 0===includeRightBound&&(includeRightBound=!1),offset>=node.offset&&offset<node.offset+node.length||includeRightBound&&offset===node.offset+node.length}function findNodeAtOffset(node,offset,includeRightBound){if(void 0===includeRightBound&&(includeRightBound=!1),contains(node,offset,includeRightBound)){var children=node.children;if(Array.isArray(children))for(var i=0;i<children.length&&children[i].offset<=offset;i++){var item=findNodeAtOffset(children[i],offset,includeRightBound);if(item)return item}return node}}function visit(text,visitor,options){void 0===options&&(options=ParseOptions.DEFAULT);var _scanner=createScanner(text,!1);function toNoArgVisit(visitFunction){return visitFunction?function(){return visitFunction(_scanner.getTokenOffset(),_scanner.getTokenLength(),_scanner.getTokenStartLine(),_scanner.getTokenStartCharacter())}:function(){return!0}}function toOneArgVisit(visitFunction){return visitFunction?function(arg){return visitFunction(arg,_scanner.getTokenOffset(),_scanner.getTokenLength(),_scanner.getTokenStartLine(),_scanner.getTokenStartCharacter())}:function(){return!0}}var onObjectBegin=toNoArgVisit(visitor.onObjectBegin),onObjectProperty=toOneArgVisit(visitor.onObjectProperty),onObjectEnd=toNoArgVisit(visitor.onObjectEnd),onArrayBegin=toNoArgVisit(visitor.onArrayBegin),onArrayEnd=toNoArgVisit(visitor.onArrayEnd),onLiteralValue=toOneArgVisit(visitor.onLiteralValue),onSeparator=toOneArgVisit(visitor.onSeparator),onComment=toNoArgVisit(visitor.onComment),onError=toOneArgVisit(visitor.onError),disallowComments=options&&options.disallowComments,allowTrailingComma=options&&options.allowTrailingComma;function scanNext(){for(;;){var token=_scanner.scan();switch(_scanner.getTokenError()){case 4:handleError(14);break;case 5:handleError(15);break;case 3:handleError(13);break;case 1:disallowComments||handleError(11);break;case 2:handleError(12);break;case 6:handleError(16)}switch(token){case 12:case 13:disallowComments?handleError(10):onComment();break;case 16:handleError(1);break;case 15:case 14:break;default:return token}}}function handleError(error,skipUntilAfter,skipUntil){if(void 0===skipUntilAfter&&(skipUntilAfter=[]),void 0===skipUntil&&(skipUntil=[]),onError(error),skipUntilAfter.length+skipUntil.length>0)for(var token=_scanner.getToken();17!==token;){if(-1!==skipUntilAfter.indexOf(token)){scanNext();break}if(-1!==skipUntil.indexOf(token))break;token=scanNext()}}function parseString(isValue){var value=_scanner.getTokenValue();return isValue?onLiteralValue(value):onObjectProperty(value),scanNext(),!0}function parseValue(){switch(_scanner.getToken()){case 3:return function parseArray(){onArrayBegin(),scanNext();for(var needsComma=!1;4!==_scanner.getToken()&&17!==_scanner.getToken();){if(5===_scanner.getToken()){if(needsComma||handleError(4,[],[]),onSeparator(","),scanNext(),4===_scanner.getToken()&&allowTrailingComma)break}else needsComma&&handleError(6,[],[]);parseValue()||handleError(4,[],[4,5]),needsComma=!0}return onArrayEnd(),4!==_scanner.getToken()?handleError(8,[4],[]):scanNext(),!0}();case 1:return function parseObject(){onObjectBegin(),scanNext();for(var needsComma=!1;2!==_scanner.getToken()&&17!==_scanner.getToken();){if(5===_scanner.getToken()){if(needsComma||handleError(4,[],[]),onSeparator(","),scanNext(),2===_scanner.getToken()&&allowTrailingComma)break}else needsComma&&handleError(6,[],[]);(10!==_scanner.getToken()?(handleError(3,[],[2,5]),0):(parseString(!1),6===_scanner.getToken()?(onSeparator(":"),scanNext(),parseValue()||handleError(4,[],[2,5])):handleError(5,[],[2,5]),1))||handleError(4,[],[2,5]),needsComma=!0}return onObjectEnd(),2!==_scanner.getToken()?handleError(7,[2],[]):scanNext(),!0}();case 10:return parseString(!0);default:return function parseLiteral(){switch(_scanner.getToken()){case 11:var tokenValue=_scanner.getTokenValue(),value=Number(tokenValue);isNaN(value)&&(handleError(2),value=0),onLiteralValue(value);break;case 7:onLiteralValue(null);break;case 8:onLiteralValue(!0);break;case 9:onLiteralValue(!1);break;default:return!1}return scanNext(),!0}()}}return scanNext(),17===_scanner.getToken()?!!options.allowEmptyContent||(handleError(4,[],[]),!1):parseValue()?(17!==_scanner.getToken()&&handleError(9,[],[]),!0):(handleError(4,[],[]),!1)}(ParseOptions||(ParseOptions={})).DEFAULT={allowTrailingComma:!1};var integer,uinteger,Position,Range,Location,LocationLink,Color,ColorInformation,ColorPresentation,FoldingRangeKind,FoldingRange,DiagnosticRelatedInformation,DiagnosticSeverity,DiagnosticTag,CodeDescription,Diagnostic,Command,TextEdit,ChangeAnnotation,ChangeAnnotationIdentifier,AnnotatedTextEdit,TextDocumentEdit,CreateFile,RenameFile,DeleteFile,WorkspaceEdit,createScanner2=createScanner,parse2=parse,findNodeAtOffset2=findNodeAtOffset,getNodePath2=getNodePath,getNodeValue2=getNodeValue;function format2(documentText,range,options){return format(documentText,range,options)}function equals(one,other){if(one===other)return!0;if(null==one||null==other)return!1;if(typeof one!=typeof other)return!1;if("object"!=typeof one)return!1;if(Array.isArray(one)!==Array.isArray(other))return!1;var i,key;if(Array.isArray(one)){if(one.length!==other.length)return!1;for(i=0;i<one.length;i++)if(!equals(one[i],other[i]))return!1}else{var oneKeys=[];for(key in one)oneKeys.push(key);oneKeys.sort();var otherKeys=[];for(key in other)otherKeys.push(key);if(otherKeys.sort(),!equals(oneKeys,otherKeys))return!1;for(i=0;i<oneKeys.length;i++)if(!equals(one[oneKeys[i]],other[oneKeys[i]]))return!1}return!0}function isNumber(val){return"number"==typeof val}function isDefined(val){return void 0!==val}function isBoolean(val){return"boolean"==typeof val}function isString(val){return"string"==typeof val}function startsWith(haystack,needle){if(haystack.length<needle.length)return!1;for(var i=0;i<needle.length;i++)if(haystack[i]!==needle[i])return!1;return!0}function endsWith(haystack,needle){var diff=haystack.length-needle.length;return diff>0?haystack.lastIndexOf(needle)===diff:0===diff&&haystack===needle}function extendedRegExp(pattern){var flags="";startsWith(pattern,"(?i)")&&(pattern=pattern.substring(4),flags="i");try{return new RegExp(pattern,flags+"u")}catch(e){try{return new RegExp(pattern,flags)}catch(e2){return}}}!function(integer2){integer2.MIN_VALUE=-2147483648,integer2.MAX_VALUE=2147483647}(integer||(integer={})),function(uinteger2){uinteger2.MIN_VALUE=0,uinteger2.MAX_VALUE=2147483647}(uinteger||(uinteger={})),function(Position2){Position2.create=function create(line,character){return line===Number.MAX_VALUE&&(line=uinteger.MAX_VALUE),character===Number.MAX_VALUE&&(character=uinteger.MAX_VALUE),{line,character}},Position2.is=function is(value){var candidate=value;return Is.objectLiteral(candidate)&&Is.uinteger(candidate.line)&&Is.uinteger(candidate.character)}}(Position||(Position={})),function(Range2){Range2.create=function create(one,two,three,four){if(Is.uinteger(one)&&Is.uinteger(two)&&Is.uinteger(three)&&Is.uinteger(four))return{start:Position.create(one,two),end:Position.create(three,four)};if(Position.is(one)&&Position.is(two))return{start:one,end:two};throw new Error("Range#create called with invalid arguments["+one+", "+two+", "+three+", "+four+"]")},Range2.is=function is(value){var candidate=value;return Is.objectLiteral(candidate)&&Position.is(candidate.start)&&Position.is(candidate.end)}}(Range||(Range={})),function(Location2){Location2.create=function create(uri,range){return{uri,range}},Location2.is=function is(value){var candidate=value;return Is.defined(candidate)&&Range.is(candidate.range)&&(Is.string(candidate.uri)||Is.undefined(candidate.uri))}}(Location||(Location={})),function(LocationLink2){LocationLink2.create=function create(targetUri,targetRange,targetSelectionRange,originSelectionRange){return{targetUri,targetRange,targetSelectionRange,originSelectionRange}},LocationLink2.is=function is(value){var candidate=value;return Is.defined(candidate)&&Range.is(candidate.targetRange)&&Is.string(candidate.targetUri)&&(Range.is(candidate.targetSelectionRange)||Is.undefined(candidate.targetSelectionRange))&&(Range.is(candidate.originSelectionRange)||Is.undefined(candidate.originSelectionRange))}}(LocationLink||(LocationLink={})),function(Color2){Color2.create=function create(red,green,blue,alpha){return{red,green,blue,alpha}},Color2.is=function is(value){var candidate=value;return Is.numberRange(candidate.red,0,1)&&Is.numberRange(candidate.green,0,1)&&Is.numberRange(candidate.blue,0,1)&&Is.numberRange(candidate.alpha,0,1)}}(Color||(Color={})),function(ColorInformation2){ColorInformation2.create=function create(range,color){return{range,color}},ColorInformation2.is=function is(value){var candidate=value;return Range.is(candidate.range)&&Color.is(candidate.color)}}(ColorInformation||(ColorInformation={})),function(ColorPresentation2){ColorPresentation2.create=function create(label,textEdit,additionalTextEdits){return{label,textEdit,additionalTextEdits}},ColorPresentation2.is=function is(value){var candidate=value;return Is.string(candidate.label)&&(Is.undefined(candidate.textEdit)||TextEdit.is(candidate))&&(Is.undefined(candidate.additionalTextEdits)||Is.typedArray(candidate.additionalTextEdits,TextEdit.is))}}(ColorPresentation||(ColorPresentation={})),function(FoldingRangeKind2){FoldingRangeKind2.Comment="comment",FoldingRangeKind2.Imports="imports",FoldingRangeKind2.Region="region"}(FoldingRangeKind||(FoldingRangeKind={})),function(FoldingRange2){FoldingRange2.create=function create(startLine,endLine,startCharacter,endCharacter,kind){var result={startLine,endLine};return Is.defined(startCharacter)&&(result.startCharacter=startCharacter),Is.defined(endCharacter)&&(result.endCharacter=endCharacter),Is.defined(kind)&&(result.kind=kind),result},FoldingRange2.is=function is(value){var candidate=value;return Is.uinteger(candidate.startLine)&&Is.uinteger(candidate.startLine)&&(Is.undefined(candidate.startCharacter)||Is.uinteger(candidate.startCharacter))&&(Is.undefined(candidate.endCharacter)||Is.uinteger(candidate.endCharacter))&&(Is.undefined(candidate.kind)||Is.string(candidate.kind))}}(FoldingRange||(FoldingRange={})),function(DiagnosticRelatedInformation2){DiagnosticRelatedInformation2.create=function create(location,message){return{location,message}},DiagnosticRelatedInformation2.is=function is(value){var candidate=value;return Is.defined(candidate)&&Location.is(candidate.location)&&Is.string(candidate.message)}}(DiagnosticRelatedInformation||(DiagnosticRelatedInformation={})),function(DiagnosticSeverity2){DiagnosticSeverity2.Error=1,DiagnosticSeverity2.Warning=2,DiagnosticSeverity2.Information=3,DiagnosticSeverity2.Hint=4}(DiagnosticSeverity||(DiagnosticSeverity={})),function(DiagnosticTag2){DiagnosticTag2.Unnecessary=1,DiagnosticTag2.Deprecated=2}(DiagnosticTag||(DiagnosticTag={})),(CodeDescription||(CodeDescription={})).is=function is(value){var candidate=value;return null!=candidate&&Is.string(candidate.href)},function(Diagnostic2){Diagnostic2.create=function create(range,message,severity,code,source,relatedInformation){var result={range,message};return Is.defined(severity)&&(result.severity=severity),Is.defined(code)&&(result.code=code),Is.defined(source)&&(result.source=source),Is.defined(relatedInformation)&&(result.relatedInformation=relatedInformation),result},Diagnostic2.is=function is(value){var _a,candidate=value;return Is.defined(candidate)&&Range.is(candidate.range)&&Is.string(candidate.message)&&(Is.number(candidate.severity)||Is.undefined(candidate.severity))&&(Is.integer(candidate.code)||Is.string(candidate.code)||Is.undefined(candidate.code))&&(Is.undefined(candidate.codeDescription)||Is.string(null===(_a=candidate.codeDescription)||void 0===_a?void 0:_a.href))&&(Is.string(candidate.source)||Is.undefined(candidate.source))&&(Is.undefined(candidate.relatedInformation)||Is.typedArray(candidate.relatedInformation,DiagnosticRelatedInformation.is))}}(Diagnostic||(Diagnostic={})),function(Command2){Command2.create=function create(title,command){for(var args=[],_i=2;_i<arguments.length;_i++)args[_i-2]=arguments[_i];var result={title,command};return Is.defined(args)&&args.length>0&&(result.arguments=args),result},Command2.is=function is(value){var candidate=value;return Is.defined(candidate)&&Is.string(candidate.title)&&Is.string(candidate.command)}}(Command||(Command={})),function(TextEdit2){TextEdit2.replace=function replace(range,newText){return{range,newText}},TextEdit2.insert=function insert(position,newText){return{range:{start:position,end:position},newText}},TextEdit2.del=function del(range){return{range,newText:""}},TextEdit2.is=function is(value){var candidate=value;return Is.objectLiteral(candidate)&&Is.string(candidate.newText)&&Range.is(candidate.range)}}(TextEdit||(TextEdit={})),function(ChangeAnnotation2){ChangeAnnotation2.create=function create(label,needsConfirmation,description){var result={label};return void 0!==needsConfirmation&&(result.needsConfirmation=needsConfirmation),void 0!==description&&(result.description=description),result},ChangeAnnotation2.is=function is(value){var candidate=value;return void 0!==candidate&&Is.objectLiteral(candidate)&&Is.string(candidate.label)&&(Is.boolean(candidate.needsConfirmation)||void 0===candidate.needsConfirmation)&&(Is.string(candidate.description)||void 0===candidate.description)}}(ChangeAnnotation||(ChangeAnnotation={})),(ChangeAnnotationIdentifier||(ChangeAnnotationIdentifier={})).is=function is(value){return"string"==typeof value},function(AnnotatedTextEdit2){AnnotatedTextEdit2.replace=function replace(range,newText,annotation){return{range,newText,annotationId:annotation}},AnnotatedTextEdit2.insert=function insert(position,newText,annotation){return{range:{start:position,end:position},newText,annotationId:annotation}},AnnotatedTextEdit2.del=function del(range,annotation){return{range,newText:"",annotationId:annotation}},AnnotatedTextEdit2.is=function is(value){var candidate=value;return TextEdit.is(candidate)&&(ChangeAnnotation.is(candidate.annotationId)||ChangeAnnotationIdentifier.is(candidate.annotationId))}}(AnnotatedTextEdit||(AnnotatedTextEdit={})),function(TextDocumentEdit2){TextDocumentEdit2.create=function create(textDocument,edits){return{textDocument,edits}},TextDocumentEdit2.is=function is(value){var candidate=value;return Is.defined(candidate)&&OptionalVersionedTextDocumentIdentifier.is(candidate.textDocument)&&Array.isArray(candidate.edits)}}(TextDocumentEdit||(TextDocumentEdit={})),function(CreateFile2){CreateFile2.create=function create(uri,options,annotation){var result={kind:"create",uri};return void 0===options||void 0===options.overwrite&&void 0===options.ignoreIfExists||(result.options=options),void 0!==annotation&&(result.annotationId=annotation),result},CreateFile2.is=function is(value){var candidate=value;return candidate&&"create"===candidate.kind&&Is.string(candidate.uri)&&(void 0===candidate.options||(void 0===candidate.options.overwrite||Is.boolean(candidate.options.overwrite))&&(void 0===candidate.options.ignoreIfExists||Is.boolean(candidate.options.ignoreIfExists)))&&(void 0===candidate.annotationId||ChangeAnnotationIdentifier.is(candidate.annotationId))}}(CreateFile||(CreateFile={})),function(RenameFile2){RenameFile2.create=function create(oldUri,newUri,options,annotation){var result={kind:"rename",oldUri,newUri};return void 0===options||void 0===options.overwrite&&void 0===options.ignoreIfExists||(result.options=options),void 0!==annotation&&(result.annotationId=annotation),result},RenameFile2.is=function is(value){var candidate=value;return candidate&&"rename"===candidate.kind&&Is.string(candidate.oldUri)&&Is.string(candidate.newUri)&&(void 0===candidate.options||(void 0===candidate.options.overwrite||Is.boolean(candidate.options.overwrite))&&(void 0===candidate.options.ignoreIfExists||Is.boolean(candidate.options.ignoreIfExists)))&&(void 0===candidate.annotationId||ChangeAnnotationIdentifier.is(candidate.annotationId))}}(RenameFile||(RenameFile={})),function(DeleteFile2){DeleteFile2.create=function create(uri,options,annotation){var result={kind:"delete",uri};return void 0===options||void 0===options.recursive&&void 0===options.ignoreIfNotExists||(result.options=options),void 0!==annotation&&(result.annotationId=annotation),result},DeleteFile2.is=function is(value){var candidate=value;return candidate&&"delete"===candidate.kind&&Is.string(candidate.uri)&&(void 0===candidate.options||(void 0===candidate.options.recursive||Is.boolean(candidate.options.recursive))&&(void 0===candidate.options.ignoreIfNotExists||Is.boolean(candidate.options.ignoreIfNotExists)))&&(void 0===candidate.annotationId||ChangeAnnotationIdentifier.is(candidate.annotationId))}}(DeleteFile||(DeleteFile={})),(WorkspaceEdit||(WorkspaceEdit={})).is=function is(value){var candidate=value;return candidate&&(void 0!==candidate.changes||void 0!==candidate.documentChanges)&&(void 0===candidate.documentChanges||candidate.documentChanges.every((function(change){return Is.string(change.kind)?CreateFile.is(change)||RenameFile.is(change)||DeleteFile.is(change):TextDocumentEdit.is(change)})))};var TextDocumentIdentifier,VersionedTextDocumentIdentifier,OptionalVersionedTextDocumentIdentifier,TextDocumentItem,MarkupKind,MarkupContent,CompletionItemKind,InsertTextFormat,CompletionItemTag,InsertReplaceEdit,InsertTextMode,CompletionItem,CompletionList,MarkedString,Hover,ParameterInformation,SignatureInformation,DocumentHighlightKind,DocumentHighlight,SymbolKind,SymbolTag,SymbolInformation,DocumentSymbol,CodeActionKind,CodeActionContext,CodeAction,CodeLens,FormattingOptions,DocumentLink,SelectionRange,TextDocument,TextEditChangeImpl=function(){function TextEditChangeImpl2(edits,changeAnnotations){this.edits=edits,this.changeAnnotations=changeAnnotations}return TextEditChangeImpl2.prototype.insert=function(position,newText,annotation){var edit,id;if(void 0===annotation?edit=TextEdit.insert(position,newText):ChangeAnnotationIdentifier.is(annotation)?(id=annotation,edit=AnnotatedTextEdit.insert(position,newText,annotation)):(this.assertChangeAnnotations(this.changeAnnotations),id=this.changeAnnotations.manage(annotation),edit=AnnotatedTextEdit.insert(position,newText,id)),this.edits.push(edit),void 0!==id)return id},TextEditChangeImpl2.prototype.replace=function(range,newText,annotation){var edit,id;if(void 0===annotation?edit=TextEdit.replace(range,newText):ChangeAnnotationIdentifier.is(annotation)?(id=annotation,edit=AnnotatedTextEdit.replace(range,newText,annotation)):(this.assertChangeAnnotations(this.changeAnnotations),id=this.changeAnnotations.manage(annotation),edit=AnnotatedTextEdit.replace(range,newText,id)),this.edits.push(edit),void 0!==id)return id},TextEditChangeImpl2.prototype.delete=function(range,annotation){var edit,id;if(void 0===annotation?edit=TextEdit.del(range):ChangeAnnotationIdentifier.is(annotation)?(id=annotation,edit=AnnotatedTextEdit.del(range,annotation)):(this.assertChangeAnnotations(this.changeAnnotations),id=this.changeAnnotations.manage(annotation),edit=AnnotatedTextEdit.del(range,id)),this.edits.push(edit),void 0!==id)return id},TextEditChangeImpl2.prototype.add=function(edit){this.edits.push(edit)},TextEditChangeImpl2.prototype.all=function(){return this.edits},TextEditChangeImpl2.prototype.clear=function(){this.edits.splice(0,this.edits.length)},TextEditChangeImpl2.prototype.assertChangeAnnotations=function(value){if(void 0===value)throw new Error("Text edit change is not configured to manage change annotations.")},TextEditChangeImpl2}(),ChangeAnnotations=function(){function ChangeAnnotations2(annotations){this._annotations=void 0===annotations?Object.create(null):annotations,this._counter=0,this._size=0}return ChangeAnnotations2.prototype.all=function(){return this._annotations},Object.defineProperty(ChangeAnnotations2.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),ChangeAnnotations2.prototype.manage=function(idOrAnnotation,annotation){var id;if(ChangeAnnotationIdentifier.is(idOrAnnotation)?id=idOrAnnotation:(id=this.nextId(),annotation=idOrAnnotation),void 0!==this._annotations[id])throw new Error("Id "+id+" is already in use.");if(void 0===annotation)throw new Error("No annotation provided for id "+id);return this._annotations[id]=annotation,this._size++,id},ChangeAnnotations2.prototype.nextId=function(){return this._counter++,this._counter.toString()},ChangeAnnotations2}(),WorkspaceChange=function(){function WorkspaceChange2(workspaceEdit){var _this=this;this._textEditChanges=Object.create(null),void 0!==workspaceEdit?(this._workspaceEdit=workspaceEdit,workspaceEdit.documentChanges?(this._changeAnnotations=new ChangeAnnotations(workspaceEdit.changeAnnotations),workspaceEdit.changeAnnotations=this._changeAnnotations.all(),workspaceEdit.documentChanges.forEach((function(change){if(TextDocumentEdit.is(change)){var textEditChange=new TextEditChangeImpl(change.edits,_this._changeAnnotations);_this._textEditChanges[change.textDocument.uri]=textEditChange}}))):workspaceEdit.changes&&Object.keys(workspaceEdit.changes).forEach((function(key){var textEditChange=new TextEditChangeImpl(workspaceEdit.changes[key]);_this._textEditChanges[key]=textEditChange}))):this._workspaceEdit={}}return Object.defineProperty(WorkspaceChange2.prototype,"edit",{get:function(){return this.initDocumentChanges(),void 0!==this._changeAnnotations&&(0===this._changeAnnotations.size?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),WorkspaceChange2.prototype.getTextEditChange=function(key){if(OptionalVersionedTextDocumentIdentifier.is(key)){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var textDocument={uri:key.uri,version:key.version};if(!(result=this._textEditChanges[textDocument.uri])){var textDocumentEdit={textDocument,edits:edits=[]};this._workspaceEdit.documentChanges.push(textDocumentEdit),result=new TextEditChangeImpl(edits,this._changeAnnotations),this._textEditChanges[textDocument.uri]=result}return result}if(this.initChanges(),void 0===this._workspaceEdit.changes)throw new Error("Workspace edit is not configured for normal text edit changes.");var result;if(!(result=this._textEditChanges[key])){var edits=[];this._workspaceEdit.changes[key]=edits,result=new TextEditChangeImpl(edits),this._textEditChanges[key]=result}return result},WorkspaceChange2.prototype.initDocumentChanges=function(){void 0===this._workspaceEdit.documentChanges&&void 0===this._workspaceEdit.changes&&(this._changeAnnotations=new ChangeAnnotations,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},WorkspaceChange2.prototype.initChanges=function(){void 0===this._workspaceEdit.documentChanges&&void 0===this._workspaceEdit.changes&&(this._workspaceEdit.changes=Object.create(null))},WorkspaceChange2.prototype.createFile=function(uri,optionsOrAnnotation,options){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var annotation,operation,id;if(ChangeAnnotation.is(optionsOrAnnotation)||ChangeAnnotationIdentifier.is(optionsOrAnnotation)?annotation=optionsOrAnnotation:options=optionsOrAnnotation,void 0===annotation?operation=CreateFile.create(uri,options):(id=ChangeAnnotationIdentifier.is(annotation)?annotation:this._changeAnnotations.manage(annotation),operation=CreateFile.create(uri,options,id)),this._workspaceEdit.documentChanges.push(operation),void 0!==id)return id},WorkspaceChange2.prototype.renameFile=function(oldUri,newUri,optionsOrAnnotation,options){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var annotation,operation,id;if(ChangeAnnotation.is(optionsOrAnnotation)||ChangeAnnotationIdentifier.is(optionsOrAnnotation)?annotation=optionsOrAnnotation:options=optionsOrAnnotation,void 0===annotation?operation=RenameFile.create(oldUri,newUri,options):(id=ChangeAnnotationIdentifier.is(annotation)?annotation:this._changeAnnotations.manage(annotation),operation=RenameFile.create(oldUri,newUri,options,id)),this._workspaceEdit.documentChanges.push(operation),void 0!==id)return id},WorkspaceChange2.prototype.deleteFile=function(uri,optionsOrAnnotation,options){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var annotation,operation,id;if(ChangeAnnotation.is(optionsOrAnnotation)||ChangeAnnotationIdentifier.is(optionsOrAnnotation)?annotation=optionsOrAnnotation:options=optionsOrAnnotation,void 0===annotation?operation=DeleteFile.create(uri,options):(id=ChangeAnnotationIdentifier.is(annotation)?annotation:this._changeAnnotations.manage(annotation),operation=DeleteFile.create(uri,options,id)),this._workspaceEdit.documentChanges.push(operation),void 0!==id)return id},WorkspaceChange2}();!function(TextDocumentIdentifier2){TextDocumentIdentifier2.create=function create(uri){return{uri}},TextDocumentIdentifier2.is=function is(value){var candidate=value;return Is.defined(candidate)&&Is.string(candidate.uri)}}(TextDocumentIdentifier||(TextDocumentIdentifier={})),function(VersionedTextDocumentIdentifier2){VersionedTextDocumentIdentifier2.create=function create(uri,version){return{uri,version}},VersionedTextDocumentIdentifier2.is=function is(value){var candidate=value;return Is.defined(candidate)&&Is.string(candidate.uri)&&Is.integer(candidate.version)}}(VersionedTextDocumentIdentifier||(VersionedTextDocumentIdentifier={})),function(OptionalVersionedTextDocumentIdentifier2){OptionalVersionedTextDocumentIdentifier2.create=function create(uri,version){return{uri,version}},OptionalVersionedTextDocumentIdentifier2.is=function is(value){var candidate=value;return Is.defined(candidate)&&Is.string(candidate.uri)&&(null===candidate.version||Is.integer(candidate.version))}}(OptionalVersionedTextDocumentIdentifier||(OptionalVersionedTextDocumentIdentifier={})),function(TextDocumentItem2){TextDocumentItem2.create=function create(uri,languageId,version,text){return{uri,languageId,version,text}},TextDocumentItem2.is=function is(value){var candidate=value;return Is.defined(candidate)&&Is.string(candidate.uri)&&Is.string(candidate.languageId)&&Is.integer(candidate.version)&&Is.string(candidate.text)}}(TextDocumentItem||(TextDocumentItem={})),function(MarkupKind2){MarkupKind2.PlainText="plaintext",MarkupKind2.Markdown="markdown"}(MarkupKind||(MarkupKind={})),function(MarkupKind2){MarkupKind2.is=function is(value){var candidate=value;return candidate===MarkupKind2.PlainText||candidate===MarkupKind2.Markdown}}(MarkupKind||(MarkupKind={})),(MarkupContent||(MarkupContent={})).is=function is(value){var candidate=value;return Is.objectLiteral(value)&&MarkupKind.is(candidate.kind)&&Is.string(candidate.value)},function(CompletionItemKind2){CompletionItemKind2.Text=1,CompletionItemKind2.Method=2,CompletionItemKind2.Function=3,CompletionItemKind2.Constructor=4,CompletionItemKind2.Field=5,CompletionItemKind2.Variable=6,CompletionItemKind2.Class=7,CompletionItemKind2.Interface=8,CompletionItemKind2.Module=9,CompletionItemKind2.Property=10,CompletionItemKind2.Unit=11,CompletionItemKind2.Value=12,CompletionItemKind2.Enum=13,CompletionItemKind2.Keyword=14,CompletionItemKind2.Snippet=15,CompletionItemKind2.Color=16,CompletionItemKind2.File=17,CompletionItemKind2.Reference=18,CompletionItemKind2.Folder=19,CompletionItemKind2.EnumMember=20,CompletionItemKind2.Constant=21,CompletionItemKind2.Struct=22,CompletionItemKind2.Event=23,CompletionItemKind2.Operator=24,CompletionItemKind2.TypeParameter=25}(CompletionItemKind||(CompletionItemKind={})),function(InsertTextFormat2){InsertTextFormat2.PlainText=1,InsertTextFormat2.Snippet=2}(InsertTextFormat||(InsertTextFormat={})),(CompletionItemTag||(CompletionItemTag={})).Deprecated=1,function(InsertReplaceEdit2){InsertReplaceEdit2.create=function create(newText,insert,replace){return{newText,insert,replace}},InsertReplaceEdit2.is=function is(value){var candidate=value;return candidate&&Is.string(candidate.newText)&&Range.is(candidate.insert)&&Range.is(candidate.replace)}}(InsertReplaceEdit||(InsertReplaceEdit={})),function(InsertTextMode2){InsertTextMode2.asIs=1,InsertTextMode2.adjustIndentation=2}(InsertTextMode||(InsertTextMode={})),(CompletionItem||(CompletionItem={})).create=function create(label){return{label}},(CompletionList||(CompletionList={})).create=function create(items,isIncomplete){return{items:items||[],isIncomplete:!!isIncomplete}},function(MarkedString2){MarkedString2.fromPlainText=function fromPlainText(plainText){return plainText.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")},MarkedString2.is=function is(value){var candidate=value;return Is.string(candidate)||Is.objectLiteral(candidate)&&Is.string(candidate.language)&&Is.string(candidate.value)}}(MarkedString||(MarkedString={})),(Hover||(Hover={})).is=function is(value){var candidate=value;return!!candidate&&Is.objectLiteral(candidate)&&(MarkupContent.is(candidate.contents)||MarkedString.is(candidate.contents)||Is.typedArray(candidate.contents,MarkedString.is))&&(void 0===value.range||Range.is(value.range))},(ParameterInformation||(ParameterInformation={})).create=function create(label,documentation){return documentation?{label,documentation}:{label}},(SignatureInformation||(SignatureInformation={})).create=function create(label,documentation){for(var parameters=[],_i=2;_i<arguments.length;_i++)parameters[_i-2]=arguments[_i];var result={label};return Is.defined(documentation)&&(result.documentation=documentation),Is.defined(parameters)?result.parameters=parameters:result.parameters=[],result},function(DocumentHighlightKind2){DocumentHighlightKind2.Text=1,DocumentHighlightKind2.Read=2,DocumentHighlightKind2.Write=3}(DocumentHighlightKind||(DocumentHighlightKind={})),(DocumentHighlight||(DocumentHighlight={})).create=function create(range,kind){var result={range};return Is.number(kind)&&(result.kind=kind),result},function(SymbolKind2){SymbolKind2.File=1,SymbolKind2.Module=2,SymbolKind2.Namespace=3,SymbolKind2.Package=4,SymbolKind2.Class=5,SymbolKind2.Method=6,SymbolKind2.Property=7,SymbolKind2.Field=8,SymbolKind2.Constructor=9,SymbolKind2.Enum=10,SymbolKind2.Interface=11,SymbolKind2.Function=12,SymbolKind2.Variable=13,SymbolKind2.Constant=14,SymbolKind2.String=15,SymbolKind2.Number=16,SymbolKind2.Boolean=17,SymbolKind2.Array=18,SymbolKind2.Object=19,SymbolKind2.Key=20,SymbolKind2.Null=21,SymbolKind2.EnumMember=22,SymbolKind2.Struct=23,SymbolKind2.Event=24,SymbolKind2.Operator=25,SymbolKind2.TypeParameter=26}(SymbolKind||(SymbolKind={})),(SymbolTag||(SymbolTag={})).Deprecated=1,(SymbolInformation||(SymbolInformation={})).create=function create(name,kind,range,uri,containerName){var result={name,kind,location:{uri,range}};return containerName&&(result.containerName=containerName),result},function(DocumentSymbol2){DocumentSymbol2.create=function create(name,detail,kind,range,selectionRange,children){var result={name,detail,kind,range,selectionRange};return void 0!==children&&(result.children=children),result},DocumentSymbol2.is=function is(value){var candidate=value;return candidate&&Is.string(candidate.name)&&Is.number(candidate.kind)&&Range.is(candidate.range)&&Range.is(candidate.selectionRange)&&(void 0===candidate.detail||Is.string(candidate.detail))&&(void 0===candidate.deprecated||Is.boolean(candidate.deprecated))&&(void 0===candidate.children||Array.isArray(candidate.children))&&(void 0===candidate.tags||Array.isArray(candidate.tags))}}(DocumentSymbol||(DocumentSymbol={})),function(CodeActionKind2){CodeActionKind2.Empty="",CodeActionKind2.QuickFix="quickfix",CodeActionKind2.Refactor="refactor",CodeActionKind2.RefactorExtract="refactor.extract",CodeActionKind2.RefactorInline="refactor.inline",CodeActionKind2.RefactorRewrite="refactor.rewrite",CodeActionKind2.Source="source",CodeActionKind2.SourceOrganizeImports="source.organizeImports",CodeActionKind2.SourceFixAll="source.fixAll"}(CodeActionKind||(CodeActionKind={})),function(CodeActionContext2){CodeActionContext2.create=function create(diagnostics,only){var result={diagnostics};return null!=only&&(result.only=only),result},CodeActionContext2.is=function is(value){var candidate=value;return Is.defined(candidate)&&Is.typedArray(candidate.diagnostics,Diagnostic.is)&&(void 0===candidate.only||Is.typedArray(candidate.only,Is.string))}}(CodeActionContext||(CodeActionContext={})),function(CodeAction2){CodeAction2.create=function create(title,kindOrCommandOrEdit,kind){var result={title},checkKind=!0;return"string"==typeof kindOrCommandOrEdit?(checkKind=!1,result.kind=kindOrCommandOrEdit):Command.is(kindOrCommandOrEdit)?result.command=kindOrCommandOrEdit:result.edit=kindOrCommandOrEdit,checkKind&&void 0!==kind&&(result.kind=kind),result},CodeAction2.is=function is(value){var candidate=value;return candidate&&Is.string(candidate.title)&&(void 0===candidate.diagnostics||Is.typedArray(candidate.diagnostics,Diagnostic.is))&&(void 0===candidate.kind||Is.string(candidate.kind))&&(void 0!==candidate.edit||void 0!==candidate.command)&&(void 0===candidate.command||Command.is(candidate.command))&&(void 0===candidate.isPreferred||Is.boolean(candidate.isPreferred))&&(void 0===candidate.edit||WorkspaceEdit.is(candidate.edit))}}(CodeAction||(CodeAction={})),function(CodeLens2){CodeLens2.create=function create(range,data){var result={range};return Is.defined(data)&&(result.data=data),result},CodeLens2.is=function is(value){var candidate=value;return Is.defined(candidate)&&Range.is(candidate.range)&&(Is.undefined(candidate.command)||Command.is(candidate.command))}}(CodeLens||(CodeLens={})),function(FormattingOptions2){FormattingOptions2.create=function create(tabSize,insertSpaces){return{tabSize,insertSpaces}},FormattingOptions2.is=function is(value){var candidate=value;return Is.defined(candidate)&&Is.uinteger(candidate.tabSize)&&Is.boolean(candidate.insertSpaces)}}(FormattingOptions||(FormattingOptions={})),function(DocumentLink2){DocumentLink2.create=function create(range,target,data){return{range,target,data}},DocumentLink2.is=function is(value){var candidate=value;return Is.defined(candidate)&&Range.is(candidate.range)&&(Is.undefined(candidate.target)||Is.string(candidate.target))}}(DocumentLink||(DocumentLink={})),function(SelectionRange2){SelectionRange2.create=function create(range,parent){return{range,parent}},SelectionRange2.is=function is(value){var candidate=value;return void 0!==candidate&&Range.is(candidate.range)&&(void 0===candidate.parent||SelectionRange2.is(candidate.parent))}}(SelectionRange||(SelectionRange={})),function(TextDocument3){function mergeSort2(data,compare){if(data.length<=1)return data;var p=data.length/2|0,left=data.slice(0,p),right=data.slice(p);mergeSort2(left,compare),mergeSort2(right,compare);for(var leftIdx=0,rightIdx=0,i=0;leftIdx<left.length&&rightIdx<right.length;){var ret=compare(left[leftIdx],right[rightIdx]);data[i++]=ret<=0?left[leftIdx++]:right[rightIdx++]}for(;leftIdx<left.length;)data[i++]=left[leftIdx++];for(;rightIdx<right.length;)data[i++]=right[rightIdx++];return data}TextDocument3.create=function create(uri,languageId,version,content){return new FullTextDocument(uri,languageId,version,content)},TextDocument3.is=function is(value){var candidate=value;return!!(Is.defined(candidate)&&Is.string(candidate.uri)&&(Is.undefined(candidate.languageId)||Is.string(candidate.languageId))&&Is.uinteger(candidate.lineCount)&&Is.func(candidate.getText)&&Is.func(candidate.positionAt)&&Is.func(candidate.offsetAt))},TextDocument3.applyEdits=function applyEdits(document,edits){for(var text=document.getText(),sortedEdits=mergeSort2(edits,(function(a2,b){var diff=a2.range.start.line-b.range.start.line;return 0===diff?a2.range.start.character-b.range.start.character:diff})),lastModifiedOffset=text.length,i=sortedEdits.length-1;i>=0;i--){var e=sortedEdits[i],startOffset=document.offsetAt(e.range.start),endOffset=document.offsetAt(e.range.end);if(!(endOffset<=lastModifiedOffset))throw new Error("Overlapping edit");text=text.substring(0,startOffset)+e.newText+text.substring(endOffset,text.length),lastModifiedOffset=startOffset}return text}}(TextDocument||(TextDocument={}));var Is,FullTextDocument=function(){function FullTextDocument3(uri,languageId,version,content){this._uri=uri,this._languageId=languageId,this._version=version,this._content=content,this._lineOffsets=void 0}return Object.defineProperty(FullTextDocument3.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(FullTextDocument3.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(FullTextDocument3.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),FullTextDocument3.prototype.getText=function(range){if(range){var start=this.offsetAt(range.start),end=this.offsetAt(range.end);return this._content.substring(start,end)}return this._content},FullTextDocument3.prototype.update=function(event,version){this._content=event.text,this._version=version,this._lineOffsets=void 0},FullTextDocument3.prototype.getLineOffsets=function(){if(void 0===this._lineOffsets){for(var lineOffsets=[],text=this._content,isLineStart=!0,i=0;i<text.length;i++){isLineStart&&(lineOffsets.push(i),isLineStart=!1);var ch=text.charAt(i);isLineStart="\r"===ch||"\n"===ch,"\r"===ch&&i+1<text.length&&"\n"===text.charAt(i+1)&&i++}isLineStart&&text.length>0&&lineOffsets.push(text.length),this._lineOffsets=lineOffsets}return this._lineOffsets},FullTextDocument3.prototype.positionAt=function(offset){offset=Math.max(Math.min(offset,this._content.length),0);var lineOffsets=this.getLineOffsets(),low=0,high=lineOffsets.length;if(0===high)return Position.create(0,offset);for(;low<high;){var mid=Math.floor((low+high)/2);lineOffsets[mid]>offset?high=mid:low=mid+1}var line=low-1;return Position.create(line,offset-lineOffsets[line])},FullTextDocument3.prototype.offsetAt=function(position){var lineOffsets=this.getLineOffsets();if(position.line>=lineOffsets.length)return this._content.length;if(position.line<0)return 0;var lineOffset=lineOffsets[position.line],nextLineOffset=position.line+1<lineOffsets.length?lineOffsets[position.line+1]:this._content.length;return Math.max(Math.min(lineOffset+position.character,nextLineOffset),lineOffset)},Object.defineProperty(FullTextDocument3.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),FullTextDocument3}();!function(Is2){var toString=Object.prototype.toString;Is2.defined=function defined(value){return void 0!==value},Is2.undefined=function undefined2(value){return void 0===value},Is2.boolean=function boolean(value){return!0===value||!1===value},Is2.string=function string(value){return"[object String]"===toString.call(value)},Is2.number=function number(value){return"[object Number]"===toString.call(value)},Is2.numberRange=function numberRange(value,min,max){return"[object Number]"===toString.call(value)&&min<=value&&value<=max},Is2.integer=function integer2(value){return"[object Number]"===toString.call(value)&&-2147483648<=value&&value<=2147483647},Is2.uinteger=function uinteger2(value){return"[object Number]"===toString.call(value)&&0<=value&&value<=2147483647},Is2.func=function func(value){return"[object Function]"===toString.call(value)},Is2.objectLiteral=function objectLiteral(value){return null!==value&&"object"==typeof value},Is2.typedArray=function typedArray(value,check){return Array.isArray(value)&&value.every(check)}}(Is||(Is={}));var TextDocument2,ErrorCode,ClientCapabilities,FullTextDocument2=class{constructor(uri,languageId,version,content){this._uri=uri,this._languageId=languageId,this._version=version,this._content=content,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(range){if(range){const start=this.offsetAt(range.start),end=this.offsetAt(range.end);return this._content.substring(start,end)}return this._content}update(changes,version){for(let change of changes)if(FullTextDocument2.isIncremental(change)){const range=getWellformedRange(change.range),startOffset=this.offsetAt(range.start),endOffset=this.offsetAt(range.end);this._content=this._content.substring(0,startOffset)+change.text+this._content.substring(endOffset,this._content.length);const startLine=Math.max(range.start.line,0),endLine=Math.max(range.end.line,0);let lineOffsets=this._lineOffsets;const addedLineOffsets=computeLineOffsets(change.text,!1,startOffset);if(endLine-startLine===addedLineOffsets.length)for(let i=0,len=addedLineOffsets.length;i<len;i++)lineOffsets[i+startLine+1]=addedLineOffsets[i];else addedLineOffsets.length<1e4?lineOffsets.splice(startLine+1,endLine-startLine,...addedLineOffsets):this._lineOffsets=lineOffsets=lineOffsets.slice(0,startLine+1).concat(addedLineOffsets,lineOffsets.slice(endLine+1));const diff=change.text.length-(endOffset-startOffset);if(0!==diff)for(let i=startLine+1+addedLineOffsets.length,len=lineOffsets.length;i<len;i++)lineOffsets[i]=lineOffsets[i]+diff}else{if(!FullTextDocument2.isFull(change))throw new Error("Unknown change event received");this._content=change.text,this._lineOffsets=void 0}this._version=version}getLineOffsets(){return void 0===this._lineOffsets&&(this._lineOffsets=computeLineOffsets(this._content,!0)),this._lineOffsets}positionAt(offset){offset=Math.max(Math.min(offset,this._content.length),0);let lineOffsets=this.getLineOffsets(),low=0,high=lineOffsets.length;if(0===high)return{line:0,character:offset};for(;low<high;){let mid=Math.floor((low+high)/2);lineOffsets[mid]>offset?high=mid:low=mid+1}let line=low-1;return{line,character:offset-lineOffsets[line]}}offsetAt(position){let lineOffsets=this.getLineOffsets();if(position.line>=lineOffsets.length)return this._content.length;if(position.line<0)return 0;let lineOffset=lineOffsets[position.line],nextLineOffset=position.line+1<lineOffsets.length?lineOffsets[position.line+1]:this._content.length;return Math.max(Math.min(lineOffset+position.character,nextLineOffset),lineOffset)}get lineCount(){return this.getLineOffsets().length}static isIncremental(event){let candidate=event;return null!=candidate&&"string"==typeof candidate.text&&void 0!==candidate.range&&(void 0===candidate.rangeLength||"number"==typeof candidate.rangeLength)}static isFull(event){let candidate=event;return null!=candidate&&"string"==typeof candidate.text&&void 0===candidate.range&&void 0===candidate.rangeLength}};function mergeSort(data,compare){if(data.length<=1)return data;const p=data.length/2|0,left=data.slice(0,p),right=data.slice(p);mergeSort(left,compare),mergeSort(right,compare);let leftIdx=0,rightIdx=0,i=0;for(;leftIdx<left.length&&rightIdx<right.length;){let ret=compare(left[leftIdx],right[rightIdx]);data[i++]=ret<=0?left[leftIdx++]:right[rightIdx++]}for(;leftIdx<left.length;)data[i++]=left[leftIdx++];for(;rightIdx<right.length;)data[i++]=right[rightIdx++];return data}function computeLineOffsets(text,isAtLineStart,textOffset=0){const result=isAtLineStart?[textOffset]:[];for(let i=0;i<text.length;i++){let ch=text.charCodeAt(i);13!==ch&&10!==ch||(13===ch&&i+1<text.length&&10===text.charCodeAt(i+1)&&i++,result.push(textOffset+i+1))}return result}function getWellformedRange(range){const start=range.start,end=range.end;return start.line>end.line||start.line===end.line&&start.character>end.character?{start:end,end:start}:range}function getWellformedEdit(textEdit){const range=getWellformedRange(textEdit.range);return range!==textEdit.range?{newText:textEdit.newText,range}:textEdit}function format3(message,args){let result;return result=0===args.length?message:message.replace(/\{(\d+)\}/g,((match,rest)=>{let index=rest[0];return void 0!==args[index]?args[index]:match})),result}function localize(key,message,...args){return format3(message,args)}function loadMessageBundle(file){return localize}!function(TextDocument3){TextDocument3.create=function create(uri,languageId,version,content){return new FullTextDocument2(uri,languageId,version,content)},TextDocument3.update=function update(document,changes,version){if(document instanceof FullTextDocument2)return document.update(changes,version),document;throw new Error("TextDocument.update: document must be created by TextDocument.create")},TextDocument3.applyEdits=function applyEdits(document,edits){let text=document.getText(),sortedEdits=mergeSort(edits.map(getWellformedEdit),((a2,b)=>{let diff=a2.range.start.line-b.range.start.line;return 0===diff?a2.range.start.character-b.range.start.character:diff})),lastModifiedOffset=0;const spans=[];for(const e of sortedEdits){let startOffset=document.offsetAt(e.range.start);if(startOffset<lastModifiedOffset)throw new Error("Overlapping edit");startOffset>lastModifiedOffset&&spans.push(text.substring(lastModifiedOffset,startOffset)),e.newText.length&&spans.push(e.newText),lastModifiedOffset=document.offsetAt(e.range.end)}return spans.push(text.substr(lastModifiedOffset)),spans.join("")}}(TextDocument2||(TextDocument2={})),function(ErrorCode2){ErrorCode2[ErrorCode2.Undefined=0]="Undefined",ErrorCode2[ErrorCode2.EnumValueMismatch=1]="EnumValueMismatch",ErrorCode2[ErrorCode2.Deprecated=2]="Deprecated",ErrorCode2[ErrorCode2.UnexpectedEndOfComment=257]="UnexpectedEndOfComment",ErrorCode2[ErrorCode2.UnexpectedEndOfString=258]="UnexpectedEndOfString",ErrorCode2[ErrorCode2.UnexpectedEndOfNumber=259]="UnexpectedEndOfNumber",ErrorCode2[ErrorCode2.InvalidUnicode=260]="InvalidUnicode",ErrorCode2[ErrorCode2.InvalidEscapeCharacter=261]="InvalidEscapeCharacter",ErrorCode2[ErrorCode2.InvalidCharacter=262]="InvalidCharacter",ErrorCode2[ErrorCode2.PropertyExpected=513]="PropertyExpected",ErrorCode2[ErrorCode2.CommaExpected=514]="CommaExpected",ErrorCode2[ErrorCode2.ColonExpected=515]="ColonExpected",ErrorCode2[ErrorCode2.ValueExpected=516]="ValueExpected",ErrorCode2[ErrorCode2.CommaOrCloseBacketExpected=517]="CommaOrCloseBacketExpected",ErrorCode2[ErrorCode2.CommaOrCloseBraceExpected=518]="CommaOrCloseBraceExpected",ErrorCode2[ErrorCode2.TrailingComma=519]="TrailingComma",ErrorCode2[ErrorCode2.DuplicateKey=520]="DuplicateKey",ErrorCode2[ErrorCode2.CommentNotPermitted=521]="CommentNotPermitted",ErrorCode2[ErrorCode2.SchemaResolveError=768]="SchemaResolveError"}(ErrorCode||(ErrorCode={})),(ClientCapabilities||(ClientCapabilities={})).LATEST={textDocument:{completion:{completionItem:{documentationFormat:[MarkupKind.Markdown,MarkupKind.PlainText],commitCharactersSupport:!0}}}};var EnumMatch,__extends=function(){var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])})(d,b)};return function(d,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),localize2=loadMessageBundle(),formats={"color-hex":{errorMessage:localize2("colorHexFormatWarning","Invalid color format. Use #RGB, #RGBA, #RRGGBB or #RRGGBBAA."),pattern:/^#([0-9A-Fa-f]{3,4}|([0-9A-Fa-f]{2}){3,4})$/},"date-time":{errorMessage:localize2("dateTimeFormatWarning","String is not a RFC3339 date-time."),pattern:/^(\d{4})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])T([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\.[0-9]+)?(Z|(\+|-)([01][0-9]|2[0-3]):([0-5][0-9]))$/i},date:{errorMessage:localize2("dateFormatWarning","String is not a RFC3339 date."),pattern:/^(\d{4})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$/i},time:{errorMessage:localize2("timeFormatWarning","String is not a RFC3339 time."),pattern:/^([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\.[0-9]+)?(Z|(\+|-)([01][0-9]|2[0-3]):([0-5][0-9]))$/i},email:{errorMessage:localize2("emailFormatWarning","String is not an e-mail address."),pattern:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z0-9-]+\.)+[a-zA-Z]{2,}))$/},hostname:{errorMessage:localize2("hostnameFormatWarning","String is not a hostname."),pattern:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i},ipv4:{errorMessage:localize2("ipv4FormatWarning","String is not an IPv4 address."),pattern:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/},ipv6:{errorMessage:localize2("ipv6FormatWarning","String is not an IPv6 address."),pattern:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i}},ASTNodeImpl=function(){function ASTNodeImpl2(parent,offset,length){void 0===length&&(length=0),this.offset=offset,this.length=length,this.parent=parent}return Object.defineProperty(ASTNodeImpl2.prototype,"children",{get:function(){return[]},enumerable:!1,configurable:!0}),ASTNodeImpl2.prototype.toString=function(){return"type: "+this.type+" ("+this.offset+"/"+this.length+")"+(this.parent?" parent: {"+this.parent.toString()+"}":"")},ASTNodeImpl2}(),NullASTNodeImpl=function(_super){function NullASTNodeImpl2(parent,offset){var _this=_super.call(this,parent,offset)||this;return _this.type="null",_this.value=null,_this}return __extends(NullASTNodeImpl2,_super),NullASTNodeImpl2}(ASTNodeImpl),BooleanASTNodeImpl=function(_super){function BooleanASTNodeImpl2(parent,boolValue,offset){var _this=_super.call(this,parent,offset)||this;return _this.type="boolean",_this.value=boolValue,_this}return __extends(BooleanASTNodeImpl2,_super),BooleanASTNodeImpl2}(ASTNodeImpl),ArrayASTNodeImpl=function(_super){function ArrayASTNodeImpl2(parent,offset){var _this=_super.call(this,parent,offset)||this;return _this.type="array",_this.items=[],_this}return __extends(ArrayASTNodeImpl2,_super),Object.defineProperty(ArrayASTNodeImpl2.prototype,"children",{get:function(){return this.items},enumerable:!1,configurable:!0}),ArrayASTNodeImpl2}(ASTNodeImpl),NumberASTNodeImpl=function(_super){function NumberASTNodeImpl2(parent,offset){var _this=_super.call(this,parent,offset)||this;return _this.type="number",_this.isInteger=!0,_this.value=Number.NaN,_this}return __extends(NumberASTNodeImpl2,_super),NumberASTNodeImpl2}(ASTNodeImpl),StringASTNodeImpl=function(_super){function StringASTNodeImpl2(parent,offset,length){var _this=_super.call(this,parent,offset,length)||this;return _this.type="string",_this.value="",_this}return __extends(StringASTNodeImpl2,_super),StringASTNodeImpl2}(ASTNodeImpl),PropertyASTNodeImpl=function(_super){function PropertyASTNodeImpl2(parent,offset,keyNode){var _this=_super.call(this,parent,offset)||this;return _this.type="property",_this.colonOffset=-1,_this.keyNode=keyNode,_this}return __extends(PropertyASTNodeImpl2,_super),Object.defineProperty(PropertyASTNodeImpl2.prototype,"children",{get:function(){return this.valueNode?[this.keyNode,this.valueNode]:[this.keyNode]},enumerable:!1,configurable:!0}),PropertyASTNodeImpl2}(ASTNodeImpl),ObjectASTNodeImpl=function(_super){function ObjectASTNodeImpl2(parent,offset){var _this=_super.call(this,parent,offset)||this;return _this.type="object",_this.properties=[],_this}return __extends(ObjectASTNodeImpl2,_super),Object.defineProperty(ObjectASTNodeImpl2.prototype,"children",{get:function(){return this.properties},enumerable:!1,configurable:!0}),ObjectASTNodeImpl2}(ASTNodeImpl);function asSchema(schema){return isBoolean(schema)?schema?{}:{not:{}}:schema}!function(EnumMatch2){EnumMatch2[EnumMatch2.Key=0]="Key",EnumMatch2[EnumMatch2.Enum=1]="Enum"}(EnumMatch||(EnumMatch={}));var SchemaCollector=function(){function SchemaCollector2(focusOffset,exclude){void 0===focusOffset&&(focusOffset=-1),this.focusOffset=focusOffset,this.exclude=exclude,this.schemas=[]}return SchemaCollector2.prototype.add=function(schema){this.schemas.push(schema)},SchemaCollector2.prototype.merge=function(other){Array.prototype.push.apply(this.schemas,other.schemas)},SchemaCollector2.prototype.include=function(node){return(-1===this.focusOffset||contains2(node,this.focusOffset))&&node!==this.exclude},SchemaCollector2.prototype.newSub=function(){return new SchemaCollector2(-1,this.exclude)},SchemaCollector2}(),NoOpSchemaCollector=function(){function NoOpSchemaCollector2(){}return Object.defineProperty(NoOpSchemaCollector2.prototype,"schemas",{get:function(){return[]},enumerable:!1,configurable:!0}),NoOpSchemaCollector2.prototype.add=function(schema){},NoOpSchemaCollector2.prototype.merge=function(other){},NoOpSchemaCollector2.prototype.include=function(node){return!0},NoOpSchemaCollector2.prototype.newSub=function(){return this},NoOpSchemaCollector2.instance=new NoOpSchemaCollector2,NoOpSchemaCollector2}(),ValidationResult=function(){function ValidationResult2(){this.problems=[],this.propertiesMatches=0,this.propertiesValueMatches=0,this.primaryValueMatches=0,this.enumValueMatch=!1,this.enumValues=void 0}return ValidationResult2.prototype.hasProblems=function(){return!!this.problems.length},ValidationResult2.prototype.mergeAll=function(validationResults){for(var _i=0,validationResults_1=validationResults;_i<validationResults_1.length;_i++){var validationResult=validationResults_1[_i];this.merge(validationResult)}},ValidationResult2.prototype.merge=function(validationResult){this.problems=this.problems.concat(validationResult.problems)},ValidationResult2.prototype.mergeEnumValues=function(validationResult){if(!this.enumValueMatch&&!validationResult.enumValueMatch&&this.enumValues&&validationResult.enumValues){this.enumValues=this.enumValues.concat(validationResult.enumValues);for(var _i=0,_a=this.problems;_i<_a.length;_i++){var error=_a[_i];error.code===ErrorCode.EnumValueMismatch&&(error.message=localize2("enumWarning","Value is not accepted. Valid values: {0}.",this.enumValues.map((function(v){return JSON.stringify(v)})).join(", ")))}}},ValidationResult2.prototype.mergePropertyMatch=function(propertyValidationResult){this.merge(propertyValidationResult),this.propertiesMatches++,(propertyValidationResult.enumValueMatch||!propertyValidationResult.hasProblems()&&propertyValidationResult.propertiesMatches)&&this.propertiesValueMatches++,propertyValidationResult.enumValueMatch&&propertyValidationResult.enumValues&&1===propertyValidationResult.enumValues.length&&this.primaryValueMatches++},ValidationResult2.prototype.compare=function(other){var hasProblems=this.hasProblems();return hasProblems!==other.hasProblems()?hasProblems?-1:1:this.enumValueMatch!==other.enumValueMatch?other.enumValueMatch?-1:1:this.primaryValueMatches!==other.primaryValueMatches?this.primaryValueMatches-other.primaryValueMatches:this.propertiesValueMatches!==other.propertiesValueMatches?this.propertiesValueMatches-other.propertiesValueMatches:this.propertiesMatches-other.propertiesMatches},ValidationResult2}();function newJSONDocument(root,diagnostics){return void 0===diagnostics&&(diagnostics=[]),new JSONDocument(root,diagnostics,[])}function getNodeValue3(node){return getNodeValue2(node)}function getNodePath3(node){return getNodePath2(node)}function contains2(node,offset,includeRightBound){return void 0===includeRightBound&&(includeRightBound=!1),offset>=node.offset&&offset<node.offset+node.length||includeRightBound&&offset===node.offset+node.length}var JSONDocument=function(){function JSONDocument2(root,syntaxErrors,comments){void 0===syntaxErrors&&(syntaxErrors=[]),void 0===comments&&(comments=[]),this.root=root,this.syntaxErrors=syntaxErrors,this.comments=comments}return JSONDocument2.prototype.getNodeFromOffset=function(offset,includeRightBound){if(void 0===includeRightBound&&(includeRightBound=!1),this.root)return findNodeAtOffset2(this.root,offset,includeRightBound)},JSONDocument2.prototype.visit=function(visitor){if(this.root){var doVisit_1=function(node){var ctn=visitor(node),children=node.children;if(Array.isArray(children))for(var i=0;i<children.length&&ctn;i++)ctn=doVisit_1(children[i]);return ctn};doVisit_1(this.root)}},JSONDocument2.prototype.validate=function(textDocument,schema,severity){if(void 0===severity&&(severity=DiagnosticSeverity.Warning),this.root&&schema){var validationResult=new ValidationResult;return validate(this.root,schema,validationResult,NoOpSchemaCollector.instance),validationResult.problems.map((function(p){var _a,range=Range.create(textDocument.positionAt(p.location.offset),textDocument.positionAt(p.location.offset+p.location.length));return Diagnostic.create(range,p.message,null!==(_a=p.severity)&&void 0!==_a?_a:severity,p.code)}))}},JSONDocument2.prototype.getMatchingSchemas=function(schema,focusOffset,exclude){void 0===focusOffset&&(focusOffset=-1);var matchingSchemas=new SchemaCollector(focusOffset,exclude);return this.root&&schema&&validate(this.root,schema,new ValidationResult,matchingSchemas),matchingSchemas.schemas},JSONDocument2}();function validate(n,schema,validationResult,matchingSchemas){if(n&&matchingSchemas.include(n)){var node=n;switch(node.type){case"object":!function _validateObjectNode(node2,schema2,validationResult2,matchingSchemas2){for(var seenKeys=Object.create(null),unprocessedProperties=[],_i=0,_a=node2.properties;_i<_a.length;_i++){seenKeys[key=(propertyNode=_a[_i]).keyNode.value]=propertyNode.valueNode,unprocessedProperties.push(key)}if(Array.isArray(schema2.required))for(var _b=0,_c=schema2.required;_b<_c.length;_b++){if(!seenKeys[propertyName=_c[_b]]){var keyNode=node2.parent&&"property"===node2.parent.type&&node2.parent.keyNode,location=keyNode?{offset:keyNode.offset,length:keyNode.length}:{offset:node2.offset,length:1};validationResult2.problems.push({location,message:localize2("MissingRequiredPropWarning",'Missing property "{0}".',propertyName)})}}var propertyProcessed=function(prop2){for(var index=unprocessedProperties.indexOf(prop2);index>=0;)unprocessedProperties.splice(index,1),index=unprocessedProperties.indexOf(prop2)};if(schema2.properties)for(var _d=0,_e=Object.keys(schema2.properties);_d<_e.length;_d++){propertyProcessed(propertyName=_e[_d]);var propertySchema=schema2.properties[propertyName];if(child=seenKeys[propertyName])if(isBoolean(propertySchema))if(propertySchema)validationResult2.propertiesMatches++,validationResult2.propertiesValueMatches++;else{var propertyNode=child.parent;validationResult2.problems.push({location:{offset:propertyNode.keyNode.offset,length:propertyNode.keyNode.length},message:schema2.errorMessage||localize2("DisallowedExtraPropWarning","Property {0} is not allowed.",propertyName)})}else validate(child,propertySchema,propertyValidationResult=new ValidationResult,matchingSchemas2),validationResult2.mergePropertyMatch(propertyValidationResult)}if(schema2.patternProperties)for(var _f=0,_g=Object.keys(schema2.patternProperties);_f<_g.length;_f++)for(var propertyPattern=_g[_f],regex=extendedRegExp(propertyPattern),_h=0,_j=unprocessedProperties.slice(0);_h<_j.length;_h++){var propertyName=_j[_h];if(null==regex?void 0:regex.test(propertyName))if(propertyProcessed(propertyName),child=seenKeys[propertyName])if(isBoolean(propertySchema=schema2.patternProperties[propertyPattern]))if(propertySchema)validationResult2.propertiesMatches++,validationResult2.propertiesValueMatches++;else{propertyNode=child.parent;validationResult2.problems.push({location:{offset:propertyNode.keyNode.offset,length:propertyNode.keyNode.length},message:schema2.errorMessage||localize2("DisallowedExtraPropWarning","Property {0} is not allowed.",propertyName)})}else validate(child,propertySchema,propertyValidationResult=new ValidationResult,matchingSchemas2),validationResult2.mergePropertyMatch(propertyValidationResult)}if("object"==typeof schema2.additionalProperties)for(var _k=0,unprocessedProperties_1=unprocessedProperties;_k<unprocessedProperties_1.length;_k++){if(child=seenKeys[propertyName=unprocessedProperties_1[_k]]){var propertyValidationResult=new ValidationResult;validate(child,schema2.additionalProperties,propertyValidationResult,matchingSchemas2),validationResult2.mergePropertyMatch(propertyValidationResult)}}else if(!1===schema2.additionalProperties&&unprocessedProperties.length>0)for(var _l=0,unprocessedProperties_2=unprocessedProperties;_l<unprocessedProperties_2.length;_l++){var child;if(child=seenKeys[propertyName=unprocessedProperties_2[_l]]){propertyNode=child.parent;validationResult2.problems.push({location:{offset:propertyNode.keyNode.offset,length:propertyNode.keyNode.length},message:schema2.errorMessage||localize2("DisallowedExtraPropWarning","Property {0} is not allowed.",propertyName)})}}isNumber(schema2.maxProperties)&&node2.properties.length>schema2.maxProperties&&validationResult2.problems.push({location:{offset:node2.offset,length:node2.length},message:localize2("MaxPropWarning","Object has more properties than limit of {0}.",schema2.maxProperties)});isNumber(schema2.minProperties)&&node2.properties.length<schema2.minProperties&&validationResult2.problems.push({location:{offset:node2.offset,length:node2.length},message:localize2("MinPropWarning","Object has fewer properties than the required number of {0}",schema2.minProperties)});if(schema2.dependencies)for(var _m=0,_o=Object.keys(schema2.dependencies);_m<_o.length;_m++){if(seenKeys[key=_o[_m]]){var propertyDep=schema2.dependencies[key];if(Array.isArray(propertyDep))for(var _p=0,propertyDep_1=propertyDep;_p<propertyDep_1.length;_p++){var requiredProp=propertyDep_1[_p];seenKeys[requiredProp]?validationResult2.propertiesValueMatches++:validationResult2.problems.push({location:{offset:node2.offset,length:node2.length},message:localize2("RequiredDependentPropWarning","Object is missing property {0} required by property {1}.",requiredProp,key)})}else if(propertySchema=asSchema(propertyDep))validate(node2,propertySchema,propertyValidationResult=new ValidationResult,matchingSchemas2),validationResult2.mergePropertyMatch(propertyValidationResult)}}var propertyNames=asSchema(schema2.propertyNames);if(propertyNames)for(var _q=0,_r=node2.properties;_q<_r.length;_q++){var key;(key=_r[_q].keyNode)&&validate(key,propertyNames,validationResult2,NoOpSchemaCollector.instance)}}(node,schema,validationResult,matchingSchemas);break;case"array":!function _validateArrayNode(node2,schema2,validationResult2,matchingSchemas2){if(Array.isArray(schema2.items)){for(var subSchemas=schema2.items,index=0;index<subSchemas.length;index++){var subSchema=asSchema(subSchemas[index]),itemValidationResult=new ValidationResult;(item=node2.items[index])?(validate(item,subSchema,itemValidationResult,matchingSchemas2),validationResult2.mergePropertyMatch(itemValidationResult)):node2.items.length>=subSchemas.length&&validationResult2.propertiesValueMatches++}if(node2.items.length>subSchemas.length)if("object"==typeof schema2.additionalItems)for(var i=subSchemas.length;i<node2.items.length;i++){itemValidationResult=new ValidationResult;validate(node2.items[i],schema2.additionalItems,itemValidationResult,matchingSchemas2),validationResult2.mergePropertyMatch(itemValidationResult)}else!1===schema2.additionalItems&&validationResult2.problems.push({location:{offset:node2.offset,length:node2.length},message:localize2("additionalItemsWarning","Array has too many items according to schema. Expected {0} or fewer.",subSchemas.length)})}else{var itemSchema=asSchema(schema2.items);if(itemSchema)for(var _i=0,_a=node2.items;_i<_a.length;_i++){var item;validate(item=_a[_i],itemSchema,itemValidationResult=new ValidationResult,matchingSchemas2),validationResult2.mergePropertyMatch(itemValidationResult)}}var containsSchema=asSchema(schema2.contains);if(containsSchema){node2.items.some((function(item2){var itemValidationResult2=new ValidationResult;return validate(item2,containsSchema,itemValidationResult2,NoOpSchemaCollector.instance),!itemValidationResult2.hasProblems()}))||validationResult2.problems.push({location:{offset:node2.offset,length:node2.length},message:schema2.errorMessage||localize2("requiredItemMissingWarning","Array does not contain required item.")})}isNumber(schema2.minItems)&&node2.items.length<schema2.minItems&&validationResult2.problems.push({location:{offset:node2.offset,length:node2.length},message:localize2("minItemsWarning","Array has too few items. Expected {0} or more.",schema2.minItems)});isNumber(schema2.maxItems)&&node2.items.length>schema2.maxItems&&validationResult2.problems.push({location:{offset:node2.offset,length:node2.length},message:localize2("maxItemsWarning","Array has too many items. Expected {0} or fewer.",schema2.maxItems)});if(!0===schema2.uniqueItems){var values_1=getNodeValue3(node2);values_1.some((function(value,index2){return index2!==values_1.lastIndexOf(value)}))&&validationResult2.problems.push({location:{offset:node2.offset,length:node2.length},message:localize2("uniqueItemsWarning","Array has duplicate items.")})}}(node,schema,validationResult,matchingSchemas);break;case"string":!function _validateStringNode(node2,schema2,validationResult2,matchingSchemas2){isNumber(schema2.minLength)&&node2.value.length<schema2.minLength&&validationResult2.problems.push({location:{offset:node2.offset,length:node2.length},message:localize2("minLengthWarning","String is shorter than the minimum length of {0}.",schema2.minLength)});isNumber(schema2.maxLength)&&node2.value.length>schema2.maxLength&&validationResult2.problems.push({location:{offset:node2.offset,length:node2.length},message:localize2("maxLengthWarning","String is longer than the maximum length of {0}.",schema2.maxLength)});if(isString(schema2.pattern)){var regex=extendedRegExp(schema2.pattern);(null==regex?void 0:regex.test(node2.value))||validationResult2.problems.push({location:{offset:node2.offset,length:node2.length},message:schema2.patternErrorMessage||schema2.errorMessage||localize2("patternWarning",'String does not match the pattern of "{0}".',schema2.pattern)})}if(schema2.format)switch(schema2.format){case"uri":case"uri-reference":var errorMessage=void 0;if(node2.value){var match=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/.exec(node2.value);match?match[2]||"uri"!==schema2.format||(errorMessage=localize2("uriSchemeMissing","URI with a scheme is expected.")):errorMessage=localize2("uriMissing","URI is expected.")}else errorMessage=localize2("uriEmpty","URI expected.");errorMessage&&validationResult2.problems.push({location:{offset:node2.offset,length:node2.length},message:schema2.patternErrorMessage||schema2.errorMessage||localize2("uriFormatWarning","String is not a URI: {0}",errorMessage)});break;case"color-hex":case"date-time":case"date":case"time":case"email":case"hostname":case"ipv4":case"ipv6":var format4=formats[schema2.format];node2.value&&format4.pattern.exec(node2.value)||validationResult2.problems.push({location:{offset:node2.offset,length:node2.length},message:schema2.patternErrorMessage||schema2.errorMessage||format4.errorMessage})}}(node,schema,validationResult);break;case"number":!function _validateNumberNode(node2,schema2,validationResult2,matchingSchemas2){var val=node2.value;function normalizeFloats(float){var _a,parts=/^(-?\d+)(?:\.(\d+))?(?:e([-+]\d+))?$/.exec(float.toString());return parts&&{value:Number(parts[1]+(parts[2]||"")),multiplier:((null===(_a=parts[2])||void 0===_a?void 0:_a.length)||0)-(parseInt(parts[3])||0)}}if(isNumber(schema2.multipleOf)){var remainder=-1;if(Number.isInteger(schema2.multipleOf))remainder=val%schema2.multipleOf;else{var normMultipleOf=normalizeFloats(schema2.multipleOf),normValue=normalizeFloats(val);if(normMultipleOf&&normValue){var multiplier=Math.pow(10,Math.abs(normValue.multiplier-normMultipleOf.multiplier));normValue.multiplier<normMultipleOf.multiplier?normValue.value*=multiplier:normMultipleOf.value*=multiplier,remainder=normValue.value%normMultipleOf.value}}0!==remainder&&validationResult2.problems.push({location:{offset:node2.offset,length:node2.length},message:localize2("multipleOfWarning","Value is not divisible by {0}.",schema2.multipleOf)})}function getExclusiveLimit(limit,exclusive){return isNumber(exclusive)?exclusive:isBoolean(exclusive)&&exclusive?limit:void 0}function getLimit(limit,exclusive){if(!isBoolean(exclusive)||!exclusive)return limit}var exclusiveMinimum=getExclusiveLimit(schema2.minimum,schema2.exclusiveMinimum);isNumber(exclusiveMinimum)&&val<=exclusiveMinimum&&validationResult2.problems.push({location:{offset:node2.offset,length:node2.length},message:localize2("exclusiveMinimumWarning","Value is below the exclusive minimum of {0}.",exclusiveMinimum)});var exclusiveMaximum=getExclusiveLimit(schema2.maximum,schema2.exclusiveMaximum);isNumber(exclusiveMaximum)&&val>=exclusiveMaximum&&validationResult2.problems.push({location:{offset:node2.offset,length:node2.length},message:localize2("exclusiveMaximumWarning","Value is above the exclusive maximum of {0}.",exclusiveMaximum)});var minimum=getLimit(schema2.minimum,schema2.exclusiveMinimum);isNumber(minimum)&&val<minimum&&validationResult2.problems.push({location:{offset:node2.offset,length:node2.length},message:localize2("minimumWarning","Value is below the minimum of {0}.",minimum)});var maximum=getLimit(schema2.maximum,schema2.exclusiveMaximum);isNumber(maximum)&&val>maximum&&validationResult2.problems.push({location:{offset:node2.offset,length:node2.length},message:localize2("maximumWarning","Value is above the maximum of {0}.",maximum)})}(node,schema,validationResult);break;case"property":return validate(node.valueNode,schema,validationResult,matchingSchemas)}!function _validateNode(){function matchesType(type){return node.type===type||"integer"===type&&"number"===node.type&&node.isInteger}Array.isArray(schema.type)?schema.type.some(matchesType)||validationResult.problems.push({location:{offset:node.offset,length:node.length},message:schema.errorMessage||localize2("typeArrayMismatchWarning","Incorrect type. Expected one of {0}.",schema.type.join(", "))}):schema.type&&(matchesType(schema.type)||validationResult.problems.push({location:{offset:node.offset,length:node.length},message:schema.errorMessage||localize2("typeMismatchWarning",'Incorrect type. Expected "{0}".',schema.type)}));if(Array.isArray(schema.allOf))for(var _i=0,_a=schema.allOf;_i<_a.length;_i++){var subSchemaRef=_a[_i];validate(node,asSchema(subSchemaRef),validationResult,matchingSchemas)}var notSchema=asSchema(schema.not);if(notSchema){var subValidationResult=new ValidationResult,subMatchingSchemas=matchingSchemas.newSub();validate(node,notSchema,subValidationResult,subMatchingSchemas),subValidationResult.hasProblems()||validationResult.problems.push({location:{offset:node.offset,length:node.length},message:localize2("notSchemaWarning","Matches a schema that is not allowed.")});for(var _b=0,_c=subMatchingSchemas.schemas;_b<_c.length;_b++){var ms=_c[_b];ms.inverted=!ms.inverted,matchingSchemas.add(ms)}}var testAlternatives=function(alternatives,maxOneMatch){for(var matches=[],bestMatch=void 0,_i2=0,alternatives_1=alternatives;_i2<alternatives_1.length;_i2++){var subSchema=asSchema(alternatives_1[_i2]),subValidationResult2=new ValidationResult,subMatchingSchemas2=matchingSchemas.newSub();if(validate(node,subSchema,subValidationResult2,subMatchingSchemas2),subValidationResult2.hasProblems()||matches.push(subSchema),bestMatch)if(maxOneMatch||subValidationResult2.hasProblems()||bestMatch.validationResult.hasProblems()){var compareResult=subValidationResult2.compare(bestMatch.validationResult);compareResult>0?bestMatch={schema:subSchema,validationResult:subValidationResult2,matchingSchemas:subMatchingSchemas2}:0===compareResult&&(bestMatch.matchingSchemas.merge(subMatchingSchemas2),bestMatch.validationResult.mergeEnumValues(subValidationResult2))}else bestMatch.matchingSchemas.merge(subMatchingSchemas2),bestMatch.validationResult.propertiesMatches+=subValidationResult2.propertiesMatches,bestMatch.validationResult.propertiesValueMatches+=subValidationResult2.propertiesValueMatches;else bestMatch={schema:subSchema,validationResult:subValidationResult2,matchingSchemas:subMatchingSchemas2}}return matches.length>1&&maxOneMatch&&validationResult.problems.push({location:{offset:node.offset,length:1},message:localize2("oneOfWarning","Matches multiple schemas when only one must validate.")}),bestMatch&&(validationResult.merge(bestMatch.validationResult),validationResult.propertiesMatches+=bestMatch.validationResult.propertiesMatches,validationResult.propertiesValueMatches+=bestMatch.validationResult.propertiesValueMatches,matchingSchemas.merge(bestMatch.matchingSchemas)),matches.length};Array.isArray(schema.anyOf)&&testAlternatives(schema.anyOf,!1);Array.isArray(schema.oneOf)&&testAlternatives(schema.oneOf,!0);var testBranch=function(schema2){var subValidationResult2=new ValidationResult,subMatchingSchemas2=matchingSchemas.newSub();validate(node,asSchema(schema2),subValidationResult2,subMatchingSchemas2),validationResult.merge(subValidationResult2),validationResult.propertiesMatches+=subValidationResult2.propertiesMatches,validationResult.propertiesValueMatches+=subValidationResult2.propertiesValueMatches,matchingSchemas.merge(subMatchingSchemas2)},ifSchema=asSchema(schema.if);ifSchema&&(ifSchema2=ifSchema,thenSchema=asSchema(schema.then),elseSchema=asSchema(schema.else),subSchema=asSchema(ifSchema2),subValidationResult2=new ValidationResult,subMatchingSchemas2=matchingSchemas.newSub(),validate(node,subSchema,subValidationResult2,subMatchingSchemas2),matchingSchemas.merge(subMatchingSchemas2),subValidationResult2.hasProblems()?elseSchema&&testBranch(elseSchema):thenSchema&&testBranch(thenSchema));var ifSchema2,thenSchema,elseSchema,subSchema,subValidationResult2,subMatchingSchemas2;if(Array.isArray(schema.enum)){for(var val=getNodeValue3(node),enumValueMatch=!1,_d=0,_e=schema.enum;_d<_e.length;_d++){if(equals(val,_e[_d])){enumValueMatch=!0;break}}validationResult.enumValues=schema.enum,validationResult.enumValueMatch=enumValueMatch,enumValueMatch||validationResult.problems.push({location:{offset:node.offset,length:node.length},code:ErrorCode.EnumValueMismatch,message:schema.errorMessage||localize2("enumWarning","Value is not accepted. Valid values: {0}.",schema.enum.map((function(v){return JSON.stringify(v)})).join(", "))})}if(isDefined(schema.const)){equals(val=getNodeValue3(node),schema.const)?validationResult.enumValueMatch=!0:(validationResult.problems.push({location:{offset:node.offset,length:node.length},code:ErrorCode.EnumValueMismatch,message:schema.errorMessage||localize2("constWarning","Value must be {0}.",JSON.stringify(schema.const))}),validationResult.enumValueMatch=!1),validationResult.enumValues=[schema.const]}schema.deprecationMessage&&node.parent&&validationResult.problems.push({location:{offset:node.parent.offset,length:node.parent.length},severity:DiagnosticSeverity.Warning,message:schema.deprecationMessage,code:ErrorCode.Deprecated})}(),matchingSchemas.add({node,schema})}}function parse3(textDocument,config){var problems=[],lastProblemOffset=-1,text=textDocument.getText(),scanner=createScanner2(text,!1),commentRanges=config&&config.collectComments?[]:void 0;function _scanNext(){for(;;){var token_1=scanner.scan();switch(_checkScanError(),token_1){case 12:case 13:Array.isArray(commentRanges)&&commentRanges.push(Range.create(textDocument.positionAt(scanner.getTokenOffset()),textDocument.positionAt(scanner.getTokenOffset()+scanner.getTokenLength())));break;case 15:case 14:break;default:return token_1}}}function _errorAtRange(message,code,startOffset,endOffset,severity){if(void 0===severity&&(severity=DiagnosticSeverity.Error),0===problems.length||startOffset!==lastProblemOffset){var range=Range.create(textDocument.positionAt(startOffset),textDocument.positionAt(endOffset));problems.push(Diagnostic.create(range,message,severity,code,textDocument.languageId)),lastProblemOffset=startOffset}}function _error(message,code,node,skipUntilAfter,skipUntil){void 0===node&&(node=void 0),void 0===skipUntilAfter&&(skipUntilAfter=[]),void 0===skipUntil&&(skipUntil=[]);var start=scanner.getTokenOffset(),end=scanner.getTokenOffset()+scanner.getTokenLength();if(start===end&&start>0){for(start--;start>0&&/\s/.test(text.charAt(start));)start--;end=start+1}if(_errorAtRange(message,code,start,end),node&&_finalize(node,!1),skipUntilAfter.length+skipUntil.length>0)for(var token_2=scanner.getToken();17!==token_2;){if(-1!==skipUntilAfter.indexOf(token_2)){_scanNext();break}if(-1!==skipUntil.indexOf(token_2))break;token_2=_scanNext()}return node}function _checkScanError(){switch(scanner.getTokenError()){case 4:return _error(localize2("InvalidUnicode","Invalid unicode sequence in string."),ErrorCode.InvalidUnicode),!0;case 5:return _error(localize2("InvalidEscapeCharacter","Invalid escape character in string."),ErrorCode.InvalidEscapeCharacter),!0;case 3:return _error(localize2("UnexpectedEndOfNumber","Unexpected end of number."),ErrorCode.UnexpectedEndOfNumber),!0;case 1:return _error(localize2("UnexpectedEndOfComment","Unexpected end of comment."),ErrorCode.UnexpectedEndOfComment),!0;case 2:return _error(localize2("UnexpectedEndOfString","Unexpected end of string."),ErrorCode.UnexpectedEndOfString),!0;case 6:return _error(localize2("InvalidCharacter","Invalid characters in string. Control characters must be escaped."),ErrorCode.InvalidCharacter),!0}return!1}function _finalize(node,scanNext){return node.length=scanner.getTokenOffset()+scanner.getTokenLength()-node.offset,scanNext&&_scanNext(),node}var keyPlaceholder=new StringASTNodeImpl(void 0,0,0);function _parseProperty(parent,keysSeen){var node=new PropertyASTNodeImpl(parent,scanner.getTokenOffset(),keyPlaceholder),key=_parseString(node);if(!key){if(16!==scanner.getToken())return;_error(localize2("DoubleQuotesExpected","Property keys must be doublequoted"),ErrorCode.Undefined);var keyNode=new StringASTNodeImpl(node,scanner.getTokenOffset(),scanner.getTokenLength());keyNode.value=scanner.getTokenValue(),key=keyNode,_scanNext()}node.keyNode=key;var seen=keysSeen[key.value];if(seen?(_errorAtRange(localize2("DuplicateKeyWarning","Duplicate object key"),ErrorCode.DuplicateKey,node.keyNode.offset,node.keyNode.offset+node.keyNode.length,DiagnosticSeverity.Warning),"object"==typeof seen&&_errorAtRange(localize2("DuplicateKeyWarning","Duplicate object key"),ErrorCode.DuplicateKey,seen.keyNode.offset,seen.keyNode.offset+seen.keyNode.length,DiagnosticSeverity.Warning),keysSeen[key.value]=!0):keysSeen[key.value]=node,6===scanner.getToken())node.colonOffset=scanner.getTokenOffset(),_scanNext();else if(_error(localize2("ColonExpected","Colon expected"),ErrorCode.ColonExpected),10===scanner.getToken()&&textDocument.positionAt(key.offset+key.length).line<textDocument.positionAt(scanner.getTokenOffset()).line)return node.length=key.length,node;var value=_parseValue(node);return value?(node.valueNode=value,node.length=value.offset+value.length-node.offset,node):_error(localize2("ValueExpected","Value expected"),ErrorCode.ValueExpected,node,[],[2,5])}function _parseString(parent){if(10===scanner.getToken()){var node=new StringASTNodeImpl(parent,scanner.getTokenOffset());return node.value=scanner.getTokenValue(),_finalize(node,!0)}}function _parseValue(parent){return function _parseArray(parent){if(3===scanner.getToken()){var node=new ArrayASTNodeImpl(parent,scanner.getTokenOffset());_scanNext();for(var needsComma=!1;4!==scanner.getToken()&&17!==scanner.getToken();){if(5===scanner.getToken()){needsComma||_error(localize2("ValueExpected","Value expected"),ErrorCode.ValueExpected);var commaOffset=scanner.getTokenOffset();if(_scanNext(),4===scanner.getToken()){needsComma&&_errorAtRange(localize2("TrailingComma","Trailing comma"),ErrorCode.TrailingComma,commaOffset,commaOffset+1);continue}}else needsComma&&_error(localize2("ExpectedComma","Expected comma"),ErrorCode.CommaExpected);var item=_parseValue(node);item?node.items.push(item):_error(localize2("PropertyExpected","Value expected"),ErrorCode.ValueExpected,void 0,[],[4,5]),needsComma=!0}return 4!==scanner.getToken()?_error(localize2("ExpectedCloseBracket","Expected comma or closing bracket"),ErrorCode.CommaOrCloseBacketExpected,node):_finalize(node,!0)}}(parent)||function _parseObject(parent){if(1===scanner.getToken()){var node=new ObjectASTNodeImpl(parent,scanner.getTokenOffset()),keysSeen=Object.create(null);_scanNext();for(var needsComma=!1;2!==scanner.getToken()&&17!==scanner.getToken();){if(5===scanner.getToken()){needsComma||_error(localize2("PropertyExpected","Property expected"),ErrorCode.PropertyExpected);var commaOffset=scanner.getTokenOffset();if(_scanNext(),2===scanner.getToken()){needsComma&&_errorAtRange(localize2("TrailingComma","Trailing comma"),ErrorCode.TrailingComma,commaOffset,commaOffset+1);continue}}else needsComma&&_error(localize2("ExpectedComma","Expected comma"),ErrorCode.CommaExpected);var property=_parseProperty(node,keysSeen);property?node.properties.push(property):_error(localize2("PropertyExpected","Property expected"),ErrorCode.PropertyExpected,void 0,[],[2,5]),needsComma=!0}return 2!==scanner.getToken()?_error(localize2("ExpectedCloseBrace","Expected comma or closing brace"),ErrorCode.CommaOrCloseBraceExpected,node):_finalize(node,!0)}}(parent)||_parseString(parent)||function _parseNumber(parent){if(11===scanner.getToken()){var node=new NumberASTNodeImpl(parent,scanner.getTokenOffset());if(0===scanner.getTokenError()){var tokenValue=scanner.getTokenValue();try{var numberValue=JSON.parse(tokenValue);if(!isNumber(numberValue))return _error(localize2("InvalidNumberFormat","Invalid number format."),ErrorCode.Undefined,node);node.value=numberValue}catch(e){return _error(localize2("InvalidNumberFormat","Invalid number format."),ErrorCode.Undefined,node)}node.isInteger=-1===tokenValue.indexOf(".")}return _finalize(node,!0)}}(parent)||function _parseLiteral(parent){switch(scanner.getToken()){case 7:return _finalize(new NullASTNodeImpl(parent,scanner.getTokenOffset()),!0);case 8:return _finalize(new BooleanASTNodeImpl(parent,!0,scanner.getTokenOffset()),!0);case 9:return _finalize(new BooleanASTNodeImpl(parent,!1,scanner.getTokenOffset()),!0);default:return}}(parent)}var _root=void 0;return 17!==_scanNext()&&((_root=_parseValue(_root))?17!==scanner.getToken()&&_error(localize2("End of file expected","End of file expected."),ErrorCode.Undefined):_error(localize2("Invalid symbol","Expected a JSON object, array or literal."),ErrorCode.Undefined)),new JSONDocument(_root,problems,commentRanges)}function stringifyObject(obj,indent,stringifyLiteral){if(null!==obj&&"object"==typeof obj){var newIndent=indent+"\t";if(Array.isArray(obj)){if(0===obj.length)return"[]";for(var result="[\n",i=0;i<obj.length;i++)result+=newIndent+stringifyObject(obj[i],newIndent,stringifyLiteral),i<obj.length-1&&(result+=","),result+="\n";return result+=indent+"]"}var keys=Object.keys(obj);if(0===keys.length)return"{}";for(result="{\n",i=0;i<keys.length;i++){var key=keys[i];result+=newIndent+JSON.stringify(key)+": "+stringifyObject(obj[key],newIndent,stringifyLiteral),i<keys.length-1&&(result+=","),result+="\n"}return result+=indent+"}"}return stringifyLiteral(obj)}var localize3=loadMessageBundle(),valueCommitCharacters=[",","}","]"],propertyCommitCharacters=[":"],JSONCompletion=function(){function JSONCompletion2(schemaService,contributions,promiseConstructor,clientCapabilities){void 0===contributions&&(contributions=[]),void 0===promiseConstructor&&(promiseConstructor=Promise),void 0===clientCapabilities&&(clientCapabilities={}),this.schemaService=schemaService,this.contributions=contributions,this.promiseConstructor=promiseConstructor,this.clientCapabilities=clientCapabilities}return JSONCompletion2.prototype.doResolve=function(item){for(var i=this.contributions.length-1;i>=0;i--){var resolveCompletion=this.contributions[i].resolveCompletion;if(resolveCompletion){var resolver=resolveCompletion(item);if(resolver)return resolver}}return this.promiseConstructor.resolve(item)},JSONCompletion2.prototype.doComplete=function(document,position,doc){var _this=this,result={items:[],isIncomplete:!1},text=document.getText(),offset=document.offsetAt(position),node=doc.getNodeFromOffset(offset,!0);if(this.isInComment(document,node?node.offset:0,offset))return Promise.resolve(result);if(node&&offset===node.offset+node.length&&offset>0){var ch=text[offset-1];("object"===node.type&&"}"===ch||"array"===node.type&&"]"===ch)&&(node=node.parent)}var overwriteRange,currentWord=this.getCurrentWord(document,offset);if(!node||"string"!==node.type&&"number"!==node.type&&"boolean"!==node.type&&"null"!==node.type){var overwriteStart=offset-currentWord.length;overwriteStart>0&&'"'===text[overwriteStart-1]&&overwriteStart--,overwriteRange=Range.create(document.positionAt(overwriteStart),position)}else overwriteRange=Range.create(document.positionAt(node.offset),document.positionAt(node.offset+node.length));var proposed={},collector={add:function(suggestion){var label=suggestion.label,existing=proposed[label];if(existing)existing.documentation||(existing.documentation=suggestion.documentation),existing.detail||(existing.detail=suggestion.detail);else{if((label=label.replace(/[\n]/g,"")).length>60){var shortendedLabel=label.substr(0,57).trim()+"...";proposed[shortendedLabel]||(label=shortendedLabel)}overwriteRange&&void 0!==suggestion.insertText&&(suggestion.textEdit=TextEdit.replace(overwriteRange,suggestion.insertText)),suggestion.label=label,proposed[label]=suggestion,result.items.push(suggestion)}},setAsIncomplete:function(){result.isIncomplete=!0},error:function(message){console.error(message)},log:function(message){console.log(message)},getNumberOfProposals:function(){return result.items.length}};return this.schemaService.getSchemaForResource(document.uri,doc).then((function(schema){var collectionPromises=[],addValue=!0,currentKey="",currentProperty=void 0;if(node&&"string"===node.type){var parent=node.parent;parent&&"property"===parent.type&&parent.keyNode===node&&(addValue=!parent.valueNode,currentProperty=parent,currentKey=text.substr(node.offset+1,node.length-2),parent&&(node=parent.parent))}if(node&&"object"===node.type){if(node.offset===offset)return result;node.properties.forEach((function(p){currentProperty&&currentProperty===p||(proposed[p.keyNode.value]=CompletionItem.create("__"))}));var separatorAfter_1="";addValue&&(separatorAfter_1=_this.evaluateSeparatorAfter(document,document.offsetAt(overwriteRange.end))),schema?_this.getPropertyCompletions(schema,doc,node,addValue,separatorAfter_1,collector):_this.getSchemaLessPropertyCompletions(doc,node,currentKey,collector);var location_1=getNodePath3(node);_this.contributions.forEach((function(contribution){var collectPromise=contribution.collectPropertyCompletions(document.uri,location_1,currentWord,addValue,""===separatorAfter_1,collector);collectPromise&&collectionPromises.push(collectPromise)})),!schema&&currentWord.length>0&&'"'!==text.charAt(offset-currentWord.length-1)&&(collector.add({kind:CompletionItemKind.Property,label:_this.getLabelForValue(currentWord),insertText:_this.getInsertTextForProperty(currentWord,void 0,!1,separatorAfter_1),insertTextFormat:InsertTextFormat.Snippet,documentation:""}),collector.setAsIncomplete())}var types={};return schema?_this.getValueCompletions(schema,doc,node,offset,document,collector,types):_this.getSchemaLessValueCompletions(doc,node,offset,document,collector),_this.contributions.length>0&&_this.getContributedValueCompletions(doc,node,offset,document,collector,collectionPromises),_this.promiseConstructor.all(collectionPromises).then((function(){if(0===collector.getNumberOfProposals()){var offsetForSeparator=offset;!node||"string"!==node.type&&"number"!==node.type&&"boolean"!==node.type&&"null"!==node.type||(offsetForSeparator=node.offset+node.length);var separatorAfter=_this.evaluateSeparatorAfter(document,offsetForSeparator);_this.addFillerValueCompletions(types,separatorAfter,collector)}return result}))}))},JSONCompletion2.prototype.getPropertyCompletions=function(schema,doc,node,addValue,separatorAfter,collector){var _this=this;doc.getMatchingSchemas(schema.schema,node.offset).forEach((function(s){if(s.node===node&&!s.inverted){var schemaProperties_1=s.schema.properties;schemaProperties_1&&Object.keys(schemaProperties_1).forEach((function(key){var propertySchema=schemaProperties_1[key];if("object"==typeof propertySchema&&!propertySchema.deprecationMessage&&!propertySchema.doNotSuggest){var proposal={kind:CompletionItemKind.Property,label:key,insertText:_this.getInsertTextForProperty(key,propertySchema,addValue,separatorAfter),insertTextFormat:InsertTextFormat.Snippet,filterText:_this.getFilterTextForValue(key),documentation:_this.fromMarkup(propertySchema.markdownDescription)||propertySchema.description||""};void 0!==propertySchema.suggestSortText&&(proposal.sortText=propertySchema.suggestSortText),proposal.insertText&&endsWith(proposal.insertText,"$1".concat(separatorAfter))&&(proposal.command={title:"Suggest",command:"editor.action.triggerSuggest"}),collector.add(proposal)}}));var schemaPropertyNames_1=s.schema.propertyNames;if("object"==typeof schemaPropertyNames_1&&!schemaPropertyNames_1.deprecationMessage&&!schemaPropertyNames_1.doNotSuggest){var propertyNameCompletionItem=function(name,enumDescription2){void 0===enumDescription2&&(enumDescription2=void 0);var proposal={kind:CompletionItemKind.Property,label:name,insertText:_this.getInsertTextForProperty(name,void 0,addValue,separatorAfter),insertTextFormat:InsertTextFormat.Snippet,filterText:_this.getFilterTextForValue(name),documentation:enumDescription2||_this.fromMarkup(schemaPropertyNames_1.markdownDescription)||schemaPropertyNames_1.description||""};void 0!==schemaPropertyNames_1.suggestSortText&&(proposal.sortText=schemaPropertyNames_1.suggestSortText),proposal.insertText&&endsWith(proposal.insertText,"$1".concat(separatorAfter))&&(proposal.command={title:"Suggest",command:"editor.action.triggerSuggest"}),collector.add(proposal)};if(schemaPropertyNames_1.enum)for(var i=0;i<schemaPropertyNames_1.enum.length;i++){var enumDescription=void 0;schemaPropertyNames_1.markdownEnumDescriptions&&i<schemaPropertyNames_1.markdownEnumDescriptions.length?enumDescription=_this.fromMarkup(schemaPropertyNames_1.markdownEnumDescriptions[i]):schemaPropertyNames_1.enumDescriptions&&i<schemaPropertyNames_1.enumDescriptions.length&&(enumDescription=schemaPropertyNames_1.enumDescriptions[i]),propertyNameCompletionItem(schemaPropertyNames_1.enum[i],enumDescription)}schemaPropertyNames_1.const&&propertyNameCompletionItem(schemaPropertyNames_1.const)}}}))},JSONCompletion2.prototype.getSchemaLessPropertyCompletions=function(doc,node,currentKey,collector){var _this=this,collectCompletionsForSimilarObject=function(obj){obj.properties.forEach((function(p){var key=p.keyNode.value;collector.add({kind:CompletionItemKind.Property,label:key,insertText:_this.getInsertTextForValue(key,""),insertTextFormat:InsertTextFormat.Snippet,filterText:_this.getFilterTextForValue(key),documentation:""})}))};if(node.parent)if("property"===node.parent.type){var parentKey_1=node.parent.keyNode.value;doc.visit((function(n){return"property"===n.type&&n!==node.parent&&n.keyNode.value===parentKey_1&&n.valueNode&&"object"===n.valueNode.type&&collectCompletionsForSimilarObject(n.valueNode),!0}))}else"array"===node.parent.type&&node.parent.items.forEach((function(n){"object"===n.type&&n!==node&&collectCompletionsForSimilarObject(n)}));else"object"===node.type&&collector.add({kind:CompletionItemKind.Property,label:"$schema",insertText:this.getInsertTextForProperty("$schema",void 0,!0,""),insertTextFormat:InsertTextFormat.Snippet,documentation:"",filterText:this.getFilterTextForValue("$schema")})},JSONCompletion2.prototype.getSchemaLessValueCompletions=function(doc,node,offset,document,collector){var _this=this,offsetForSeparator=offset;if(!node||"string"!==node.type&&"number"!==node.type&&"boolean"!==node.type&&"null"!==node.type||(offsetForSeparator=node.offset+node.length,node=node.parent),!node)return collector.add({kind:this.getSuggestionKind("object"),label:"Empty object",insertText:this.getInsertTextForValue({},""),insertTextFormat:InsertTextFormat.Snippet,documentation:""}),void collector.add({kind:this.getSuggestionKind("array"),label:"Empty array",insertText:this.getInsertTextForValue([],""),insertTextFormat:InsertTextFormat.Snippet,documentation:""});var separatorAfter=this.evaluateSeparatorAfter(document,offsetForSeparator),collectSuggestionsForValues=function(value){value.parent&&!contains2(value.parent,offset,!0)&&collector.add({kind:_this.getSuggestionKind(value.type),label:_this.getLabelTextForMatchingNode(value,document),insertText:_this.getInsertTextForMatchingNode(value,document,separatorAfter),insertTextFormat:InsertTextFormat.Snippet,documentation:""}),"boolean"===value.type&&_this.addBooleanValueCompletion(!value.value,separatorAfter,collector)};if("property"===node.type&&offset>(node.colonOffset||0)){var valueNode=node.valueNode;if(valueNode&&(offset>valueNode.offset+valueNode.length||"object"===valueNode.type||"array"===valueNode.type))return;var parentKey_2=node.keyNode.value;doc.visit((function(n){return"property"===n.type&&n.keyNode.value===parentKey_2&&n.valueNode&&collectSuggestionsForValues(n.valueNode),!0})),"$schema"===parentKey_2&&node.parent&&!node.parent.parent&&this.addDollarSchemaCompletions(separatorAfter,collector)}if("array"===node.type)if(node.parent&&"property"===node.parent.type){var parentKey_3=node.parent.keyNode.value;doc.visit((function(n){return"property"===n.type&&n.keyNode.value===parentKey_3&&n.valueNode&&"array"===n.valueNode.type&&n.valueNode.items.forEach(collectSuggestionsForValues),!0}))}else node.items.forEach(collectSuggestionsForValues)},JSONCompletion2.prototype.getValueCompletions=function(schema,doc,node,offset,document,collector,types){var offsetForSeparator=offset,parentKey=void 0,valueNode=void 0;if(!node||"string"!==node.type&&"number"!==node.type&&"boolean"!==node.type&&"null"!==node.type||(offsetForSeparator=node.offset+node.length,valueNode=node,node=node.parent),node){if("property"===node.type&&offset>(node.colonOffset||0)){var valueNode_1=node.valueNode;if(valueNode_1&&offset>valueNode_1.offset+valueNode_1.length)return;parentKey=node.keyNode.value,node=node.parent}if(node&&(void 0!==parentKey||"array"===node.type)){for(var separatorAfter=this.evaluateSeparatorAfter(document,offsetForSeparator),_i=0,matchingSchemas_1=doc.getMatchingSchemas(schema.schema,node.offset,valueNode);_i<matchingSchemas_1.length;_i++){var s=matchingSchemas_1[_i];if(s.node===node&&!s.inverted&&s.schema){if("array"===node.type&&s.schema.items)if(Array.isArray(s.schema.items)){var index=this.findItemAtOffset(node,document,offset);index<s.schema.items.length&&this.addSchemaValueCompletions(s.schema.items[index],separatorAfter,collector,types)}else this.addSchemaValueCompletions(s.schema.items,separatorAfter,collector,types);if(void 0!==parentKey){var propertyMatched=!1;if(s.schema.properties)(propertySchema=s.schema.properties[parentKey])&&(propertyMatched=!0,this.addSchemaValueCompletions(propertySchema,separatorAfter,collector,types));if(s.schema.patternProperties&&!propertyMatched)for(var _a=0,_b=Object.keys(s.schema.patternProperties);_a<_b.length;_a++){var pattern=_b[_a],regex=extendedRegExp(pattern);if(null==regex?void 0:regex.test(parentKey)){propertyMatched=!0;var propertySchema=s.schema.patternProperties[pattern];this.addSchemaValueCompletions(propertySchema,separatorAfter,collector,types)}}if(s.schema.additionalProperties&&!propertyMatched){propertySchema=s.schema.additionalProperties;this.addSchemaValueCompletions(propertySchema,separatorAfter,collector,types)}}}}"$schema"!==parentKey||node.parent||this.addDollarSchemaCompletions(separatorAfter,collector),types.boolean&&(this.addBooleanValueCompletion(!0,separatorAfter,collector),this.addBooleanValueCompletion(!1,separatorAfter,collector)),types.null&&this.addNullValueCompletion(separatorAfter,collector)}}else this.addSchemaValueCompletions(schema.schema,"",collector,types)},JSONCompletion2.prototype.getContributedValueCompletions=function(doc,node,offset,document,collector,collectionPromises){if(node){if("string"!==node.type&&"number"!==node.type&&"boolean"!==node.type&&"null"!==node.type||(node=node.parent),node&&"property"===node.type&&offset>(node.colonOffset||0)){var parentKey_4=node.keyNode.value,valueNode=node.valueNode;if((!valueNode||offset<=valueNode.offset+valueNode.length)&&node.parent){var location_2=getNodePath3(node.parent);this.contributions.forEach((function(contribution){var collectPromise=contribution.collectValueCompletions(document.uri,location_2,parentKey_4,collector);collectPromise&&collectionPromises.push(collectPromise)}))}}}else this.contributions.forEach((function(contribution){var collectPromise=contribution.collectDefaultCompletions(document.uri,collector);collectPromise&&collectionPromises.push(collectPromise)}))},JSONCompletion2.prototype.addSchemaValueCompletions=function(schema,separatorAfter,collector,types){var _this=this;"object"==typeof schema&&(this.addEnumValueCompletions(schema,separatorAfter,collector),this.addDefaultValueCompletions(schema,separatorAfter,collector),this.collectTypes(schema,types),Array.isArray(schema.allOf)&&schema.allOf.forEach((function(s){return _this.addSchemaValueCompletions(s,separatorAfter,collector,types)})),Array.isArray(schema.anyOf)&&schema.anyOf.forEach((function(s){return _this.addSchemaValueCompletions(s,separatorAfter,collector,types)})),Array.isArray(schema.oneOf)&&schema.oneOf.forEach((function(s){return _this.addSchemaValueCompletions(s,separatorAfter,collector,types)})))},JSONCompletion2.prototype.addDefaultValueCompletions=function(schema,separatorAfter,collector,arrayDepth){var _this=this;void 0===arrayDepth&&(arrayDepth=0);var hasProposals=!1;if(isDefined(schema.default)){for(var type=schema.type,value=schema.default,i=arrayDepth;i>0;i--)value=[value],type="array";collector.add({kind:this.getSuggestionKind(type),label:this.getLabelForValue(value),insertText:this.getInsertTextForValue(value,separatorAfter),insertTextFormat:InsertTextFormat.Snippet,detail:localize3("json.suggest.default","Default value")}),hasProposals=!0}Array.isArray(schema.examples)&&schema.examples.forEach((function(example){for(var type2=schema.type,value2=example,i2=arrayDepth;i2>0;i2--)value2=[value2],type2="array";collector.add({kind:_this.getSuggestionKind(type2),label:_this.getLabelForValue(value2),insertText:_this.getInsertTextForValue(value2,separatorAfter),insertTextFormat:InsertTextFormat.Snippet}),hasProposals=!0})),Array.isArray(schema.defaultSnippets)&&schema.defaultSnippets.forEach((function(s){var insertText,filterText,type2=schema.type,value2=s.body,label=s.label;if(isDefined(value2)){schema.type;for(var i2=arrayDepth;i2>0;i2--)value2=[value2],"array";insertText=_this.getInsertTextForSnippetValue(value2,separatorAfter),filterText=_this.getFilterTextForSnippetValue(value2),label=label||_this.getLabelForSnippetValue(value2)}else{if("string"!=typeof s.bodyText)return;var prefix="",suffix="",indent="";for(i2=arrayDepth;i2>0;i2--)prefix=prefix+indent+"[\n",suffix=suffix+"\n"+indent+"]",indent+="\t",type2="array";insertText=prefix+indent+s.bodyText.split("\n").join("\n"+indent)+suffix+separatorAfter,label=label||insertText,filterText=insertText.replace(/[\n]/g,"")}collector.add({kind:_this.getSuggestionKind(type2),label,documentation:_this.fromMarkup(s.markdownDescription)||s.description,insertText,insertTextFormat:InsertTextFormat.Snippet,filterText}),hasProposals=!0})),!hasProposals&&"object"==typeof schema.items&&!Array.isArray(schema.items)&&arrayDepth<5&&this.addDefaultValueCompletions(schema.items,separatorAfter,collector,arrayDepth+1)},JSONCompletion2.prototype.addEnumValueCompletions=function(schema,separatorAfter,collector){if(isDefined(schema.const)&&collector.add({kind:this.getSuggestionKind(schema.type),label:this.getLabelForValue(schema.const),insertText:this.getInsertTextForValue(schema.const,separatorAfter),insertTextFormat:InsertTextFormat.Snippet,documentation:this.fromMarkup(schema.markdownDescription)||schema.description}),Array.isArray(schema.enum))for(var i=0,length=schema.enum.length;i<length;i++){var enm=schema.enum[i],documentation=this.fromMarkup(schema.markdownDescription)||schema.description;schema.markdownEnumDescriptions&&i<schema.markdownEnumDescriptions.length&&this.doesSupportMarkdown()?documentation=this.fromMarkup(schema.markdownEnumDescriptions[i]):schema.enumDescriptions&&i<schema.enumDescriptions.length&&(documentation=schema.enumDescriptions[i]),collector.add({kind:this.getSuggestionKind(schema.type),label:this.getLabelForValue(enm),insertText:this.getInsertTextForValue(enm,separatorAfter),insertTextFormat:InsertTextFormat.Snippet,documentation})}},JSONCompletion2.prototype.collectTypes=function(schema,types){if(!Array.isArray(schema.enum)&&!isDefined(schema.const)){var type=schema.type;Array.isArray(type)?type.forEach((function(t){return types[t]=!0})):type&&(types[type]=!0)}},JSONCompletion2.prototype.addFillerValueCompletions=function(types,separatorAfter,collector){types.object&&collector.add({kind:this.getSuggestionKind("object"),label:"{}",insertText:this.getInsertTextForGuessedValue({},separatorAfter),insertTextFormat:InsertTextFormat.Snippet,detail:localize3("defaults.object","New object"),documentation:""}),types.array&&collector.add({kind:this.getSuggestionKind("array"),label:"[]",insertText:this.getInsertTextForGuessedValue([],separatorAfter),insertTextFormat:InsertTextFormat.Snippet,detail:localize3("defaults.array","New array"),documentation:""})},JSONCompletion2.prototype.addBooleanValueCompletion=function(value,separatorAfter,collector){collector.add({kind:this.getSuggestionKind("boolean"),label:value?"true":"false",insertText:this.getInsertTextForValue(value,separatorAfter),insertTextFormat:InsertTextFormat.Snippet,documentation:""})},JSONCompletion2.prototype.addNullValueCompletion=function(separatorAfter,collector){collector.add({kind:this.getSuggestionKind("null"),label:"null",insertText:"null"+separatorAfter,insertTextFormat:InsertTextFormat.Snippet,documentation:""})},JSONCompletion2.prototype.addDollarSchemaCompletions=function(separatorAfter,collector){var _this=this,schemaIds=this.schemaService.getRegisteredSchemaIds((function(schema){return"http"===schema||"https"===schema}));schemaIds.forEach((function(schemaId){return collector.add({kind:CompletionItemKind.Module,label:_this.getLabelForValue(schemaId),filterText:_this.getFilterTextForValue(schemaId),insertText:_this.getInsertTextForValue(schemaId,separatorAfter),insertTextFormat:InsertTextFormat.Snippet,documentation:""})}))},JSONCompletion2.prototype.getLabelForValue=function(value){return JSON.stringify(value)},JSONCompletion2.prototype.getFilterTextForValue=function(value){return JSON.stringify(value)},JSONCompletion2.prototype.getFilterTextForSnippetValue=function(value){return JSON.stringify(value).replace(/\$\{\d+:([^}]+)\}|\$\d+/g,"$1")},JSONCompletion2.prototype.getLabelForSnippetValue=function(value){return JSON.stringify(value).replace(/\$\{\d+:([^}]+)\}|\$\d+/g,"$1")},JSONCompletion2.prototype.getInsertTextForPlainText=function(text){return text.replace(/[\\\$\}]/g,"\\$&")},JSONCompletion2.prototype.getInsertTextForValue=function(value,separatorAfter){var text=JSON.stringify(value,null,"\t");return"{}"===text?"{$1}"+separatorAfter:"[]"===text?"[$1]"+separatorAfter:this.getInsertTextForPlainText(text+separatorAfter)},JSONCompletion2.prototype.getInsertTextForSnippetValue=function(value,separatorAfter){return stringifyObject(value,"",(function(value2){return"string"==typeof value2&&"^"===value2[0]?value2.substr(1):JSON.stringify(value2)}))+separatorAfter},JSONCompletion2.prototype.getInsertTextForGuessedValue=function(value,separatorAfter){switch(typeof value){case"object":return null===value?"${1:null}"+separatorAfter:this.getInsertTextForValue(value,separatorAfter);case"string":var snippetValue=JSON.stringify(value);return snippetValue=snippetValue.substr(1,snippetValue.length-2),'"${1:'+(snippetValue=this.getInsertTextForPlainText(snippetValue))+'}"'+separatorAfter;case"number":case"boolean":return"${1:"+JSON.stringify(value)+"}"+separatorAfter}return this.getInsertTextForValue(value,separatorAfter)},JSONCompletion2.prototype.getSuggestionKind=function(type){if(Array.isArray(type)){var array=type;type=array.length>0?array[0]:void 0}if(!type)return CompletionItemKind.Value;switch(type){case"string":default:return CompletionItemKind.Value;case"object":return CompletionItemKind.Module;case"property":return CompletionItemKind.Property}},JSONCompletion2.prototype.getLabelTextForMatchingNode=function(node,document){switch(node.type){case"array":return"[]";case"object":return"{}";default:return document.getText().substr(node.offset,node.length)}},JSONCompletion2.prototype.getInsertTextForMatchingNode=function(node,document,separatorAfter){switch(node.type){case"array":return this.getInsertTextForValue([],separatorAfter);case"object":return this.getInsertTextForValue({},separatorAfter);default:var content=document.getText().substr(node.offset,node.length)+separatorAfter;return this.getInsertTextForPlainText(content)}},JSONCompletion2.prototype.getInsertTextForProperty=function(key,propertySchema,addValue,separatorAfter){var propertyText=this.getInsertTextForValue(key,"");if(!addValue)return propertyText;var value,resultText=propertyText+": ",nValueProposals=0;if(propertySchema){if(Array.isArray(propertySchema.defaultSnippets)){if(1===propertySchema.defaultSnippets.length){var body=propertySchema.defaultSnippets[0].body;isDefined(body)&&(value=this.getInsertTextForSnippetValue(body,""))}nValueProposals+=propertySchema.defaultSnippets.length}if(propertySchema.enum&&(value||1!==propertySchema.enum.length||(value=this.getInsertTextForGuessedValue(propertySchema.enum[0],"")),nValueProposals+=propertySchema.enum.length),isDefined(propertySchema.default)&&(value||(value=this.getInsertTextForGuessedValue(propertySchema.default,"")),nValueProposals++),Array.isArray(propertySchema.examples)&&propertySchema.examples.length&&(value||(value=this.getInsertTextForGuessedValue(propertySchema.examples[0],"")),nValueProposals+=propertySchema.examples.length),0===nValueProposals){var type=Array.isArray(propertySchema.type)?propertySchema.type[0]:propertySchema.type;switch(type||(propertySchema.properties?type="object":propertySchema.items&&(type="array")),type){case"boolean":value="$1";break;case"string":value='"$1"';break;case"object":value="{$1}";break;case"array":value="[$1]";break;case"number":case"integer":value="${1:0}";break;case"null":value="${1:null}";break;default:return propertyText}}}return(!value||nValueProposals>1)&&(value="$1"),resultText+value+separatorAfter},JSONCompletion2.prototype.getCurrentWord=function(document,offset){for(var i=offset-1,text=document.getText();i>=0&&-1===' \t\n\r\v":{[,]}'.indexOf(text.charAt(i));)i--;return text.substring(i+1,offset)},JSONCompletion2.prototype.evaluateSeparatorAfter=function(document,offset){var scanner=createScanner2(document.getText(),!0);switch(scanner.setPosition(offset),scanner.scan()){case 5:case 2:case 4:case 17:return"";default:return","}},JSONCompletion2.prototype.findItemAtOffset=function(node,document,offset){for(var scanner=createScanner2(document.getText(),!0),children=node.items,i=children.length-1;i>=0;i--){var child=children[i];if(offset>child.offset+child.length)return scanner.setPosition(child.offset+child.length),5===scanner.scan()&&offset>=scanner.getTokenOffset()+scanner.getTokenLength()?i+1:i;if(offset>=child.offset)return i}return 0},JSONCompletion2.prototype.isInComment=function(document,start,offset){var scanner=createScanner2(document.getText(),!1);scanner.setPosition(start);for(var token=scanner.scan();17!==token&&scanner.getTokenOffset()+scanner.getTokenLength()<offset;)token=scanner.scan();return(12===token||13===token)&&scanner.getTokenOffset()<=offset},JSONCompletion2.prototype.fromMarkup=function(markupString){if(markupString&&this.doesSupportMarkdown())return{kind:MarkupKind.Markdown,value:markupString}},JSONCompletion2.prototype.doesSupportMarkdown=function(){if(!isDefined(this.supportsMarkdown)){var completion=this.clientCapabilities.textDocument&&this.clientCapabilities.textDocument.completion;this.supportsMarkdown=completion&&completion.completionItem&&Array.isArray(completion.completionItem.documentationFormat)&&-1!==completion.completionItem.documentationFormat.indexOf(MarkupKind.Markdown)}return this.supportsMarkdown},JSONCompletion2.prototype.doesSupportsCommitCharacters=function(){if(!isDefined(this.supportsCommitCharacters)){var completion=this.clientCapabilities.textDocument&&this.clientCapabilities.textDocument.completion;this.supportsCommitCharacters=completion&&completion.completionItem&&!!completion.completionItem.commitCharactersSupport}return this.supportsCommitCharacters},JSONCompletion2}(),JSONHover=function(){function JSONHover2(schemaService,contributions,promiseConstructor){void 0===contributions&&(contributions=[]),this.schemaService=schemaService,this.contributions=contributions,this.promise=promiseConstructor||Promise}return JSONHover2.prototype.doHover=function(document,position,doc){var offset=document.offsetAt(position),node=doc.getNodeFromOffset(offset);if(!node||("object"===node.type||"array"===node.type)&&offset>node.offset+1&&offset<node.offset+node.length-1)return this.promise.resolve(null);var hoverRangeNode=node;if("string"===node.type){var parent=node.parent;if(parent&&"property"===parent.type&&parent.keyNode===node&&!(node=parent.valueNode))return this.promise.resolve(null)}for(var hoverRange=Range.create(document.positionAt(hoverRangeNode.offset),document.positionAt(hoverRangeNode.offset+hoverRangeNode.length)),createHover=function(contents){return{contents,range:hoverRange}},location=getNodePath3(node),i=this.contributions.length-1;i>=0;i--){var promise=this.contributions[i].getInfoContribution(document.uri,location);if(promise)return promise.then((function(htmlContent){return createHover(htmlContent)}))}return this.schemaService.getSchemaForResource(document.uri,doc).then((function(schema){if(schema&&node){var matchingSchemas=doc.getMatchingSchemas(schema.schema,node.offset),title_1=void 0,markdownDescription_1=void 0,markdownEnumValueDescription_1=void 0,enumValue_1=void 0;matchingSchemas.every((function(s){if(s.node===node&&!s.inverted&&s.schema&&(title_1=title_1||s.schema.title,markdownDescription_1=markdownDescription_1||s.schema.markdownDescription||toMarkdown(s.schema.description),s.schema.enum)){var idx=s.schema.enum.indexOf(getNodeValue3(node));s.schema.markdownEnumDescriptions?markdownEnumValueDescription_1=s.schema.markdownEnumDescriptions[idx]:s.schema.enumDescriptions&&(markdownEnumValueDescription_1=toMarkdown(s.schema.enumDescriptions[idx])),markdownEnumValueDescription_1&&"string"!=typeof(enumValue_1=s.schema.enum[idx])&&(enumValue_1=JSON.stringify(enumValue_1))}return!0}));var result="";return title_1&&(result=toMarkdown(title_1)),markdownDescription_1&&(result.length>0&&(result+="\n\n"),result+=markdownDescription_1),markdownEnumValueDescription_1&&(result.length>0&&(result+="\n\n"),result+="`".concat(toMarkdownCodeBlock(enumValue_1),"`: ").concat(markdownEnumValueDescription_1)),createHover([result])}return null}))},JSONHover2}();function toMarkdown(plain){if(plain)return plain.replace(/([^\n\r])(\r?\n)([^\n\r])/gm,"$1\n\n$3").replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}function toMarkdownCodeBlock(content){return-1!==content.indexOf("`")?"`` "+content+" ``":content}var localize4=loadMessageBundle(),JSONValidation=function(){function JSONValidation2(jsonSchemaService,promiseConstructor){this.jsonSchemaService=jsonSchemaService,this.promise=promiseConstructor,this.validationEnabled=!0}return JSONValidation2.prototype.configure=function(raw){raw&&(this.validationEnabled=!1!==raw.validate,this.commentSeverity=raw.allowComments?void 0:DiagnosticSeverity.Error)},JSONValidation2.prototype.doValidation=function(textDocument,jsonDocument,documentSettings,schema){var _this=this;if(!this.validationEnabled)return this.promise.resolve([]);var diagnostics=[],added={},addProblem=function(problem){var signature=problem.range.start.line+" "+problem.range.start.character+" "+problem.message;added[signature]||(added[signature]=!0,diagnostics.push(problem))},getDiagnostics=function(schema2){var trailingCommaSeverity=(null==documentSettings?void 0:documentSettings.trailingCommas)?toDiagnosticSeverity(documentSettings.trailingCommas):DiagnosticSeverity.Error,commentSeverity=(null==documentSettings?void 0:documentSettings.comments)?toDiagnosticSeverity(documentSettings.comments):_this.commentSeverity,schemaValidation=(null==documentSettings?void 0:documentSettings.schemaValidation)?toDiagnosticSeverity(documentSettings.schemaValidation):DiagnosticSeverity.Warning,schemaRequest=(null==documentSettings?void 0:documentSettings.schemaRequest)?toDiagnosticSeverity(documentSettings.schemaRequest):DiagnosticSeverity.Warning;if(schema2){if(schema2.errors.length&&jsonDocument.root&&schemaRequest){var astRoot=jsonDocument.root,property="object"===astRoot.type?astRoot.properties[0]:void 0;if(property&&"$schema"===property.keyNode.value){var node=property.valueNode||property,range=Range.create(textDocument.positionAt(node.offset),textDocument.positionAt(node.offset+node.length));addProblem(Diagnostic.create(range,schema2.errors[0],schemaRequest,ErrorCode.SchemaResolveError))}else{range=Range.create(textDocument.positionAt(astRoot.offset),textDocument.positionAt(astRoot.offset+1));addProblem(Diagnostic.create(range,schema2.errors[0],schemaRequest,ErrorCode.SchemaResolveError))}}else if(schemaValidation){var semanticErrors=jsonDocument.validate(textDocument,schema2.schema,schemaValidation);semanticErrors&&semanticErrors.forEach(addProblem)}schemaAllowsComments(schema2.schema)&&(commentSeverity=void 0),schemaAllowsTrailingCommas(schema2.schema)&&(trailingCommaSeverity=void 0)}for(var _i=0,_a=jsonDocument.syntaxErrors;_i<_a.length;_i++){var p=_a[_i];if(p.code===ErrorCode.TrailingComma){if("number"!=typeof trailingCommaSeverity)continue;p.severity=trailingCommaSeverity}addProblem(p)}if("number"==typeof commentSeverity){var message_1=localize4("InvalidCommentToken","Comments are not permitted in JSON.");jsonDocument.comments.forEach((function(c){addProblem(Diagnostic.create(c,message_1,commentSeverity,ErrorCode.CommentNotPermitted))}))}return diagnostics};if(schema){var id=schema.id||"schemaservice://untitled/"+idCounter++;return this.jsonSchemaService.registerExternalSchema(id,[],schema).getResolvedSchema().then((function(resolvedSchema){return getDiagnostics(resolvedSchema)}))}return this.jsonSchemaService.getSchemaForResource(textDocument.uri,jsonDocument).then((function(schema2){return getDiagnostics(schema2)}))},JSONValidation2.prototype.getLanguageStatus=function(textDocument,jsonDocument){return{schemas:this.jsonSchemaService.getSchemaURIsForResource(textDocument.uri,jsonDocument)}},JSONValidation2}(),idCounter=0;function schemaAllowsComments(schemaRef){if(schemaRef&&"object"==typeof schemaRef){if(isBoolean(schemaRef.allowComments))return schemaRef.allowComments;if(schemaRef.allOf)for(var _i=0,_a=schemaRef.allOf;_i<_a.length;_i++){var allow=schemaAllowsComments(_a[_i]);if(isBoolean(allow))return allow}}}function schemaAllowsTrailingCommas(schemaRef){if(schemaRef&&"object"==typeof schemaRef){if(isBoolean(schemaRef.allowTrailingCommas))return schemaRef.allowTrailingCommas;var deprSchemaRef=schemaRef;if(isBoolean(deprSchemaRef.allowsTrailingCommas))return deprSchemaRef.allowsTrailingCommas;if(schemaRef.allOf)for(var _i=0,_a=schemaRef.allOf;_i<_a.length;_i++){var allow=schemaAllowsTrailingCommas(_a[_i]);if(isBoolean(allow))return allow}}}function toDiagnosticSeverity(severityLevel){switch(severityLevel){case"error":return DiagnosticSeverity.Error;case"warning":return DiagnosticSeverity.Warning;case"ignore":return}}var Digit0=48,Digit9=57,A=65,a=97,f=102;function hexDigit(charCode){return charCode<Digit0?0:charCode<=Digit9?charCode-Digit0:(charCode<a&&(charCode+=a-A),charCode>=a&&charCode<=f?charCode-a+10:0)}function colorFromHex(text){if("#"===text[0])switch(text.length){case 4:return{red:17*hexDigit(text.charCodeAt(1))/255,green:17*hexDigit(text.charCodeAt(2))/255,blue:17*hexDigit(text.charCodeAt(3))/255,alpha:1};case 5:return{red:17*hexDigit(text.charCodeAt(1))/255,green:17*hexDigit(text.charCodeAt(2))/255,blue:17*hexDigit(text.charCodeAt(3))/255,alpha:17*hexDigit(text.charCodeAt(4))/255};case 7:return{red:(16*hexDigit(text.charCodeAt(1))+hexDigit(text.charCodeAt(2)))/255,green:(16*hexDigit(text.charCodeAt(3))+hexDigit(text.charCodeAt(4)))/255,blue:(16*hexDigit(text.charCodeAt(5))+hexDigit(text.charCodeAt(6)))/255,alpha:1};case 9:return{red:(16*hexDigit(text.charCodeAt(1))+hexDigit(text.charCodeAt(2)))/255,green:(16*hexDigit(text.charCodeAt(3))+hexDigit(text.charCodeAt(4)))/255,blue:(16*hexDigit(text.charCodeAt(5))+hexDigit(text.charCodeAt(6)))/255,alpha:(16*hexDigit(text.charCodeAt(7))+hexDigit(text.charCodeAt(8)))/255}}}var JSONDocumentSymbols=function(){function JSONDocumentSymbols2(schemaService){this.schemaService=schemaService}return JSONDocumentSymbols2.prototype.findDocumentSymbols=function(document,doc,context){var _this=this;void 0===context&&(context={resultLimit:Number.MAX_VALUE});var root=doc.root;if(!root)return[];var limit=context.resultLimit||Number.MAX_VALUE,resourceString=document.uri;if(("vscode://defaultsettings/keybindings.json"===resourceString||endsWith(resourceString.toLowerCase(),"/user/keybindings.json"))&&"array"===root.type){for(var result_1=[],_i=0,_a=root.items;_i<_a.length;_i++){var item=_a[_i];if("object"===item.type)for(var _b=0,_c=item.properties;_b<_c.length;_b++){var property=_c[_b];if("key"===property.keyNode.value&&property.valueNode){var location=Location.create(document.uri,getRange(document,item));if(result_1.push({name:getNodeValue3(property.valueNode),kind:SymbolKind.Function,location}),--limit<=0)return context&&context.onResultLimitExceeded&&context.onResultLimitExceeded(resourceString),result_1}}}return result_1}for(var toVisit=[{node:root,containerName:""}],nextToVisit=0,limitExceeded=!1,result=[],collectOutlineEntries=function(node,containerName){"array"===node.type?node.items.forEach((function(node2){node2&&toVisit.push({node:node2,containerName})})):"object"===node.type&&node.properties.forEach((function(property2){var valueNode=property2.valueNode;if(valueNode)if(limit>0){limit--;var location2=Location.create(document.uri,getRange(document,property2)),childContainerName=containerName?containerName+"."+property2.keyNode.value:property2.keyNode.value;result.push({name:_this.getKeyLabel(property2),kind:_this.getSymbolKind(valueNode.type),location:location2,containerName}),toVisit.push({node:valueNode,containerName:childContainerName})}else limitExceeded=!0}))};nextToVisit<toVisit.length;){var next=toVisit[nextToVisit++];collectOutlineEntries(next.node,next.containerName)}return limitExceeded&&context&&context.onResultLimitExceeded&&context.onResultLimitExceeded(resourceString),result},JSONDocumentSymbols2.prototype.findDocumentSymbols2=function(document,doc,context){var _this=this;void 0===context&&(context={resultLimit:Number.MAX_VALUE});var root=doc.root;if(!root)return[];var limit=context.resultLimit||Number.MAX_VALUE,resourceString=document.uri;if(("vscode://defaultsettings/keybindings.json"===resourceString||endsWith(resourceString.toLowerCase(),"/user/keybindings.json"))&&"array"===root.type){for(var result_2=[],_i=0,_a=root.items;_i<_a.length;_i++){var item=_a[_i];if("object"===item.type)for(var _b=0,_c=item.properties;_b<_c.length;_b++){var property=_c[_b];if("key"===property.keyNode.value&&property.valueNode){var range=getRange(document,item),selectionRange=getRange(document,property.keyNode);if(result_2.push({name:getNodeValue3(property.valueNode),kind:SymbolKind.Function,range,selectionRange}),--limit<=0)return context&&context.onResultLimitExceeded&&context.onResultLimitExceeded(resourceString),result_2}}}return result_2}for(var result=[],toVisit=[{node:root,result}],nextToVisit=0,limitExceeded=!1,collectOutlineEntries=function(node,result2){"array"===node.type?node.items.forEach((function(node2,index){if(node2)if(limit>0){limit--;var range2=getRange(document,node2),selectionRange2=range2,symbol={name:String(index),kind:_this.getSymbolKind(node2.type),range:range2,selectionRange:selectionRange2,children:[]};result2.push(symbol),toVisit.push({result:symbol.children,node:node2})}else limitExceeded=!0})):"object"===node.type&&node.properties.forEach((function(property2){var valueNode=property2.valueNode;if(valueNode)if(limit>0){limit--;var range2=getRange(document,property2),selectionRange2=getRange(document,property2.keyNode),children=[],symbol={name:_this.getKeyLabel(property2),kind:_this.getSymbolKind(valueNode.type),range:range2,selectionRange:selectionRange2,children,detail:_this.getDetail(valueNode)};result2.push(symbol),toVisit.push({result:children,node:valueNode})}else limitExceeded=!0}))};nextToVisit<toVisit.length;){var next=toVisit[nextToVisit++];collectOutlineEntries(next.node,next.result)}return limitExceeded&&context&&context.onResultLimitExceeded&&context.onResultLimitExceeded(resourceString),result},JSONDocumentSymbols2.prototype.getSymbolKind=function(nodeType){switch(nodeType){case"object":return SymbolKind.Module;case"string":return SymbolKind.String;case"number":return SymbolKind.Number;case"array":return SymbolKind.Array;case"boolean":return SymbolKind.Boolean;default:return SymbolKind.Variable}},JSONDocumentSymbols2.prototype.getKeyLabel=function(property){var name=property.keyNode.value;return name&&(name=name.replace(/[\n]/g,"")),name&&name.trim()?name:'"'.concat(name,'"')},JSONDocumentSymbols2.prototype.getDetail=function(node){if(node)return"boolean"===node.type||"number"===node.type||"null"===node.type||"string"===node.type?String(node.value):"array"===node.type?node.children.length?void 0:"[]":"object"===node.type?node.children.length?void 0:"{}":void 0},JSONDocumentSymbols2.prototype.findDocumentColors=function(document,doc,context){return this.schemaService.getSchemaForResource(document.uri,doc).then((function(schema){var result=[];if(schema)for(var limit=context&&"number"==typeof context.resultLimit?context.resultLimit:Number.MAX_VALUE,visitedNode={},_i=0,matchingSchemas_1=doc.getMatchingSchemas(schema.schema);_i<matchingSchemas_1.length;_i++){var s=matchingSchemas_1[_i];if(!s.inverted&&s.schema&&("color"===s.schema.format||"color-hex"===s.schema.format)&&s.node&&"string"===s.node.type){var nodeId=String(s.node.offset);if(!visitedNode[nodeId]){var color=colorFromHex(getNodeValue3(s.node));if(color){var range=getRange(document,s.node);result.push({color,range})}if(visitedNode[nodeId]=!0,--limit<=0)return context&&context.onResultLimitExceeded&&context.onResultLimitExceeded(document.uri),result}}}return result}))},JSONDocumentSymbols2.prototype.getColorPresentations=function(document,doc,color,range){var label,result=[],red256=Math.round(255*color.red),green256=Math.round(255*color.green),blue256=Math.round(255*color.blue);function toTwoDigitHex(n){var r=n.toString(16);return 2!==r.length?"0"+r:r}return label=1===color.alpha?"#".concat(toTwoDigitHex(red256)).concat(toTwoDigitHex(green256)).concat(toTwoDigitHex(blue256)):"#".concat(toTwoDigitHex(red256)).concat(toTwoDigitHex(green256)).concat(toTwoDigitHex(blue256)).concat(toTwoDigitHex(Math.round(255*color.alpha))),result.push({label,textEdit:TextEdit.replace(range,JSON.stringify(label))}),result},JSONDocumentSymbols2}();function getRange(document,node){return Range.create(document.positionAt(node.offset),document.positionAt(node.offset+node.length))}var schema,propertyObject,description,property,schemaName,LIB,localize5=loadMessageBundle(),schemaContributions={schemaAssociations:[],schemas:{"http://json-schema.org/schema#":{$ref:"http://json-schema.org/draft-07/schema#"},"http://json-schema.org/draft-04/schema#":{$schema:"http://json-schema.org/draft-04/schema#",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},positiveInteger:{type:"integer",minimum:0},positiveIntegerDefault0:{allOf:[{$ref:"#/definitions/positiveInteger"},{default:0}]},simpleTypes:{type:"string",enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},minItems:1,uniqueItems:!0}},type:"object",properties:{id:{type:"string",format:"uri"},$schema:{type:"string",format:"uri"},title:{type:"string"},description:{type:"string"},default:{},multipleOf:{type:"number",minimum:0,exclusiveMinimum:!0},maximum:{type:"number"},exclusiveMaximum:{type:"boolean",default:!1},minimum:{type:"number"},exclusiveMinimum:{type:"boolean",default:!1},maxLength:{allOf:[{$ref:"#/definitions/positiveInteger"}]},minLength:{allOf:[{$ref:"#/definitions/positiveIntegerDefault0"}]},pattern:{type:"string",format:"regex"},additionalItems:{anyOf:[{type:"boolean"},{$ref:"#"}],default:{}},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:{}},maxItems:{allOf:[{$ref:"#/definitions/positiveInteger"}]},minItems:{allOf:[{$ref:"#/definitions/positiveIntegerDefault0"}]},uniqueItems:{type:"boolean",default:!1},maxProperties:{allOf:[{$ref:"#/definitions/positiveInteger"}]},minProperties:{allOf:[{$ref:"#/definitions/positiveIntegerDefault0"}]},required:{allOf:[{$ref:"#/definitions/stringArray"}]},additionalProperties:{anyOf:[{type:"boolean"},{$ref:"#"}],default:{}},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},enum:{type:"array",minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{anyOf:[{type:"string",enum:["date-time","uri","email","hostname","ipv4","ipv6","regex"]},{type:"string"}]},allOf:{allOf:[{$ref:"#/definitions/schemaArray"}]},anyOf:{allOf:[{$ref:"#/definitions/schemaArray"}]},oneOf:{allOf:[{$ref:"#/definitions/schemaArray"}]},not:{allOf:[{$ref:"#"}]}},dependencies:{exclusiveMaximum:["maximum"],exclusiveMinimum:["minimum"]},default:{}},"http://json-schema.org/draft-07/schema#":{definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}}},descriptions={id:localize5("schema.json.id","A unique identifier for the schema."),$schema:localize5("schema.json.$schema","The schema to verify this document against."),title:localize5("schema.json.title","A descriptive title of the element."),description:localize5("schema.json.description","A long description of the element. Used in hover menus and suggestions."),default:localize5("schema.json.default","A default value. Used by suggestions."),multipleOf:localize5("schema.json.multipleOf","A number that should cleanly divide the current value (i.e. have no remainder)."),maximum:localize5("schema.json.maximum","The maximum numerical value, inclusive by default."),exclusiveMaximum:localize5("schema.json.exclusiveMaximum","Makes the maximum property exclusive."),minimum:localize5("schema.json.minimum","The minimum numerical value, inclusive by default."),exclusiveMinimum:localize5("schema.json.exclusiveMininum","Makes the minimum property exclusive."),maxLength:localize5("schema.json.maxLength","The maximum length of a string."),minLength:localize5("schema.json.minLength","The minimum length of a string."),pattern:localize5("schema.json.pattern","A regular expression to match the string against. It is not implicitly anchored."),additionalItems:localize5("schema.json.additionalItems","For arrays, only when items is set as an array. If it is a schema, then this schema validates items after the ones specified by the items array. If it is false, then additional items will cause validation to fail."),items:localize5("schema.json.items","For arrays. Can either be a schema to validate every element against or an array of schemas to validate each item against in order (the first schema will validate the first element, the second schema will validate the second element, and so on."),maxItems:localize5("schema.json.maxItems","The maximum number of items that can be inside an array. Inclusive."),minItems:localize5("schema.json.minItems","The minimum number of items that can be inside an array. Inclusive."),uniqueItems:localize5("schema.json.uniqueItems","If all of the items in the array must be unique. Defaults to false."),maxProperties:localize5("schema.json.maxProperties","The maximum number of properties an object can have. Inclusive."),minProperties:localize5("schema.json.minProperties","The minimum number of properties an object can have. Inclusive."),required:localize5("schema.json.required","An array of strings that lists the names of all properties required on this object."),additionalProperties:localize5("schema.json.additionalProperties","Either a schema or a boolean. If a schema, then used to validate all properties not matched by 'properties' or 'patternProperties'. If false, then any properties not matched by either will cause this schema to fail."),definitions:localize5("schema.json.definitions","Not used for validation. Place subschemas here that you wish to reference inline with $ref."),properties:localize5("schema.json.properties","A map of property names to schemas for each property."),patternProperties:localize5("schema.json.patternProperties","A map of regular expressions on property names to schemas for matching properties."),dependencies:localize5("schema.json.dependencies","A map of property names to either an array of property names or a schema. An array of property names means the property named in the key depends on the properties in the array being present in the object in order to be valid. If the value is a schema, then the schema is only applied to the object if the property in the key exists on the object."),enum:localize5("schema.json.enum","The set of literal values that are valid."),type:localize5("schema.json.type","Either a string of one of the basic schema types (number, integer, null, array, object, boolean, string) or an array of strings specifying a subset of those types."),format:localize5("schema.json.format","Describes the format expected for the value."),allOf:localize5("schema.json.allOf","An array of schemas, all of which must match."),anyOf:localize5("schema.json.anyOf","An array of schemas, where at least one must match."),oneOf:localize5("schema.json.oneOf","An array of schemas, exactly one of which must match."),not:localize5("schema.json.not","A schema which must not match."),$id:localize5("schema.json.$id","A unique identifier for the schema."),$ref:localize5("schema.json.$ref","Reference a definition hosted on any location."),$comment:localize5("schema.json.$comment","Comments from schema authors to readers or maintainers of the schema."),readOnly:localize5("schema.json.readOnly","Indicates that the value of the instance is managed exclusively by the owning authority."),examples:localize5("schema.json.examples","Sample JSON values associated with a particular schema, for the purpose of illustrating usage."),contains:localize5("schema.json.contains",'An array instance is valid against "contains" if at least one of its elements is valid against the given schema.'),propertyNames:localize5("schema.json.propertyNames","If the instance is an object, this keyword validates if every property name in the instance validates against the provided schema."),const:localize5("schema.json.const","An instance validates successfully against this keyword if its value is equal to the value of the keyword."),contentMediaType:localize5("schema.json.contentMediaType","Describes the media type of a string property."),contentEncoding:localize5("schema.json.contentEncoding","Describes the content encoding of a string property."),if:localize5("schema.json.if",'The validation outcome of the "if" subschema controls which of the "then" or "else" keywords are evaluated.'),then:localize5("schema.json.then",'The "if" subschema is used for validation when the "if" subschema succeeds.'),else:localize5("schema.json.else",'The "else" subschema is used for validation when the "if" subschema fails.')};for(schemaName in schemaContributions.schemas)for(property in(schema=schemaContributions.schemas[schemaName]).properties)"boolean"==typeof(propertyObject=schema.properties[property])&&(propertyObject=schema.properties[property]={}),(description=descriptions[property])?propertyObject.description=description:console.log("".concat(property,": localize('schema.json.").concat(property,'\', "")'));LIB=(()=>{"use strict";var t={470:t2=>{function e2(t3){if("string"!=typeof t3)throw new TypeError("Path must be a string. Received "+JSON.stringify(t3))}function r2(t3,e3){for(var r3,n2="",o=0,i=-1,a2=0,h=0;h<=t3.length;++h){if(h<t3.length)r3=t3.charCodeAt(h);else{if(47===r3)break;r3=47}if(47===r3){if(i===h-1||1===a2);else if(i!==h-1&&2===a2){if(n2.length<2||2!==o||46!==n2.charCodeAt(n2.length-1)||46!==n2.charCodeAt(n2.length-2))if(n2.length>2){var s=n2.lastIndexOf("/");if(s!==n2.length-1){-1===s?(n2="",o=0):o=(n2=n2.slice(0,s)).length-1-n2.lastIndexOf("/"),i=h,a2=0;continue}}else if(2===n2.length||1===n2.length){n2="",o=0,i=h,a2=0;continue}e3&&(n2.length>0?n2+="/..":n2="..",o=2)}else n2.length>0?n2+="/"+t3.slice(i+1,h):n2=t3.slice(i+1,h),o=h-i-1;i=h,a2=0}else 46===r3&&-1!==a2?++a2:a2=-1}return n2}var n={resolve:function(){for(var t3,n2="",o=!1,i=arguments.length-1;i>=-1&&!o;i--){var a2;i>=0?a2=arguments[i]:(void 0===t3&&(t3=process.cwd()),a2=t3),e2(a2),0!==a2.length&&(n2=a2+"/"+n2,o=47===a2.charCodeAt(0))}return n2=r2(n2,!o),o?n2.length>0?"/"+n2:"/":n2.length>0?n2:"."},normalize:function(t3){if(e2(t3),0===t3.length)return".";var n2=47===t3.charCodeAt(0),o=47===t3.charCodeAt(t3.length-1);return 0!==(t3=r2(t3,!n2)).length||n2||(t3="."),t3.length>0&&o&&(t3+="/"),n2?"/"+t3:t3},isAbsolute:function(t3){return e2(t3),t3.length>0&&47===t3.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var t3,r3=0;r3<arguments.length;++r3){var o=arguments[r3];e2(o),o.length>0&&(void 0===t3?t3=o:t3+="/"+o)}return void 0===t3?".":n.normalize(t3)},relative:function(t3,r3){if(e2(t3),e2(r3),t3===r3)return"";if((t3=n.resolve(t3))===(r3=n.resolve(r3)))return"";for(var o=1;o<t3.length&&47===t3.charCodeAt(o);++o);for(var i=t3.length,a2=i-o,h=1;h<r3.length&&47===r3.charCodeAt(h);++h);for(var s=r3.length-h,c=a2<s?a2:s,f2=-1,u=0;u<=c;++u){if(u===c){if(s>c){if(47===r3.charCodeAt(h+u))return r3.slice(h+u+1);if(0===u)return r3.slice(h+u)}else a2>c&&(47===t3.charCodeAt(o+u)?f2=u:0===u&&(f2=0));break}var l=t3.charCodeAt(o+u);if(l!==r3.charCodeAt(h+u))break;47===l&&(f2=u)}var p="";for(u=o+f2+1;u<=i;++u)u!==i&&47!==t3.charCodeAt(u)||(0===p.length?p+="..":p+="/..");return p.length>0?p+r3.slice(h+f2):(h+=f2,47===r3.charCodeAt(h)&&++h,r3.slice(h))},_makeLong:function(t3){return t3},dirname:function(t3){if(e2(t3),0===t3.length)return".";for(var r3=t3.charCodeAt(0),n2=47===r3,o=-1,i=!0,a2=t3.length-1;a2>=1;--a2)if(47===(r3=t3.charCodeAt(a2))){if(!i){o=a2;break}}else i=!1;return-1===o?n2?"/":".":n2&&1===o?"//":t3.slice(0,o)},basename:function(t3,r3){if(void 0!==r3&&"string"!=typeof r3)throw new TypeError('"ext" argument must be a string');e2(t3);var n2,o=0,i=-1,a2=!0;if(void 0!==r3&&r3.length>0&&r3.length<=t3.length){if(r3.length===t3.length&&r3===t3)return"";var h=r3.length-1,s=-1;for(n2=t3.length-1;n2>=0;--n2){var c=t3.charCodeAt(n2);if(47===c){if(!a2){o=n2+1;break}}else-1===s&&(a2=!1,s=n2+1),h>=0&&(c===r3.charCodeAt(h)?-1==--h&&(i=n2):(h=-1,i=s))}return o===i?i=s:-1===i&&(i=t3.length),t3.slice(o,i)}for(n2=t3.length-1;n2>=0;--n2)if(47===t3.charCodeAt(n2)){if(!a2){o=n2+1;break}}else-1===i&&(a2=!1,i=n2+1);return-1===i?"":t3.slice(o,i)},extname:function(t3){e2(t3);for(var r3=-1,n2=0,o=-1,i=!0,a2=0,h=t3.length-1;h>=0;--h){var s=t3.charCodeAt(h);if(47!==s)-1===o&&(i=!1,o=h+1),46===s?-1===r3?r3=h:1!==a2&&(a2=1):-1!==r3&&(a2=-1);else if(!i){n2=h+1;break}}return-1===r3||-1===o||0===a2||1===a2&&r3===o-1&&r3===n2+1?"":t3.slice(r3,o)},format:function(t3){if(null===t3||"object"!=typeof t3)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t3);return r3=(e3=t3).dir||e3.root,n2=e3.base||(e3.name||"")+(e3.ext||""),r3?r3===e3.root?r3+n2:r3+"/"+n2:n2;var e3,r3,n2},parse:function(t3){e2(t3);var r3={root:"",dir:"",base:"",ext:"",name:""};if(0===t3.length)return r3;var n2,o=t3.charCodeAt(0),i=47===o;i?(r3.root="/",n2=1):n2=0;for(var a2=-1,h=0,s=-1,c=!0,f2=t3.length-1,u=0;f2>=n2;--f2)if(47!==(o=t3.charCodeAt(f2)))-1===s&&(c=!1,s=f2+1),46===o?-1===a2?a2=f2:1!==u&&(u=1):-1!==a2&&(u=-1);else if(!c){h=f2+1;break}return-1===a2||-1===s||0===u||1===u&&a2===s-1&&a2===h+1?-1!==s&&(r3.base=r3.name=0===h&&i?t3.slice(1,s):t3.slice(h,s)):(0===h&&i?(r3.name=t3.slice(1,a2),r3.base=t3.slice(1,s)):(r3.name=t3.slice(h,a2),r3.base=t3.slice(h,s)),r3.ext=t3.slice(a2,s)),h>0?r3.dir=t3.slice(0,h-1):i&&(r3.dir="/"),r3},sep:"/",delimiter:":",win32:null,posix:null};n.posix=n,t2.exports=n},447:(t2,e2,r2)=>{var n;if(r2.r(e2),r2.d(e2,{URI:()=>d,Utils:()=>P}),"object"==typeof process)n="win32"===process.platform;else if("object"==typeof navigator){var o=navigator.userAgent;n=o.indexOf("Windows")>=0}var i,a2,h=(i=function(t3,e3){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t4,e4){t4.__proto__=e4}||function(t4,e4){for(var r3 in e4)Object.prototype.hasOwnProperty.call(e4,r3)&&(t4[r3]=e4[r3])})(t3,e3)},function(t3,e3){if("function"!=typeof e3&&null!==e3)throw new TypeError("Class extends value "+String(e3)+" is not a constructor or null");function r3(){this.constructor=t3}i(t3,e3),t3.prototype=null===e3?Object.create(e3):(r3.prototype=e3.prototype,new r3)}),s=/^\w[\w\d+.-]*$/,c=/^\//,f2=/^\/\//;function u(t3,e3){if(!t3.scheme&&e3)throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'.concat(t3.authority,'", path: "').concat(t3.path,'", query: "').concat(t3.query,'", fragment: "').concat(t3.fragment,'"}'));if(t3.scheme&&!s.test(t3.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t3.path)if(t3.authority){if(!c.test(t3.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(f2.test(t3.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}var l="",p="/",g=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,d=function(){function t3(t4,e3,r3,n2,o2,i2){var t5,e4;void 0===i2&&(i2=!1),"object"==typeof t4?(this.scheme=t4.scheme||l,this.authority=t4.authority||l,this.path=t4.path||l,this.query=t4.query||l,this.fragment=t4.fragment||l):(this.scheme=(e4=i2,(t5=t4)||e4?t5:"file"),this.authority=e3||l,this.path=function(t5,e4){switch(t5){case"https":case"http":case"file":e4?e4[0]!==p&&(e4=p+e4):e4=p}return e4}(this.scheme,r3||l),this.query=n2||l,this.fragment=o2||l,u(this,i2))}return t3.isUri=function(e3){return e3 instanceof t3||!!e3&&"string"==typeof e3.authority&&"string"==typeof e3.fragment&&"string"==typeof e3.path&&"string"==typeof e3.query&&"string"==typeof e3.scheme&&"string"==typeof e3.fsPath&&"function"==typeof e3.with&&"function"==typeof e3.toString},Object.defineProperty(t3.prototype,"fsPath",{get:function(){return A2(this,!1)},enumerable:!1,configurable:!0}),t3.prototype.with=function(t4){if(!t4)return this;var e3=t4.scheme,r3=t4.authority,n2=t4.path,o2=t4.query,i2=t4.fragment;return void 0===e3?e3=this.scheme:null===e3&&(e3=l),void 0===r3?r3=this.authority:null===r3&&(r3=l),void 0===n2?n2=this.path:null===n2&&(n2=l),void 0===o2?o2=this.query:null===o2&&(o2=l),void 0===i2?i2=this.fragment:null===i2&&(i2=l),e3===this.scheme&&r3===this.authority&&n2===this.path&&o2===this.query&&i2===this.fragment?this:new y(e3,r3,n2,o2,i2)},t3.parse=function(t4,e3){void 0===e3&&(e3=!1);var r3=g.exec(t4);return r3?new y(r3[2]||l,O(r3[4]||l),O(r3[5]||l),O(r3[7]||l),O(r3[9]||l),e3):new y(l,l,l,l,l)},t3.file=function(t4){var e3=l;if(n&&(t4=t4.replace(/\\/g,p)),t4[0]===p&&t4[1]===p){var r3=t4.indexOf(p,2);-1===r3?(e3=t4.substring(2),t4=p):(e3=t4.substring(2,r3),t4=t4.substring(r3)||p)}return new y("file",e3,t4,l,l)},t3.from=function(t4){var e3=new y(t4.scheme,t4.authority,t4.path,t4.query,t4.fragment);return u(e3,!0),e3},t3.prototype.toString=function(t4){return void 0===t4&&(t4=!1),w(this,t4)},t3.prototype.toJSON=function(){return this},t3.revive=function(e3){if(e3){if(e3 instanceof t3)return e3;var r3=new y(e3);return r3._formatted=e3.external,r3._fsPath=e3._sep===v?e3.fsPath:null,r3}return e3},t3}(),v=n?1:void 0,y=function(t3){function e3(){var e4=null!==t3&&t3.apply(this,arguments)||this;return e4._formatted=null,e4._fsPath=null,e4}return h(e3,t3),Object.defineProperty(e3.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=A2(this,!1)),this._fsPath},enumerable:!1,configurable:!0}),e3.prototype.toString=function(t4){return void 0===t4&&(t4=!1),t4?w(this,!0):(this._formatted||(this._formatted=w(this,!1)),this._formatted)},e3.prototype.toJSON=function(){var t4={$mid:1};return this._fsPath&&(t4.fsPath=this._fsPath,t4._sep=v),this._formatted&&(t4.external=this._formatted),this.path&&(t4.path=this.path),this.scheme&&(t4.scheme=this.scheme),this.authority&&(t4.authority=this.authority),this.query&&(t4.query=this.query),this.fragment&&(t4.fragment=this.fragment),t4},e3}(d),m=((a2={})[58]="%3A",a2[47]="%2F",a2[63]="%3F",a2[35]="%23",a2[91]="%5B",a2[93]="%5D",a2[64]="%40",a2[33]="%21",a2[36]="%24",a2[38]="%26",a2[39]="%27",a2[40]="%28",a2[41]="%29",a2[42]="%2A",a2[43]="%2B",a2[44]="%2C",a2[59]="%3B",a2[61]="%3D",a2[32]="%20",a2);function b(t3,e3){for(var r3=void 0,n2=-1,o2=0;o2<t3.length;o2++){var i2=t3.charCodeAt(o2);if(i2>=97&&i2<=122||i2>=65&&i2<=90||i2>=48&&i2<=57||45===i2||46===i2||95===i2||126===i2||e3&&47===i2)-1!==n2&&(r3+=encodeURIComponent(t3.substring(n2,o2)),n2=-1),void 0!==r3&&(r3+=t3.charAt(o2));else{void 0===r3&&(r3=t3.substr(0,o2));var a3=m[i2];void 0!==a3?(-1!==n2&&(r3+=encodeURIComponent(t3.substring(n2,o2)),n2=-1),r3+=a3):-1===n2&&(n2=o2)}}return-1!==n2&&(r3+=encodeURIComponent(t3.substring(n2))),void 0!==r3?r3:t3}function C(t3){for(var e3=void 0,r3=0;r3<t3.length;r3++){var n2=t3.charCodeAt(r3);35===n2||63===n2?(void 0===e3&&(e3=t3.substr(0,r3)),e3+=m[n2]):void 0!==e3&&(e3+=t3[r3])}return void 0!==e3?e3:t3}function A2(t3,e3){var r3;return r3=t3.authority&&t3.path.length>1&&"file"===t3.scheme?"//".concat(t3.authority).concat(t3.path):47===t3.path.charCodeAt(0)&&(t3.path.charCodeAt(1)>=65&&t3.path.charCodeAt(1)<=90||t3.path.charCodeAt(1)>=97&&t3.path.charCodeAt(1)<=122)&&58===t3.path.charCodeAt(2)?e3?t3.path.substr(1):t3.path[1].toLowerCase()+t3.path.substr(2):t3.path,n&&(r3=r3.replace(/\//g,"\\")),r3}function w(t3,e3){var r3=e3?C:b,n2="",o2=t3.scheme,i2=t3.authority,a3=t3.path,h2=t3.query,s2=t3.fragment;if(o2&&(n2+=o2,n2+=":"),(i2||"file"===o2)&&(n2+=p,n2+=p),i2){var c2=i2.indexOf("@");if(-1!==c2){var f3=i2.substr(0,c2);i2=i2.substr(c2+1),-1===(c2=f3.indexOf(":"))?n2+=r3(f3,!1):(n2+=r3(f3.substr(0,c2),!1),n2+=":",n2+=r3(f3.substr(c2+1),!1)),n2+="@"}-1===(c2=(i2=i2.toLowerCase()).indexOf(":"))?n2+=r3(i2,!1):(n2+=r3(i2.substr(0,c2),!1),n2+=i2.substr(c2))}if(a3){if(a3.length>=3&&47===a3.charCodeAt(0)&&58===a3.charCodeAt(2))(u2=a3.charCodeAt(1))>=65&&u2<=90&&(a3="/".concat(String.fromCharCode(u2+32),":").concat(a3.substr(3)));else if(a3.length>=2&&58===a3.charCodeAt(1)){var u2;(u2=a3.charCodeAt(0))>=65&&u2<=90&&(a3="".concat(String.fromCharCode(u2+32),":").concat(a3.substr(2)))}n2+=r3(a3,!0)}return h2&&(n2+="?",n2+=r3(h2,!1)),s2&&(n2+="#",n2+=e3?s2:b(s2,!1)),n2}function x(t3){try{return decodeURIComponent(t3)}catch(e3){return t3.length>3?t3.substr(0,3)+x(t3.substr(3)):t3}}var _=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function O(t3){return t3.match(_)?t3.replace(_,(function(t4){return x(t4)})):t3}var P,t3,j=r2(470),U=function(t3,e3,r3){if(r3||2===arguments.length)for(var n2,o2=0,i2=e3.length;o2<i2;o2++)!n2&&o2 in e3||(n2||(n2=Array.prototype.slice.call(e3,0,o2)),n2[o2]=e3[o2]);return t3.concat(n2||Array.prototype.slice.call(e3))},I=j.posix||j;(t3=P||(P={})).joinPath=function(t4){for(var e3=[],r3=1;r3<arguments.length;r3++)e3[r3-1]=arguments[r3];return t4.with({path:I.join.apply(I,U([t4.path],e3,!1))})},t3.resolvePath=function(t4){for(var e3=[],r3=1;r3<arguments.length;r3++)e3[r3-1]=arguments[r3];var n2=t4.path||"/";return t4.with({path:I.resolve.apply(I,U([n2],e3,!1))})},t3.dirname=function(t4){var e3=I.dirname(t4.path);return 1===e3.length&&46===e3.charCodeAt(0)?t4:t4.with({path:e3})},t3.basename=function(t4){return I.basename(t4.path)},t3.extname=function(t4){return I.extname(t4.path)}}},e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={exports:{}};return t[n](o,o.exports,r),o.exports}return r.d=(t2,e2)=>{for(var n in e2)r.o(e2,n)&&!r.o(t2,n)&&Object.defineProperty(t2,n,{enumerable:!0,get:e2[n]})},r.o=(t2,e2)=>Object.prototype.hasOwnProperty.call(t2,e2),r.r=t2=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t2,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t2,"__esModule",{value:!0})},r(447)})();var{URI,Utils}=LIB;function createRegex(glob,opts){if("string"!=typeof glob)throw new TypeError("Expected a string");for(var c,str=String(glob),reStr="",extended=!!opts&&!!opts.extended,globstar=!!opts&&!!opts.globstar,inGroup=!1,flags=opts&&"string"==typeof opts.flags?opts.flags:"",i=0,len=str.length;i<len;i++)switch(c=str[i]){case"/":case"$":case"^":case"+":case".":case"(":case")":case"=":case"!":case"|":reStr+="\\"+c;break;case"?":if(extended){reStr+=".";break}case"[":case"]":if(extended){reStr+=c;break}case"{":if(extended){inGroup=!0,reStr+="(";break}case"}":if(extended){inGroup=!1,reStr+=")";break}case",":if(inGroup){reStr+="|";break}reStr+="\\"+c;break;case"*":for(var prevChar=str[i-1],starCount=1;"*"===str[i+1];)starCount++,i++;var nextChar=str[i+1];if(globstar)starCount>1&&("/"===prevChar||void 0===prevChar||"{"===prevChar||","===prevChar)&&("/"===nextChar||void 0===nextChar||","===nextChar||"}"===nextChar)?("/"===nextChar?i++:"/"===prevChar&&reStr.endsWith("\\/")&&(reStr=reStr.substr(0,reStr.length-2)),reStr+="((?:[^/]*(?:/|$))*)"):reStr+="([^/]*)";else reStr+=".*";break;default:reStr+=c}return flags&&~flags.indexOf("g")||(reStr="^"+reStr+"$"),new RegExp(reStr,flags)}var defaultSchemaRequestService,localize6=loadMessageBundle(),BANG="!",PATH_SEP="/",FilePatternAssociation=function(){function FilePatternAssociation2(pattern,uris){this.globWrappers=[];try{for(var _i=0,pattern_1=pattern;_i<pattern_1.length;_i++){var patternString=pattern_1[_i],include=patternString[0]!==BANG;include||(patternString=patternString.substring(1)),patternString.length>0&&(patternString[0]===PATH_SEP&&(patternString=patternString.substring(1)),this.globWrappers.push({regexp:createRegex("**/"+patternString,{extended:!0,globstar:!0}),include}))}this.uris=uris}catch(e){this.globWrappers.length=0,this.uris=[]}}return FilePatternAssociation2.prototype.matchesPattern=function(fileName){for(var match=!1,_i=0,_a=this.globWrappers;_i<_a.length;_i++){var _b=_a[_i],regexp=_b.regexp,include=_b.include;regexp.test(fileName)&&(match=include)}return match},FilePatternAssociation2.prototype.getURIs=function(){return this.uris},FilePatternAssociation2}(),SchemaHandle=function(){function SchemaHandle2(service,uri,unresolvedSchemaContent){this.service=service,this.uri=uri,this.dependencies=new Set,this.anchors=void 0,unresolvedSchemaContent&&(this.unresolvedSchema=this.service.promise.resolve(new UnresolvedSchema(unresolvedSchemaContent)))}return SchemaHandle2.prototype.getUnresolvedSchema=function(){return this.unresolvedSchema||(this.unresolvedSchema=this.service.loadSchema(this.uri)),this.unresolvedSchema},SchemaHandle2.prototype.getResolvedSchema=function(){var _this=this;return this.resolvedSchema||(this.resolvedSchema=this.getUnresolvedSchema().then((function(unresolved){return _this.service.resolveSchemaContent(unresolved,_this)}))),this.resolvedSchema},SchemaHandle2.prototype.clearSchema=function(){var hasChanges=!!this.unresolvedSchema;return this.resolvedSchema=void 0,this.unresolvedSchema=void 0,this.dependencies.clear(),this.anchors=void 0,hasChanges},SchemaHandle2}(),UnresolvedSchema=function UnresolvedSchema2(schema,errors){void 0===errors&&(errors=[]),this.schema=schema,this.errors=errors},ResolvedSchema=function(){function ResolvedSchema2(schema,errors){void 0===errors&&(errors=[]),this.schema=schema,this.errors=errors}return ResolvedSchema2.prototype.getSection=function(path){var schemaRef=this.getSectionRecursive(path,this.schema);if(schemaRef)return asSchema(schemaRef)},ResolvedSchema2.prototype.getSectionRecursive=function(path,schema){if(!schema||"boolean"==typeof schema||0===path.length)return schema;var next=path.shift();if(schema.properties&&(schema.properties[next],1))return this.getSectionRecursive(path,schema.properties[next]);if(schema.patternProperties)for(var _i=0,_a=Object.keys(schema.patternProperties);_i<_a.length;_i++){var pattern=_a[_i],regex=extendedRegExp(pattern);if(null==regex?void 0:regex.test(next))return this.getSectionRecursive(path,schema.patternProperties[pattern])}else{if("object"==typeof schema.additionalProperties)return this.getSectionRecursive(path,schema.additionalProperties);if(next.match("[0-9]+"))if(Array.isArray(schema.items)){var index=parseInt(next,10);if(!isNaN(index)&&schema.items[index])return this.getSectionRecursive(path,schema.items[index])}else if(schema.items)return this.getSectionRecursive(path,schema.items)}},ResolvedSchema2}(),JSONSchemaService=function(){function JSONSchemaService2(requestService,contextService,promiseConstructor){this.contextService=contextService,this.requestService=requestService,this.promiseConstructor=promiseConstructor||Promise,this.callOnDispose=[],this.contributionSchemas={},this.contributionAssociations=[],this.schemasById={},this.filePatternAssociations=[],this.registeredSchemasIds={}}return JSONSchemaService2.prototype.getRegisteredSchemaIds=function(filter){return Object.keys(this.registeredSchemasIds).filter((function(id){var scheme=URI.parse(id).scheme;return"schemaservice"!==scheme&&(!filter||filter(scheme))}))},Object.defineProperty(JSONSchemaService2.prototype,"promise",{get:function(){return this.promiseConstructor},enumerable:!1,configurable:!0}),JSONSchemaService2.prototype.dispose=function(){for(;this.callOnDispose.length>0;)this.callOnDispose.pop()()},JSONSchemaService2.prototype.onResourceChange=function(uri){var _this=this;this.cachedSchemaForResource=void 0;for(var hasChanges=!1,toWalk=[uri=normalizeId(uri)],all=Object.keys(this.schemasById).map((function(key){return _this.schemasById[key]}));toWalk.length;)for(var curr=toWalk.pop(),i=0;i<all.length;i++){var handle=all[i];handle&&(handle.uri===curr||handle.dependencies.has(curr))&&(handle.uri!==curr&&toWalk.push(handle.uri),handle.clearSchema()&&(hasChanges=!0),all[i]=void 0)}return hasChanges},JSONSchemaService2.prototype.setSchemaContributions=function(schemaContributions2){if(schemaContributions2.schemas){var schemas=schemaContributions2.schemas;for(var id in schemas){var normalizedId=normalizeId(id);this.contributionSchemas[normalizedId]=this.addSchemaHandle(normalizedId,schemas[id])}}if(Array.isArray(schemaContributions2.schemaAssociations))for(var _i=0,schemaAssociations_1=schemaContributions2.schemaAssociations;_i<schemaAssociations_1.length;_i++){var schemaAssociation=schemaAssociations_1[_i],uris=schemaAssociation.uris.map(normalizeId),association=this.addFilePatternAssociation(schemaAssociation.pattern,uris);this.contributionAssociations.push(association)}},JSONSchemaService2.prototype.addSchemaHandle=function(id,unresolvedSchemaContent){var schemaHandle=new SchemaHandle(this,id,unresolvedSchemaContent);return this.schemasById[id]=schemaHandle,schemaHandle},JSONSchemaService2.prototype.getOrAddSchemaHandle=function(id,unresolvedSchemaContent){return this.schemasById[id]||this.addSchemaHandle(id,unresolvedSchemaContent)},JSONSchemaService2.prototype.addFilePatternAssociation=function(pattern,uris){var fpa=new FilePatternAssociation(pattern,uris);return this.filePatternAssociations.push(fpa),fpa},JSONSchemaService2.prototype.registerExternalSchema=function(uri,filePatterns,unresolvedSchemaContent){var id=normalizeId(uri);return this.registeredSchemasIds[id]=!0,this.cachedSchemaForResource=void 0,filePatterns&&this.addFilePatternAssociation(filePatterns,[id]),unresolvedSchemaContent?this.addSchemaHandle(id,unresolvedSchemaContent):this.getOrAddSchemaHandle(id)},JSONSchemaService2.prototype.clearExternalSchemas=function(){for(var id in this.schemasById={},this.filePatternAssociations=[],this.registeredSchemasIds={},this.cachedSchemaForResource=void 0,this.contributionSchemas)this.schemasById[id]=this.contributionSchemas[id],this.registeredSchemasIds[id]=!0;for(var _i=0,_a=this.contributionAssociations;_i<_a.length;_i++){var contributionAssociation=_a[_i];this.filePatternAssociations.push(contributionAssociation)}},JSONSchemaService2.prototype.getResolvedSchema=function(schemaId){var id=normalizeId(schemaId),schemaHandle=this.schemasById[id];return schemaHandle?schemaHandle.getResolvedSchema():this.promise.resolve(void 0)},JSONSchemaService2.prototype.loadSchema=function(url){if(!this.requestService){var errorMessage=localize6("json.schema.norequestservice","Unable to load schema from '{0}'. No schema request service available",toDisplayString(url));return this.promise.resolve(new UnresolvedSchema({},[errorMessage]))}return this.requestService(url).then((function(content){if(!content){var errorMessage2=localize6("json.schema.nocontent","Unable to load schema from '{0}': No content.",toDisplayString(url));return new UnresolvedSchema({},[errorMessage2])}var schemaContent,jsonErrors=[];schemaContent=parse2(content,jsonErrors);var errors=jsonErrors.length?[localize6("json.schema.invalidFormat","Unable to parse content from '{0}': Parse error at offset {1}.",toDisplayString(url),jsonErrors[0].offset)]:[];return new UnresolvedSchema(schemaContent,errors)}),(function(error){var errorMessage2=error.toString(),errorSplit=error.toString().split("Error: ");return errorSplit.length>1&&(errorMessage2=errorSplit[1]),endsWith(errorMessage2,".")&&(errorMessage2=errorMessage2.substr(0,errorMessage2.length-1)),new UnresolvedSchema({},[localize6("json.schema.nocontent","Unable to load schema from '{0}': {1}.",toDisplayString(url),errorMessage2)])}))},JSONSchemaService2.prototype.resolveSchemaContent=function(schemaToResolve,handle){var _this=this,resolveErrors=schemaToResolve.errors.slice(0),schema=schemaToResolve.schema;if(schema.$schema){var id=normalizeId(schema.$schema);if("http://json-schema.org/draft-03/schema"===id)return this.promise.resolve(new ResolvedSchema({},[localize6("json.schema.draft03.notsupported","Draft-03 schemas are not supported.")]));"https://json-schema.org/draft/2019-09/schema"===id?resolveErrors.push(localize6("json.schema.draft201909.notsupported","Draft 2019-09 schemas are not yet fully supported.")):"https://json-schema.org/draft/2020-12/schema"===id&&resolveErrors.push(localize6("json.schema.draft202012.notsupported","Draft 2020-12 schemas are not yet fully supported."))}var contextService=this.contextService,mergeRef=function(target,sourceRoot,sourceHandle,refSegment){var section,schema2,handle2,id2;void 0===refSegment||0===refSegment.length?section=sourceRoot:"/"===refSegment.charAt(0)?section=function(schema2,path){path=decodeURIComponent(path);var current=schema2;return"/"===path[0]&&(path=path.substring(1)),path.split("/").some((function(part){return part=part.replace(/~1/g,"/").replace(/~0/g,"~"),!(current=current[part])})),current}(sourceRoot,refSegment):(schema2=sourceRoot,id2=refSegment,(handle2=sourceHandle).anchors||(handle2.anchors=collectAnchors(schema2)),section=handle2.anchors.get(id2)),section?function(target,section){for(var key in section)section.hasOwnProperty(key)&&!target.hasOwnProperty(key)&&"id"!==key&&"$id"!==key&&(target[key]=section[key])}(target,section):resolveErrors.push(localize6("json.schema.invalidid","$ref '{0}' in '{1}' can not be resolved.",refSegment,sourceHandle.uri))},resolveExternalLink=function(node,uri,refSegment,parentHandle){contextService&&!/^[A-Za-z][A-Za-z0-9+\-.+]*:\/\/.*/.test(uri)&&(uri=contextService.resolveRelativePath(uri,parentHandle.uri)),uri=normalizeId(uri);var referencedHandle=_this.getOrAddSchemaHandle(uri);return referencedHandle.getUnresolvedSchema().then((function(unresolvedSchema){if(parentHandle.dependencies.add(uri),unresolvedSchema.errors.length){var loc=refSegment?uri+"#"+refSegment:uri;resolveErrors.push(localize6("json.schema.problemloadingref","Problems loading reference '{0}': {1}",loc,unresolvedSchema.errors[0]))}return mergeRef(node,unresolvedSchema.schema,referencedHandle,refSegment),resolveRefs(node,unresolvedSchema.schema,referencedHandle)}))},resolveRefs=function(node,parentSchema,parentHandle){var openPromises=[];return _this.traverseNodes(node,(function(next){for(var seenRefs=new Set;next.$ref;){var ref=next.$ref,segments=ref.split("#",2);if(delete next.$ref,segments[0].length>0)return void openPromises.push(resolveExternalLink(next,segments[0],segments[1],parentHandle));if(!seenRefs.has(ref)){var id2=segments[1];mergeRef(next,parentSchema,parentHandle,id2),seenRefs.add(ref)}}})),_this.promise.all(openPromises)},collectAnchors=function(root){var result=new Map;return _this.traverseNodes(root,(function(next){var id2=next.$id||next.id;if("string"==typeof id2&&"#"===id2.charAt(0)){var anchor=id2.substring(1);result.has(anchor)?resolveErrors.push(localize6("json.schema.duplicateid","Duplicate id declaration: '{0}'",id2)):result.set(anchor,next)}})),result};return resolveRefs(schema,schema,handle).then((function(_){return new ResolvedSchema(schema,resolveErrors)}))},JSONSchemaService2.prototype.traverseNodes=function(root,handle){if(!root||"object"!=typeof root)return Promise.resolve(null);for(var seen=new Set,collectEntries=function(){for(var entries=[],_i=0;_i<arguments.length;_i++)entries[_i]=arguments[_i];for(var _a=0,entries_1=entries;_a<entries_1.length;_a++){var entry=entries_1[_a];"object"==typeof entry&&toWalk.push(entry)}},collectMapEntries=function(){for(var maps=[],_i=0;_i<arguments.length;_i++)maps[_i]=arguments[_i];for(var _a=0,maps_1=maps;_a<maps_1.length;_a++){var map=maps_1[_a];if("object"==typeof map)for(var k in map){var entry=map[k];"object"==typeof entry&&toWalk.push(entry)}}},collectArrayEntries=function(){for(var arrays=[],_i=0;_i<arguments.length;_i++)arrays[_i]=arguments[_i];for(var _a=0,arrays_1=arrays;_a<arrays_1.length;_a++){var array=arrays_1[_a];if(Array.isArray(array))for(var _b=0,array_1=array;_b<array_1.length;_b++){var entry=array_1[_b];"object"==typeof entry&&toWalk.push(entry)}}},toWalk=[root],next=toWalk.pop();next;)seen.has(next)||(seen.add(next),handle(next),collectEntries(next.items,next.additionalItems,next.additionalProperties,next.not,next.contains,next.propertyNames,next.if,next.then,next.else),collectMapEntries(next.definitions,next.properties,next.patternProperties,next.dependencies),collectArrayEntries(next.anyOf,next.allOf,next.oneOf,next.items)),next=toWalk.pop()},JSONSchemaService2.prototype.getSchemaFromProperty=function(resource,document){var _a,_b;if("object"===(null===(_a=document.root)||void 0===_a?void 0:_a.type))for(var _i=0,_c=document.root.properties;_i<_c.length;_i++){var p=_c[_i];if("$schema"===p.keyNode.value&&"string"===(null===(_b=p.valueNode)||void 0===_b?void 0:_b.type)){var schemaId=p.valueNode.value;return this.contextService&&!/^\w[\w\d+.-]*:/.test(schemaId)&&(schemaId=this.contextService.resolveRelativePath(schemaId,resource)),schemaId}}},JSONSchemaService2.prototype.getAssociatedSchemas=function(resource){for(var seen=Object.create(null),schemas=[],normalizedResource=normalizeResourceForMatching(resource),_i=0,_a=this.filePatternAssociations;_i<_a.length;_i++){var entry=_a[_i];if(entry.matchesPattern(normalizedResource))for(var _b=0,_c=entry.getURIs();_b<_c.length;_b++){var schemaId=_c[_b];seen[schemaId]||(schemas.push(schemaId),seen[schemaId]=!0)}}return schemas},JSONSchemaService2.prototype.getSchemaURIsForResource=function(resource,document){var schemeId=document&&this.getSchemaFromProperty(resource,document);return schemeId?[schemeId]:this.getAssociatedSchemas(resource)},JSONSchemaService2.prototype.getSchemaForResource=function(resource,document){if(document){var schemeId=this.getSchemaFromProperty(resource,document);if(schemeId){var id=normalizeId(schemeId);return this.getOrAddSchemaHandle(id).getResolvedSchema()}}if(this.cachedSchemaForResource&&this.cachedSchemaForResource.resource===resource)return this.cachedSchemaForResource.resolvedSchema;var schemas=this.getAssociatedSchemas(resource),resolvedSchema=schemas.length>0?this.createCombinedSchema(resource,schemas).getResolvedSchema():this.promise.resolve(void 0);return this.cachedSchemaForResource={resource,resolvedSchema},resolvedSchema},JSONSchemaService2.prototype.createCombinedSchema=function(resource,schemaIds){if(1===schemaIds.length)return this.getOrAddSchemaHandle(schemaIds[0]);var combinedSchemaId="schemaservice://combinedSchema/"+encodeURIComponent(resource),combinedSchema={allOf:schemaIds.map((function(schemaId){return{$ref:schemaId}}))};return this.addSchemaHandle(combinedSchemaId,combinedSchema)},JSONSchemaService2.prototype.getMatchingSchemas=function(document,jsonDocument,schema){if(schema){var id=schema.id||"schemaservice://untitled/matchingSchemas/"+idCounter2++;return this.addSchemaHandle(id,schema).getResolvedSchema().then((function(resolvedSchema){return jsonDocument.getMatchingSchemas(resolvedSchema.schema).filter((function(s){return!s.inverted}))}))}return this.getSchemaForResource(document.uri,jsonDocument).then((function(schema2){return schema2?jsonDocument.getMatchingSchemas(schema2.schema).filter((function(s){return!s.inverted})):[]}))},JSONSchemaService2}(),idCounter2=0;function normalizeId(id){try{return URI.parse(id).toString()}catch(e){return id}}function normalizeResourceForMatching(resource){try{return URI.parse(resource).with({fragment:null,query:null}).toString()}catch(e){return resource}}function toDisplayString(url){try{var uri=URI.parse(url);if("file"===uri.scheme)return uri.fsPath}catch(e){}return url}function getFoldingRanges(document,context){var ranges=[],nestingLevels=[],stack=[],prevStart=-1,scanner=createScanner2(document.getText(),!1),token=scanner.scan();function addRange(range2){ranges.push(range2),nestingLevels.push(stack.length)}for(;17!==token;){switch(token){case 1:case 3:var range={startLine:startLine=document.positionAt(scanner.getTokenOffset()).line,endLine:startLine,kind:1===token?"object":"array"};stack.push(range);break;case 2:case 4:var kind=2===token?"object":"array";if(stack.length>0&&stack[stack.length-1].kind===kind){range=stack.pop();var line=document.positionAt(scanner.getTokenOffset()).line;range&&line>range.startLine+1&&prevStart!==range.startLine&&(range.endLine=line-1,addRange(range),prevStart=range.startLine)}break;case 13:var startLine=document.positionAt(scanner.getTokenOffset()).line,endLine=document.positionAt(scanner.getTokenOffset()+scanner.getTokenLength()).line;1===scanner.getTokenError()&&startLine+1<document.lineCount?scanner.setPosition(document.offsetAt(Position.create(startLine+1,0))):startLine<endLine&&(addRange({startLine,endLine,kind:FoldingRangeKind.Comment}),prevStart=startLine);break;case 12:var m=document.getText().substr(scanner.getTokenOffset(),scanner.getTokenLength()).match(/^\/\/\s*#(region\b)|(endregion\b)/);if(m){line=document.positionAt(scanner.getTokenOffset()).line;if(m[1]){range={startLine:line,endLine:line,kind:FoldingRangeKind.Region};stack.push(range)}else{for(var i=stack.length-1;i>=0&&stack[i].kind!==FoldingRangeKind.Region;)i--;if(i>=0){range=stack[i];stack.length=i,line>range.startLine&&prevStart!==range.startLine&&(range.endLine=line,addRange(range),prevStart=range.startLine)}}}}token=scanner.scan()}var rangeLimit=context&&context.rangeLimit;if("number"!=typeof rangeLimit||ranges.length<=rangeLimit)return ranges;context&&context.onRangeLimitExceeded&&context.onRangeLimitExceeded(document.uri);for(var counts=[],_i=0,nestingLevels_1=nestingLevels;_i<nestingLevels_1.length;_i++){(level=nestingLevels_1[_i])<30&&(counts[level]=(counts[level]||0)+1)}var entries=0,maxLevel=0;for(i=0;i<counts.length;i++){var n=counts[i];if(n){if(n+entries>rangeLimit){maxLevel=i;break}entries+=n}}var result=[];for(i=0;i<ranges.length;i++){var level;"number"==typeof(level=nestingLevels[i])&&(level<maxLevel||level===maxLevel&&entries++<rangeLimit)&&result.push(ranges[i])}return result}function getSelectionRanges(document,positions,doc){function newRange(start,end){return Range.create(document.positionAt(start),document.positionAt(end))}var scanner=createScanner2(document.getText(),!0);function getOffsetAfterNextToken(offset,expectedToken){return scanner.setPosition(offset),scanner.scan()===expectedToken?scanner.getTokenOffset()+scanner.getTokenLength():-1}return positions.map((function getSelectionRange(position){for(var offset=document.offsetAt(position),node=doc.getNodeFromOffset(offset,!0),result=[];node;){switch(node.type){case"string":case"object":case"array":var cStart=node.offset+1,cEnd=node.offset+node.length-1;cStart<cEnd&&offset>=cStart&&offset<=cEnd&&result.push(newRange(cStart,cEnd)),result.push(newRange(node.offset,node.offset+node.length));break;case"number":case"boolean":case"null":case"property":result.push(newRange(node.offset,node.offset+node.length))}if("property"===node.type||node.parent&&"array"===node.parent.type){var afterCommaOffset=getOffsetAfterNextToken(node.offset+node.length,5);-1!==afterCommaOffset&&result.push(newRange(node.offset,afterCommaOffset))}node=node.parent}for(var current=void 0,index=result.length-1;index>=0;index--)current=SelectionRange.create(result[index],current);return current||(current=SelectionRange.create(Range.create(position,position))),current}))}function findLinks(document,doc){var links=[];return doc.visit((function(node){var _a;if("property"===node.type&&"$ref"===node.keyNode.value&&"string"===(null===(_a=node.valueNode)||void 0===_a?void 0:_a.type)){var path=node.valueNode.value,targetNode=findTargetNode(doc,path);if(targetNode){var targetPos=document.positionAt(targetNode.offset);links.push({target:"".concat(document.uri,"#").concat(targetPos.line+1,",").concat(targetPos.character+1),range:createRange(document,node.valueNode)})}}return!0})),Promise.resolve(links)}function createRange(document,node){return Range.create(document.positionAt(node.offset+1),document.positionAt(node.offset+node.length-1))}function findTargetNode(doc,path){var tokens=parseJSONPointer(path);return tokens?findNode(tokens,doc.root):null}function findNode(pointer,node){if(!node)return null;if(0===pointer.length)return node;var token=pointer.shift();if(node&&"object"===node.type){var propertyNode=node.properties.find((function(propertyNode2){return propertyNode2.keyNode.value===token}));return propertyNode?findNode(pointer,propertyNode.valueNode):null}if(node&&"array"===node.type&&token.match(/^(0|[1-9][0-9]*)$/)){var index=Number.parseInt(token),arrayItem=node.items[index];return arrayItem?findNode(pointer,arrayItem):null}return null}function parseJSONPointer(path){return"#"===path?[]:"#"!==path[0]||"/"!==path[1]?null:path.substring(2).split(/\//).map(unescape)}function unescape(str){return str.replace(/~1/g,"/").replace(/~0/g,"~")}function getLanguageService(params){var promise=params.promiseConstructor||Promise,jsonSchemaService=new JSONSchemaService(params.schemaRequestService,params.workspaceContext,promise);jsonSchemaService.setSchemaContributions(schemaContributions);var jsonCompletion=new JSONCompletion(jsonSchemaService,params.contributions,promise,params.clientCapabilities),jsonHover=new JSONHover(jsonSchemaService,params.contributions,promise),jsonDocumentSymbols=new JSONDocumentSymbols(jsonSchemaService),jsonValidation=new JSONValidation(jsonSchemaService,promise);return{configure:function(settings){jsonSchemaService.clearExternalSchemas(),settings.schemas&&settings.schemas.forEach((function(settings2){jsonSchemaService.registerExternalSchema(settings2.uri,settings2.fileMatch,settings2.schema)})),jsonValidation.configure(settings)},resetSchema:function(uri){return jsonSchemaService.onResourceChange(uri)},doValidation:jsonValidation.doValidation.bind(jsonValidation),getLanguageStatus:jsonValidation.getLanguageStatus.bind(jsonValidation),parseJSONDocument:function(document){return parse3(document,{collectComments:!0})},newJSONDocument:function(root,diagnostics){return newJSONDocument(root,diagnostics)},getMatchingSchemas:jsonSchemaService.getMatchingSchemas.bind(jsonSchemaService),doResolve:jsonCompletion.doResolve.bind(jsonCompletion),doComplete:jsonCompletion.doComplete.bind(jsonCompletion),findDocumentSymbols:jsonDocumentSymbols.findDocumentSymbols.bind(jsonDocumentSymbols),findDocumentSymbols2:jsonDocumentSymbols.findDocumentSymbols2.bind(jsonDocumentSymbols),findDocumentColors:jsonDocumentSymbols.findDocumentColors.bind(jsonDocumentSymbols),getColorPresentations:jsonDocumentSymbols.getColorPresentations.bind(jsonDocumentSymbols),doHover:jsonHover.doHover.bind(jsonHover),getFoldingRanges,getSelectionRanges,findDefinition:function(){return Promise.resolve([])},findLinks,format:function(d,r,o){var range=void 0;if(r){var offset=d.offsetAt(r.start);range={offset,length:d.offsetAt(r.end)-offset}}var options={tabSize:o?o.tabSize:4,insertSpaces:!0===(null==o?void 0:o.insertSpaces),insertFinalNewline:!0===(null==o?void 0:o.insertFinalNewline),eol:"\n"};return format2(d.getText(),range,options).map((function(e){return TextEdit.replace(Range.create(d.positionAt(e.offset),d.positionAt(e.offset+e.length)),e.content)}))}}}"undefined"!=typeof fetch&&(defaultSchemaRequestService=function(url){return fetch(url).then((response=>response.text()))});var JSONWorker=class{_ctx;_languageService;_languageSettings;_languageId;constructor(ctx,createData){this._ctx=ctx,this._languageSettings=createData.languageSettings,this._languageId=createData.languageId,this._languageService=getLanguageService({workspaceContext:{resolveRelativePath:(relativePath,resource)=>resolvePath(resource.substr(0,resource.lastIndexOf("/")+1),relativePath)},schemaRequestService:createData.enableSchemaRequest?defaultSchemaRequestService:void 0}),this._languageService.configure(this._languageSettings)}async doValidation(uri){let document=this._getTextDocument(uri);if(document){let jsonDocument=this._languageService.parseJSONDocument(document);return this._languageService.doValidation(document,jsonDocument,this._languageSettings)}return Promise.resolve([])}async doComplete(uri,position){let document=this._getTextDocument(uri);if(!document)return null;let jsonDocument=this._languageService.parseJSONDocument(document);return this._languageService.doComplete(document,position,jsonDocument)}async doResolve(item){return this._languageService.doResolve(item)}async doHover(uri,position){let document=this._getTextDocument(uri);if(!document)return null;let jsonDocument=this._languageService.parseJSONDocument(document);return this._languageService.doHover(document,position,jsonDocument)}async format(uri,range,options){let document=this._getTextDocument(uri);if(!document)return[];let textEdits=this._languageService.format(document,range,options);return Promise.resolve(textEdits)}async resetSchema(uri){return Promise.resolve(this._languageService.resetSchema(uri))}async findDocumentSymbols(uri){let document=this._getTextDocument(uri);if(!document)return[];let jsonDocument=this._languageService.parseJSONDocument(document),symbols=this._languageService.findDocumentSymbols(document,jsonDocument);return Promise.resolve(symbols)}async findDocumentColors(uri){let document=this._getTextDocument(uri);if(!document)return[];let jsonDocument=this._languageService.parseJSONDocument(document),colorSymbols=this._languageService.findDocumentColors(document,jsonDocument);return Promise.resolve(colorSymbols)}async getColorPresentations(uri,color,range){let document=this._getTextDocument(uri);if(!document)return[];let jsonDocument=this._languageService.parseJSONDocument(document),colorPresentations=this._languageService.getColorPresentations(document,jsonDocument,color,range);return Promise.resolve(colorPresentations)}async getFoldingRanges(uri,context){let document=this._getTextDocument(uri);if(!document)return[];let ranges=this._languageService.getFoldingRanges(document,context);return Promise.resolve(ranges)}async getSelectionRanges(uri,positions){let document=this._getTextDocument(uri);if(!document)return[];let jsonDocument=this._languageService.parseJSONDocument(document),ranges=this._languageService.getSelectionRanges(document,positions,jsonDocument);return Promise.resolve(ranges)}_getTextDocument(uri){let models=this._ctx.getMirrorModels();for(let model of models)if(model.uri.toString()===uri)return TextDocument2.create(uri,this._languageId,model.version,model.getValue());return null}},Slash="/".charCodeAt(0),Dot=".".charCodeAt(0);function isAbsolutePath(path){return path.charCodeAt(0)===Slash}function resolvePath(uriString,path){if(isAbsolutePath(path)){const uri=URI.parse(uriString),parts=path.split("/");return uri.with({path:normalizePath(parts)}).toString()}return joinPath(uriString,path)}function normalizePath(parts){const newParts=[];for(const part of parts)0===part.length||1===part.length&&part.charCodeAt(0)===Dot||(2===part.length&&part.charCodeAt(0)===Dot&&part.charCodeAt(1)===Dot?newParts.pop():newParts.push(part));parts.length>1&&0===parts[parts.length-1].length&&newParts.push("");let res=newParts.join("/");return 0===parts[0].length&&(res="/"+res),res}function joinPath(uriString,...paths){const uri=URI.parse(uriString),parts=uri.path.split("/");for(let path of paths)parts.push(...path.split("/"));return uri.with({path:normalizePath(parts)}).toString()}self.onmessage=()=>{worker.initialize(((ctx,createData)=>new JSONWorker(ctx,createData)))};