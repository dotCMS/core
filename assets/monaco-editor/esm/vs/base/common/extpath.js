import{normalize,posix,sep}from"./path.js";import{isWindows}from"./platform.js";import{startsWithIgnoreCase}from"./strings.js";export function isPathSeparator(code){return 47===code||92===code}export function toSlashes(osPath){return osPath.replace(/[\\/]/g,posix.sep)}export function toPosixPath(osPath){return-1===osPath.indexOf("/")&&(osPath=toSlashes(osPath)),/^[a-zA-Z]:(\/|$)/.test(osPath)&&(osPath="/"+osPath),osPath}export function getRoot(path,sep=posix.sep){if(!path)return"";const len=path.length,firstLetter=path.charCodeAt(0);if(isPathSeparator(firstLetter)){if(isPathSeparator(path.charCodeAt(1))&&!isPathSeparator(path.charCodeAt(2))){let pos=3;const start=pos;for(;pos<len&&!isPathSeparator(path.charCodeAt(pos));pos++);if(start!==pos&&!isPathSeparator(path.charCodeAt(pos+1)))for(pos+=1;pos<len;pos++)if(isPathSeparator(path.charCodeAt(pos)))return path.slice(0,pos+1).replace(/[\\/]/g,sep)}return sep}if(isWindowsDriveLetter(firstLetter)&&58===path.charCodeAt(1))return isPathSeparator(path.charCodeAt(2))?path.slice(0,2)+sep:path.slice(0,2);let pos=path.indexOf("://");if(-1!==pos)for(pos+=3;pos<len;pos++)if(isPathSeparator(path.charCodeAt(pos)))return path.slice(0,pos+1);return""}export function isEqualOrParent(base,parentCandidate,ignoreCase,separator=sep){if(base===parentCandidate)return!0;if(!base||!parentCandidate)return!1;if(parentCandidate.length>base.length)return!1;if(ignoreCase){if(!startsWithIgnoreCase(base,parentCandidate))return!1;if(parentCandidate.length===base.length)return!0;let sepOffset=parentCandidate.length;return parentCandidate.charAt(parentCandidate.length-1)===separator&&sepOffset--,base.charAt(sepOffset)===separator}return parentCandidate.charAt(parentCandidate.length-1)!==separator&&(parentCandidate+=separator),0===base.indexOf(parentCandidate)}export function isWindowsDriveLetter(char0){return char0>=65&&char0<=90||char0>=97&&char0<=122}export function isRootOrDriveLetter(path){const pathNormalized=normalize(path);return isWindows?!(path.length>3)&&(hasDriveLetter(pathNormalized)&&(2===path.length||92===pathNormalized.charCodeAt(2))):pathNormalized===posix.sep}export function hasDriveLetter(path,continueAsWindows){return!!(void 0!==continueAsWindows?continueAsWindows:isWindows)&&(isWindowsDriveLetter(path.charCodeAt(0))&&58===path.charCodeAt(1))}