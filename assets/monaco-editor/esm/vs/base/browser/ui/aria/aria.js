import*as dom from"../../dom.js";import{isMacintosh}from"../../../common/platform.js";import"./aria.css";const MAX_MESSAGE_LENGTH=2e4;let ariaContainer,alertContainer,alertContainer2,statusContainer,statusContainer2;export function setARIAContainer(parent){ariaContainer=document.createElement("div"),ariaContainer.className="monaco-aria-container";const createAlertContainer=()=>{const element=document.createElement("div");return element.className="monaco-alert",element.setAttribute("role","alert"),element.setAttribute("aria-atomic","true"),ariaContainer.appendChild(element),element};alertContainer=createAlertContainer(),alertContainer2=createAlertContainer();const createStatusContainer=()=>{const element=document.createElement("div");return element.className="monaco-status",element.setAttribute("role","complementary"),element.setAttribute("aria-live","polite"),element.setAttribute("aria-atomic","true"),ariaContainer.appendChild(element),element};statusContainer=createStatusContainer(),statusContainer2=createStatusContainer(),parent.appendChild(ariaContainer)}export function alert(msg){ariaContainer&&(alertContainer.textContent!==msg?(dom.clearNode(alertContainer2),insertMessage(alertContainer,msg)):(dom.clearNode(alertContainer),insertMessage(alertContainer2,msg)))}export function status(msg){ariaContainer&&(isMacintosh?alert(msg):statusContainer.textContent!==msg?(dom.clearNode(statusContainer2),insertMessage(statusContainer,msg)):(dom.clearNode(statusContainer),insertMessage(statusContainer2,msg)))}function insertMessage(target,msg){dom.clearNode(target),msg.length>MAX_MESSAGE_LENGTH&&(msg=msg.substr(0,MAX_MESSAGE_LENGTH)),target.textContent=msg,target.style.visibility="hidden",target.style.visibility="visible"}