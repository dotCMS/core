import{Widget}from"../widget.js";import{CSSIcon}from"../../../common/codicons.js";import{Color}from"../../../common/color.js";import{Emitter}from"../../../common/event.js";import"./checkbox.css";const defaultOpts={inputActiveOptionBorder:Color.fromHex("#007ACC00"),inputActiveOptionForeground:Color.fromHex("#FFFFFF"),inputActiveOptionBackground:Color.fromHex("#0E639C50")};export class Checkbox extends Widget{constructor(opts){super(),this._onChange=this._register(new Emitter),this.onChange=this._onChange.event,this._onKeyDown=this._register(new Emitter),this.onKeyDown=this._onKeyDown.event,this._opts=Object.assign(Object.assign({},defaultOpts),opts),this._checked=this._opts.isChecked;const classes=["monaco-custom-checkbox"];this._opts.icon&&classes.push(...CSSIcon.asClassNameArray(this._opts.icon)),this._opts.actionClassName&&classes.push(...this._opts.actionClassName.split(" ")),this._checked&&classes.push("checked"),this.domNode=document.createElement("div"),this.domNode.title=this._opts.title,this.domNode.classList.add(...classes),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,(ev=>{this.enabled&&(this.checked=!this._checked,this._onChange.fire(!1),ev.preventDefault())})),this.ignoreGesture(this.domNode),this.onkeydown(this.domNode,(keyboardEvent=>{if(10===keyboardEvent.keyCode||3===keyboardEvent.keyCode)return this.checked=!this._checked,this._onChange.fire(!0),void keyboardEvent.preventDefault();this._onKeyDown.fire(keyboardEvent)}))}get enabled(){return"true"!==this.domNode.getAttribute("aria-disabled")}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(newIsChecked){this._checked=newIsChecked,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}width(){return 22}style(styles){styles.inputActiveOptionBorder&&(this._opts.inputActiveOptionBorder=styles.inputActiveOptionBorder),styles.inputActiveOptionForeground&&(this._opts.inputActiveOptionForeground=styles.inputActiveOptionForeground),styles.inputActiveOptionBackground&&(this._opts.inputActiveOptionBackground=styles.inputActiveOptionBackground),this.applyStyles()}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder?this._opts.inputActiveOptionBorder.toString():"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground?this._opts.inputActiveOptionForeground.toString():"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground?this._opts.inputActiveOptionBackground.toString():"")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}}