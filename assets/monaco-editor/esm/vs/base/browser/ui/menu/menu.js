import{isFirefox}from"../../browser.js";import{EventType as TouchEventType,Gesture}from"../../touch.js";import{$,addDisposableListener,append,clearNode,createStyleSheet,Dimension,EventHelper,EventType,getActiveElement,isAncestor,isInShadowDOM}from"../../dom.js";import{StandardKeyboardEvent}from"../../keyboardEvent.js";import{StandardMouseEvent}from"../../mouseEvent.js";import{ActionBar}from"../actionbar/actionbar.js";import{ActionViewItem,BaseActionViewItem}from"../actionbar/actionViewItems.js";import{formatRule}from"../codicons/codiconStyles.js";import{layout}from"../contextview/contextview.js";import{DomScrollableElement}from"../scrollbar/scrollableElement.js";import{EmptySubmenuAction,Separator,SubmenuAction}from"../../../common/actions.js";import{RunOnceScheduler}from"../../../common/async.js";import{Codicon}from"../../../common/codicons.js";import{stripIcons}from"../../../common/iconLabels.js";import{DisposableStore}from"../../../common/lifecycle.js";import{isLinux,isMacintosh}from"../../../common/platform.js";import*as strings from"../../../common/strings.js";export const MENU_MNEMONIC_REGEX=/\(&([^\s&])\)|(^|[^&])&([^\s&])/;export const MENU_ESCAPED_MNEMONIC_REGEX=/(&amp;)?(&amp;)([^\s&])/g;export var Direction;!function(Direction){Direction[Direction.Right=0]="Right",Direction[Direction.Left=1]="Left"}(Direction||(Direction={}));export class Menu extends ActionBar{constructor(container,actions,options={}){container.classList.add("monaco-menu-container"),container.setAttribute("role","presentation");const menuElement=document.createElement("div");menuElement.classList.add("monaco-menu"),menuElement.setAttribute("role","presentation"),super(menuElement,{orientation:1,actionViewItemProvider:action=>this.doGetActionViewItem(action,options,parentData),context:options.context,actionRunner:options.actionRunner,ariaLabel:options.ariaLabel,focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...isMacintosh||isLinux?[10]:[]],keyDown:!0}}),this.menuElement=menuElement,this.actionsList.setAttribute("role","menu"),this.actionsList.tabIndex=0,this.menuDisposables=this._register(new DisposableStore),this.initializeOrUpdateStyleSheet(container,{}),this._register(Gesture.addTarget(menuElement)),addDisposableListener(menuElement,EventType.KEY_DOWN,(e=>{new StandardKeyboardEvent(e).equals(2)&&e.preventDefault()})),options.enableMnemonics&&this.menuDisposables.add(addDisposableListener(menuElement,EventType.KEY_DOWN,(e=>{const key=e.key.toLocaleLowerCase();if(this.mnemonics.has(key)){EventHelper.stop(e,!0);const actions=this.mnemonics.get(key);if(1===actions.length&&(actions[0]instanceof SubmenuMenuActionViewItem&&actions[0].container&&this.focusItemByElement(actions[0].container),actions[0].onClick(e)),actions.length>1){const action=actions.shift();action&&action.container&&(this.focusItemByElement(action.container),actions.push(action)),this.mnemonics.set(key,actions)}}}))),isLinux&&this._register(addDisposableListener(menuElement,EventType.KEY_DOWN,(e=>{const event=new StandardKeyboardEvent(e);event.equals(14)||event.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),EventHelper.stop(e,!0)):(event.equals(13)||event.equals(12))&&(this.focusedItem=0,this.focusPrevious(),EventHelper.stop(e,!0))}))),this._register(addDisposableListener(this.domNode,EventType.MOUSE_OUT,(e=>{let relatedTarget=e.relatedTarget;isAncestor(relatedTarget,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),e.stopPropagation())}))),this._register(addDisposableListener(this.actionsList,EventType.MOUSE_OVER,(e=>{let target=e.target;if(target&&isAncestor(target,this.actionsList)&&target!==this.actionsList){for(;target.parentElement!==this.actionsList&&null!==target.parentElement;)target=target.parentElement;if(target.classList.contains("action-item")){const lastFocusedItem=this.focusedItem;this.setFocusedItem(target),lastFocusedItem!==this.focusedItem&&this.updateFocus()}}}))),this._register(Gesture.addTarget(this.actionsList)),this._register(addDisposableListener(this.actionsList,TouchEventType.Tap,(e=>{let target=e.initialTarget;if(target&&isAncestor(target,this.actionsList)&&target!==this.actionsList){for(;target.parentElement!==this.actionsList&&null!==target.parentElement;)target=target.parentElement;if(target.classList.contains("action-item")){const lastFocusedItem=this.focusedItem;this.setFocusedItem(target),lastFocusedItem!==this.focusedItem&&this.updateFocus()}}})));let parentData={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new DomScrollableElement(menuElement,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));const scrollElement=this.scrollableElement.getDomNode();scrollElement.style.position="",this._register(addDisposableListener(menuElement,TouchEventType.Change,(e=>{EventHelper.stop(e,!0);const scrollTop=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:scrollTop-e.translationY})}))),this._register(addDisposableListener(scrollElement,EventType.MOUSE_UP,(e=>{e.preventDefault()}))),menuElement.style.maxHeight=`${Math.max(10,window.innerHeight-container.getBoundingClientRect().top-35)}px`,actions=actions.filter((a=>{var _a;return!(null===(_a=options.submenuIds)||void 0===_a?void 0:_a.has(a.id))||(console.warn(`Found submenu cycle: ${a.id}`),!1)})),this.push(actions,{icon:!0,label:!0,isMenu:!0}),container.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter((item=>!(item instanceof MenuSeparatorActionViewItem))).forEach(((item,index,array)=>{item.updatePositionInSet(index+1,array.length)}))}initializeOrUpdateStyleSheet(container,style){this.styleSheet||(isInShadowDOM(container)?this.styleSheet=createStyleSheet(container):(Menu.globalStyleSheet||(Menu.globalStyleSheet=createStyleSheet()),this.styleSheet=Menu.globalStyleSheet)),this.styleSheet.textContent=getMenuWidgetCSS(style,isInShadowDOM(container))}style(style){const container=this.getContainer();this.initializeOrUpdateStyleSheet(container,style);const fgColor=style.foregroundColor?`${style.foregroundColor}`:"",bgColor=style.backgroundColor?`${style.backgroundColor}`:"",border=style.borderColor?`1px solid ${style.borderColor}`:"",shadow=style.shadowColor?`0 2px 4px ${style.shadowColor}`:"";container.style.border=border,this.domNode.style.color=fgColor,this.domNode.style.backgroundColor=bgColor,container.style.boxShadow=shadow,this.viewItems&&this.viewItems.forEach((item=>{(item instanceof BaseMenuActionViewItem||item instanceof MenuSeparatorActionViewItem)&&item.style(style)}))}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(element){const lastFocusedItem=this.focusedItem;this.setFocusedItem(element),lastFocusedItem!==this.focusedItem&&this.updateFocus()}setFocusedItem(element){for(let i=0;i<this.actionsList.children.length;i++){if(element===this.actionsList.children[i]){this.focusedItem=i;break}}}updateFocus(fromRight){super.updateFocus(fromRight,!0,!0),void 0!==this.focusedItem&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(action,options,parentData){if(action instanceof Separator)return new MenuSeparatorActionViewItem(options.context,action,{icon:!0});if(action instanceof SubmenuAction){const menuActionViewItem=new SubmenuMenuActionViewItem(action,action.actions,parentData,Object.assign(Object.assign({},options),{submenuIds:new Set([...options.submenuIds||[],action.id])}));if(options.enableMnemonics){const mnemonic=menuActionViewItem.getMnemonic();if(mnemonic&&menuActionViewItem.isEnabled()){let actionViewItems=[];this.mnemonics.has(mnemonic)&&(actionViewItems=this.mnemonics.get(mnemonic)),actionViewItems.push(menuActionViewItem),this.mnemonics.set(mnemonic,actionViewItems)}}return menuActionViewItem}{const menuItemOptions={enableMnemonics:options.enableMnemonics,useEventAsContext:options.useEventAsContext};if(options.getKeyBinding){const keybinding=options.getKeyBinding(action);if(keybinding){const keybindingLabel=keybinding.getLabel();keybindingLabel&&(menuItemOptions.keybinding=keybindingLabel)}}const menuActionViewItem=new BaseMenuActionViewItem(options.context,action,menuItemOptions);if(options.enableMnemonics){const mnemonic=menuActionViewItem.getMnemonic();if(mnemonic&&menuActionViewItem.isEnabled()){let actionViewItems=[];this.mnemonics.has(mnemonic)&&(actionViewItems=this.mnemonics.get(mnemonic)),actionViewItems.push(menuActionViewItem),this.mnemonics.set(mnemonic,actionViewItems)}}return menuActionViewItem}}}class BaseMenuActionViewItem extends BaseActionViewItem{constructor(ctx,action,options={}){if(options.isMenu=!0,super(action,action,options),this.options=options,this.options.icon=void 0!==options.icon&&options.icon,this.options.label=void 0===options.label||options.label,this.cssClass="",this.options.label&&options.enableMnemonics){let label=this.getAction().label;if(label){let matches=MENU_MNEMONIC_REGEX.exec(label);matches&&(this.mnemonic=(matches[1]?matches[1]:matches[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new RunOnceScheduler((()=>{this.element&&(this._register(addDisposableListener(this.element,EventType.MOUSE_UP,(e=>{if(EventHelper.stop(e,!0),isFirefox){if(new StandardMouseEvent(e).rightButton)return;this.onClick(e)}else setTimeout((()=>{this.onClick(e)}),0)}))),this._register(addDisposableListener(this.element,EventType.CONTEXT_MENU,(e=>{EventHelper.stop(e,!0)}))))}),100),this._register(this.runOnceToEnableMouseUp)}render(container){super.render(container),this.element&&(this.container=container,this.item=append(this.element,$("a.action-menu-item")),this._action.id===Separator.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=append(this.item,$("span.menu-item-check"+Codicon.menuSelection.cssSelector)),this.check.setAttribute("role","none"),this.label=append(this.item,$("span.action-label")),this.options.label&&this.options.keybinding&&(append(this.item,$("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked())}blur(){super.blur(),this.applyStyle()}focus(){super.focus(),this.item&&this.item.focus(),this.applyStyle()}updatePositionInSet(pos,setSize){this.item&&(this.item.setAttribute("aria-posinset",`${pos}`),this.item.setAttribute("aria-setsize",`${setSize}`))}updateLabel(){if(this.label&&this.options.label){clearNode(this.label);let label=stripIcons(this.getAction().label);if(label){const cleanLabel=cleanMnemonic(label);this.options.enableMnemonics||(label=cleanLabel),this.label.setAttribute("aria-label",cleanLabel.replace(/&&/g,"&"));const matches=MENU_MNEMONIC_REGEX.exec(label);if(matches){label=strings.escape(label),MENU_ESCAPED_MNEMONIC_REGEX.lastIndex=0;let escMatch=MENU_ESCAPED_MNEMONIC_REGEX.exec(label);for(;escMatch&&escMatch[1];)escMatch=MENU_ESCAPED_MNEMONIC_REGEX.exec(label);const replaceDoubleEscapes=str=>str.replace(/&amp;&amp;/g,"&amp;");escMatch?this.label.append(strings.ltrim(replaceDoubleEscapes(label.substr(0,escMatch.index))," "),$("u",{"aria-hidden":"true"},escMatch[3]),strings.rtrim(replaceDoubleEscapes(label.substr(escMatch.index+escMatch[0].length))," ")):this.label.innerText=replaceDoubleEscapes(label).trim(),this.item&&this.item.setAttribute("aria-keyshortcuts",(matches[1]?matches[1]:matches[3]).toLocaleLowerCase())}else this.label.innerText=label.replace(/&&/g,"&").trim()}}}updateTooltip(){}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.getAction().class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.getAction().enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;const checked=this.getAction().checked;this.item.classList.toggle("checked",!!checked),void 0!==checked?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",checked?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){if(!this.menuStyle)return;const isSelected=this.element&&this.element.classList.contains("focused"),fgColor=isSelected&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,bgColor=isSelected&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,border=isSelected&&this.menuStyle.selectionBorderColor?`thin solid ${this.menuStyle.selectionBorderColor}`:"";this.item&&(this.item.style.color=fgColor?fgColor.toString():"",this.item.style.backgroundColor=bgColor?bgColor.toString():""),this.check&&(this.check.style.color=fgColor?fgColor.toString():""),this.container&&(this.container.style.border=border)}style(style){this.menuStyle=style,this.applyStyle()}}class SubmenuMenuActionViewItem extends BaseMenuActionViewItem{constructor(action,submenuActions,parentData,submenuOptions){super(action,action,submenuOptions),this.submenuActions=submenuActions,this.parentData=parentData,this.submenuOptions=submenuOptions,this.mysubmenu=null,this.submenuDisposables=this._register(new DisposableStore),this.mouseOver=!1,this.expandDirection=submenuOptions&&void 0!==submenuOptions.expandDirection?submenuOptions.expandDirection:Direction.Right,this.showScheduler=new RunOnceScheduler((()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))}),250),this.hideScheduler=new RunOnceScheduler((()=>{this.element&&!isAncestor(getActiveElement(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))}),750)}render(container){super.render(container),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=append(this.item,$("span.submenu-indicator"+Codicon.menuSubmenu.cssSelector)),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register(addDisposableListener(this.element,EventType.KEY_UP,(e=>{let event=new StandardKeyboardEvent(e);(event.equals(17)||event.equals(3))&&(EventHelper.stop(e,!0),this.createSubmenu(!0))}))),this._register(addDisposableListener(this.element,EventType.KEY_DOWN,(e=>{let event=new StandardKeyboardEvent(e);getActiveElement()===this.item&&(event.equals(17)||event.equals(3))&&EventHelper.stop(e,!0)}))),this._register(addDisposableListener(this.element,EventType.MOUSE_OVER,(e=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())}))),this._register(addDisposableListener(this.element,EventType.MOUSE_LEAVE,(e=>{this.mouseOver=!1}))),this._register(addDisposableListener(this.element,EventType.FOCUS_OUT,(e=>{this.element&&!isAncestor(getActiveElement(),this.element)&&this.hideScheduler.schedule()}))),this._register(this.parentData.parent.onScroll((()=>{this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!1)}))))}updateEnabled(){}onClick(e){EventHelper.stop(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(force){if(this.parentData.submenu&&(force||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch(_a){}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(windowDimensions,submenu,entry,expandDirection){const ret={top:0,left:0};return ret.left=layout(windowDimensions.width,submenu.width,{position:expandDirection===Direction.Right?0:1,offset:entry.left,size:entry.width}),ret.left>=entry.left&&ret.left<entry.left+entry.width&&(entry.left+10+submenu.width<=windowDimensions.width&&(ret.left=entry.left+10),entry.top+=10,entry.height=0),ret.top=layout(windowDimensions.height,submenu.height,{position:0,offset:entry.top,size:0}),ret.top+submenu.height===entry.top&&ret.top+entry.height+submenu.height<=windowDimensions.height&&(ret.top+=entry.height),ret}createSubmenu(selectFirstItem=!0){if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=append(this.element,$("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");const computedStyles=getComputedStyle(this.parentData.parent.domNode),paddingTop=parseFloat(computedStyles.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new Menu(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new EmptySubmenuAction],this.submenuOptions),this.menuStyle&&this.parentData.submenu.style(this.menuStyle);const entryBox=this.element.getBoundingClientRect(),entryBoxUpdated={top:entryBox.top-paddingTop,left:entryBox.left,height:entryBox.height+2*paddingTop,width:entryBox.width},viewBox=this.submenuContainer.getBoundingClientRect(),{top,left}=this.calculateSubmenuMenuLayout(new Dimension(window.innerWidth,window.innerHeight),Dimension.lift(viewBox),entryBoxUpdated,this.expandDirection);this.submenuContainer.style.left=left-viewBox.left+"px",this.submenuContainer.style.top=top-viewBox.top+"px",this.submenuDisposables.add(addDisposableListener(this.submenuContainer,EventType.KEY_UP,(e=>{new StandardKeyboardEvent(e).equals(15)&&(EventHelper.stop(e,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))}))),this.submenuDisposables.add(addDisposableListener(this.submenuContainer,EventType.KEY_DOWN,(e=>{new StandardKeyboardEvent(e).equals(15)&&EventHelper.stop(e,!0)}))),this.submenuDisposables.add(this.parentData.submenu.onDidCancel((()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)}))),this.parentData.submenu.focus(selectFirstItem),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(value){var _a;this.item&&(null===(_a=this.item)||void 0===_a||_a.setAttribute("aria-expanded",value))}applyStyle(){if(super.applyStyle(),!this.menuStyle)return;const fgColor=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=fgColor?`${fgColor}`:""),this.parentData.submenu&&this.parentData.submenu.style(this.menuStyle)}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}}class MenuSeparatorActionViewItem extends ActionViewItem{style(style){this.label&&(this.label.style.borderBottomColor=style.separatorColor?`${style.separatorColor}`:"")}}export function cleanMnemonic(label){const regex=MENU_MNEMONIC_REGEX,matches=regex.exec(label);if(!matches)return label;const mnemonicInText=!matches[1];return label.replace(regex,mnemonicInText?"$2$3":"").trim()}function getMenuWidgetCSS(style,isForShadowDom){let result=`\n.monaco-menu {\n\tfont-size: 13px;\n\n}\n\n${formatRule(Codicon.menuSelection)}\n${formatRule(Codicon.menuSubmenu)}\n\n.monaco-menu .monaco-action-bar {\n\ttext-align: right;\n\toverflow: hidden;\n\twhite-space: nowrap;\n}\n\n.monaco-menu .monaco-action-bar .actions-container {\n\tdisplay: flex;\n\tmargin: 0 auto;\n\tpadding: 0;\n\twidth: 100%;\n\tjustify-content: flex-end;\n}\n\n.monaco-menu .monaco-action-bar.vertical .actions-container {\n\tdisplay: inline-block;\n}\n\n.monaco-menu .monaco-action-bar.reverse .actions-container {\n\tflex-direction: row-reverse;\n}\n\n.monaco-menu .monaco-action-bar .action-item {\n\tcursor: pointer;\n\tdisplay: inline-block;\n\ttransition: transform 50ms ease;\n\tposition: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */\n}\n\n.monaco-menu .monaco-action-bar .action-item.disabled {\n\tcursor: default;\n}\n\n.monaco-menu .monaco-action-bar.animated .action-item.active {\n\ttransform: scale(1.272019649, 1.272019649); /* 1.272019649 = √φ */\n}\n\n.monaco-menu .monaco-action-bar .action-item .icon,\n.monaco-menu .monaco-action-bar .action-item .codicon {\n\tdisplay: inline-block;\n}\n\n.monaco-menu .monaco-action-bar .action-item .codicon {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.monaco-menu .monaco-action-bar .action-label {\n\tfont-size: 11px;\n\tmargin-right: 4px;\n}\n\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label,\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {\n\topacity: 0.4;\n}\n\n/* Vertical actions */\n\n.monaco-menu .monaco-action-bar.vertical {\n\ttext-align: left;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tdisplay: block;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tdisplay: block;\n\tborder-bottom: 1px solid #bbb;\n\tpadding-top: 1px;\n\tmargin-left: .8em;\n\tmargin-right: .8em;\n}\n\n.monaco-menu .secondary-actions .monaco-action-bar .action-label {\n\tmargin-left: 6px;\n}\n\n/* Action Items */\n.monaco-menu .monaco-action-bar .action-item.select-container {\n\toverflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */\n\tflex: 1;\n\tmax-width: 170px;\n\tmin-width: 60px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tmargin-right: 10px;\n}\n\n.monaco-menu .monaco-action-bar.vertical {\n\tmargin-left: 0;\n\toverflow: visible;\n}\n\n.monaco-menu .monaco-action-bar.vertical .actions-container {\n\tdisplay: block;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tpadding: 0;\n\ttransform: none;\n\tdisplay: flex;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item.active {\n\ttransform: none;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\n\tflex: 1 1 auto;\n\tdisplay: flex;\n\theight: 2em;\n\talign-items: center;\n\tposition: relative;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label {\n\tflex: 1 1 auto;\n\ttext-decoration: none;\n\tpadding: 0 1em;\n\tbackground: none;\n\tfont-size: 12px;\n\tline-height: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .keybinding,\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\tdisplay: inline-block;\n\tflex: 2 1 auto;\n\tpadding: 0 1em;\n\ttext-align: right;\n\tfont-size: 12px;\n\tline-height: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\theight: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {\n\tfont-size: 16px !important;\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {\n\tmargin-left: auto;\n\tmargin-right: -20px;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {\n\topacity: 0.4;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {\n\tdisplay: inline-block;\n\tbox-sizing: border-box;\n\tmargin: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tposition: static;\n\toverflow: visible;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {\n\tposition: absolute;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tpadding: 0.5em 0 0 0;\n\tmargin-bottom: 0.5em;\n\twidth: 100%;\n\theight: 0px !important;\n\tmargin-left: .8em !important;\n\tmargin-right: .8em !important;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {\n\tpadding: 0.7em 1em 0.1em 1em;\n\tfont-weight: bold;\n\topacity: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:hover {\n\tcolor: inherit;\n}\n\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\n\tposition: absolute;\n\tvisibility: hidden;\n\twidth: 1em;\n\theight: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {\n\tvisibility: visible;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n/* Context Menu */\n\n.context-view.monaco-menu-container {\n\toutline: 0;\n\tborder: none;\n\tanimation: fadeIn 0.083s linear;\n\t-webkit-app-region: no-drag;\n}\n\n.context-view.monaco-menu-container :focus,\n.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,\n.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {\n\toutline: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tborder: thin solid transparent; /* prevents jumping behaviour on hover or focus */\n}\n\n\n/* High Contrast Theming */\n:host-context(.hc-black) .context-view.monaco-menu-container {\n\tbox-shadow: none;\n}\n\n:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused {\n\tbackground: none;\n}\n\n/* Vertical Action Bar Styles */\n\n.monaco-menu .monaco-action-bar.vertical {\n\tpadding: .5em 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\n\theight: 1.8em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),\n.monaco-menu .monaco-action-bar.vertical .keybinding {\n\tfont-size: inherit;\n\tpadding: 0 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\n\tfont-size: inherit;\n\twidth: 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tfont-size: inherit;\n\tpadding: 0.2em 0 0 0;\n\tmargin-bottom: 0.2em;\n}\n\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tmargin-left: 0;\n\tmargin-right: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\tfont-size: 60%;\n\tpadding: 0 1.8em;\n}\n\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\theight: 100%;\n\tmask-size: 10px 10px;\n\t-webkit-mask-size: 10px 10px;\n}\n\n.monaco-menu .action-item {\n\tcursor: default;\n}`;if(isForShadowDom){result+="\n\t\t\t/* Arrows */\n\t\t\t.monaco-scrollable-element > .scrollbar > .scra {\n\t\t\t\tcursor: pointer;\n\t\t\t\tfont-size: 11px !important;\n\t\t\t}\n\n\t\t\t.monaco-scrollable-element > .visible {\n\t\t\t\topacity: 1;\n\n\t\t\t\t/* Background rule added for IE9 - to allow clicks on dom node */\n\t\t\t\tbackground:rgba(0,0,0,0);\n\n\t\t\t\ttransition: opacity 100ms linear;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .invisible {\n\t\t\t\topacity: 0;\n\t\t\t\tpointer-events: none;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .invisible.fade {\n\t\t\t\ttransition: opacity 800ms linear;\n\t\t\t}\n\n\t\t\t/* Scrollable Content Inset Shadow */\n\t\t\t.monaco-scrollable-element > .shadow {\n\t\t\t\tposition: absolute;\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.top {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 3px;\n\t\t\t\theight: 3px;\n\t\t\t\twidth: 100%;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.left {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 3px;\n\t\t\t\tleft: 0;\n\t\t\t\theight: 100%;\n\t\t\t\twidth: 3px;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.top-left-corner {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 0;\n\t\t\t\theight: 3px;\n\t\t\t\twidth: 3px;\n\t\t\t}\n\t\t";const scrollbarShadowColor=style.scrollbarShadow;scrollbarShadowColor&&(result+=`\n\t\t\t\t.monaco-scrollable-element > .shadow.top {\n\t\t\t\t\tbox-shadow: ${scrollbarShadowColor} 0 6px 6px -6px inset;\n\t\t\t\t}\n\n\t\t\t\t.monaco-scrollable-element > .shadow.left {\n\t\t\t\t\tbox-shadow: ${scrollbarShadowColor} 6px 0 6px -6px inset;\n\t\t\t\t}\n\n\t\t\t\t.monaco-scrollable-element > .shadow.top.left {\n\t\t\t\t\tbox-shadow: ${scrollbarShadowColor} 6px 6px 6px -6px inset;\n\t\t\t\t}\n\t\t\t`);const scrollbarSliderBackgroundColor=style.scrollbarSliderBackground;scrollbarSliderBackgroundColor&&(result+=`\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider {\n\t\t\t\t\tbackground: ${scrollbarSliderBackgroundColor};\n\t\t\t\t}\n\t\t\t`);const scrollbarSliderHoverBackgroundColor=style.scrollbarSliderHoverBackground;scrollbarSliderHoverBackgroundColor&&(result+=`\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider:hover {\n\t\t\t\t\tbackground: ${scrollbarSliderHoverBackgroundColor};\n\t\t\t\t}\n\t\t\t`);const scrollbarSliderActiveBackgroundColor=style.scrollbarSliderActiveBackground;scrollbarSliderActiveBackgroundColor&&(result+=`\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider.active {\n\t\t\t\t\tbackground: ${scrollbarSliderActiveBackgroundColor};\n\t\t\t\t}\n\t\t\t`)}return result}