{"version":3,"sources":["direct_dom_renderer_integration_spec.js"],"names":[],"mappings":"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","file":"angular2/test/render/dom/direct_dom_renderer_integration_spec.es6","sourcesContent":["import {\n  AsyncTestCompleter,\n  beforeEach,\n  ddescribe,\n  describe,\n  el,\n  elementText,\n  expect,\n  iit,\n  inject,\n  it,\n  xit,\n  SpyObject,\n} from 'angular2/test_lib';\n\nimport {DOM} from 'angular2/src/dom/dom_adapter';\n\nimport {ProtoViewDto, ViewDefinition, RenderViewContainerRef, EventDispatcher, DirectiveMetadata} from 'angular2/src/render/api';\n\nimport {IntegrationTestbed, LoggingEventDispatcher, FakeEvent} from './integration_testbed';\n\nexport function main() {\n  describe('DirectDomRenderer integration', () => {\n    var testbed, renderer, eventPlugin, compileRoot, rootEl;\n\n    beforeEach(() => {\n      rootEl = el('<div></div>');\n    });\n\n    function createRenderer({urlData, viewCacheCapacity, shadowDomStrategy, templates}={}) {\n      testbed = new IntegrationTestbed({\n        urlData: urlData,\n        viewCacheCapacity: viewCacheCapacity,\n        shadowDomStrategy: shadowDomStrategy,\n        templates: templates\n      });\n      renderer = testbed.renderer;\n      eventPlugin = testbed.eventPlugin;\n      compileRoot = (componentId) => testbed.compileRoot(componentId);\n    }\n\n    it('should create host views while using the given elements in place', inject([AsyncTestCompleter], (async) => {\n      createRenderer();\n      renderer.createHostProtoView(someComponent).then( (rootProtoView) => {\n        expect(rootProtoView.elementBinders[0].directives[0].directiveIndex).toBe(0);\n        var viewRefs = renderer.createInPlaceHostView(null, rootEl, rootProtoView.render);\n        expect(viewRefs.length).toBe(1);\n        expect(viewRefs[0].delegate.rootNodes[0]).toEqual(rootEl);\n        async.done();\n      });\n    }));\n\n    it('should create imperative proto views', inject([AsyncTestCompleter], (async) => {\n      createRenderer();\n      renderer.createImperativeComponentProtoView('someRenderId').then( (rootProtoView) => {\n        expect(rootProtoView.elementBinders).toEqual([]);\n\n        expect(rootProtoView.render.delegate.imperativeRendererId).toBe('someRenderId');\n        async.done();\n      });\n    }));\n\n    it('should add a static component', inject([AsyncTestCompleter], (async) => {\n      createRenderer();\n      renderer.createHostProtoView(someComponent).then( (rootProtoView) => {\n        var template = new ViewDefinition({\n          componentId: 'someComponent',\n          template: 'hello',\n          directives: []\n        });\n        renderer.compile(template).then( (pv) => {\n          renderer.mergeChildComponentProtoViews(rootProtoView.render, [pv.render]);\n          renderer.createInPlaceHostView(null, rootEl, rootProtoView.render);\n          expect(rootEl).toHaveText('hello');\n          async.done();\n        });\n      });\n    }));\n\n    it('should add a a dynamic component', inject([AsyncTestCompleter], (async) => {\n      createRenderer();\n      renderer.createHostProtoView(someComponent).then( (rootProtoView) => {\n        var template = new ViewDefinition({\n          componentId: 'someComponent',\n          template: 'hello',\n          directives: []\n        });\n        renderer.compile(template).then( (pv) => {\n          var rootViewRef = renderer.createInPlaceHostView(null, rootEl, rootProtoView.render)[0];\n          renderer.createDynamicComponentView(rootViewRef, 0, pv.render)[0];\n          expect(rootEl).toHaveText('hello');\n          async.done();\n        });\n      });\n    }));\n\n    it('should update text nodes', inject([AsyncTestCompleter], (async) => {\n      createRenderer({\n        templates: [new ViewDefinition({\n          componentId: 'someComponent',\n          template: '{{a}}',\n          directives: []\n        })]\n      });\n      compileRoot(someComponent).then( (rootProtoView) => {\n        var viewRefs = renderer.createInPlaceHostView(null, rootEl, rootProtoView.render);\n        renderer.setText(viewRefs[1], 0, 'hello');\n        expect(rootEl).toHaveText('hello');\n        async.done();\n      });\n    }));\n\n    it('should update element properties', inject([AsyncTestCompleter], (async) => {\n      createRenderer({\n        templates: [new ViewDefinition({\n          componentId: 'someComponent',\n          template: '<input [value]=\"someProp\">',\n          directives: []\n        })]\n      });\n      compileRoot(someComponent).then( (rootProtoView) => {\n        var viewRefs = renderer.createInPlaceHostView(null, rootEl, rootProtoView.render);\n        renderer.setElementProperty(viewRefs[1], 0, 'value', 'hello');\n        expect(DOM.childNodes(rootEl)[0].value).toEqual('hello');\n        async.done();\n      });\n    }));\n\n    it('should add and remove views to and from containers', inject([AsyncTestCompleter], (async) => {\n      createRenderer({\n        templates: [new ViewDefinition({\n          componentId: 'someComponent',\n          template: '<template>hello</template>',\n          directives: []\n        })]\n      });\n      compileRoot(someComponent).then( (rootProtoView) => {\n        var viewRef = renderer.createInPlaceHostView(null, rootEl, rootProtoView.render)[1];\n        var vcProtoViewRef = rootProtoView.elementBinders[0]\n          .nestedProtoView.elementBinders[0].nestedProtoView.render;\n        var vcRef = new RenderViewContainerRef(viewRef, 0);\n        expect(rootEl).toHaveText('');\n        var childViewRef = renderer.createViewInContainer(vcRef, 0, vcProtoViewRef)[0];\n        expect(rootEl).toHaveText('hello');\n        renderer.detachViewFromContainer(vcRef, 0);\n        expect(rootEl).toHaveText('');\n        renderer.insertViewIntoContainer(vcRef, 0, childViewRef);\n        expect(rootEl).toHaveText('hello');\n        renderer.destroyViewInContainer(vcRef, 0);\n        expect(rootEl).toHaveText('');\n\n        async.done();\n      });\n    }));\n\n    it('should cache views', inject([AsyncTestCompleter], (async) => {\n      createRenderer({\n        templates: [new ViewDefinition({\n          componentId: 'someComponent',\n          template: '<template>hello</template>',\n          directives: []\n        })],\n        viewCacheCapacity: 2\n      });\n      compileRoot(someComponent).then( (rootProtoView) => {\n        var viewRef = renderer.createInPlaceHostView(null, rootEl, rootProtoView.render)[1];\n        var vcProtoViewRef = rootProtoView.elementBinders[0]\n          .nestedProtoView.elementBinders[0].nestedProtoView.render;\n        var vcRef = new RenderViewContainerRef(viewRef, 0);\n\n        var viewRef1 = renderer.createViewInContainer(vcRef, 0, vcProtoViewRef)[0];\n        renderer.destroyViewInContainer(vcRef, 0);\n        var viewRef2 = renderer.createViewInContainer(vcRef, 0, vcProtoViewRef)[0];\n        var viewRef3 = renderer.createViewInContainer(vcRef, 0, vcProtoViewRef)[0];\n        expect(viewRef2.delegate).toBe(viewRef1.delegate);\n        expect(viewRef3.delegate).not.toBe(viewRef1.delegate);\n\n        async.done();\n      });\n    }));\n\n    // TODO(tbosch): This is not working yet as we commented out\n    // the event expression processing...\n    xit('should handle events', inject([AsyncTestCompleter], (async) => {\n      createRenderer({\n        templates: [new ViewDefinition({\n          componentId: 'someComponent',\n          template: '<input (change)=\"$event.target.value\">',\n          directives: []\n        })]\n      });\n      compileRoot(someComponent).then( (rootProtoView) => {\n        var viewRef = renderer.createInPlaceHostView(null, rootEl, rootProtoView.render)[1];\n        var dispatcher = new LoggingEventDispatcher();\n        renderer.setEventDispatcher(viewRef, dispatcher);\n        var inputEl = DOM.childNodes(rootEl)[0];\n        inputEl.value = 'hello';\n        eventPlugin.dispatchEvent('change', new FakeEvent(inputEl));\n        expect(dispatcher.log).toEqual([[0, 'change', ['hello']]]);\n        async.done();\n      });\n\n    }));\n\n  });\n}\n\nvar someComponent = new DirectiveMetadata({\n  id: 'someComponent',\n  type: DirectiveMetadata.COMPONENT_TYPE,\n  selector: 'some-comp'\n});\n"]}