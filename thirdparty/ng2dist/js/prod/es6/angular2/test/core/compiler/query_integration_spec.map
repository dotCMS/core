{"version":3,"sources":["query_integration_spec.js"],"names":[],"mappings":"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","file":"angular2/test/core/compiler/query_integration_spec.es6","sourcesContent":["import {\n  AsyncTestCompleter,\n  beforeEach,\n  ddescribe,\n  describe,\n  el,\n  expect,\n  iit,\n  inject,\n  IS_NODEJS,\n  it,\n  xit,\n  } from 'angular2/test_lib';\n\nimport {TestBed} from 'angular2/src/test_lib/test_bed';\n\nimport {QueryList} from 'angular2/src/core/compiler/query_list';\nimport {Query} from 'angular2/src/core/annotations_impl/di';\n\nimport {If, For} from 'angular2/angular2';\n\nimport {Component, Directive} from 'angular2/src/core/annotations_impl/annotations';\nimport {View} from 'angular2/src/core/annotations_impl/view';\n\nimport {BrowserDomAdapter} from 'angular2/src/dom/browser_adapter';\n\nexport function main() {\n  BrowserDomAdapter.makeCurrent();\n  describe('Query API', () => {\n\n    it('should contain all directives in the light dom', inject([TestBed, AsyncTestCompleter], (tb, async) => {\n      var template =\n        '<div text=\"1\"></div>' +\n        '<needs-query text=\"2\"><div text=\"3\"></div></needs-query>' +\n        '<div text=\"4\"></div>';\n\n      tb.createView(MyComp, {html: template}).then((view) => {\n        view.detectChanges();\n        expect(view.rootNodes).toHaveText('2|3|');\n\n        async.done();\n      });\n    }));\n\n    it('should reflect dynamically inserted directives', inject([TestBed, AsyncTestCompleter], (tb, async) => {\n      var template =\n        '<div text=\"1\"></div>' +\n        '<needs-query text=\"2\"><div *if=\"shouldShow\" [text]=\"\\'3\\'\"></div></needs-query>' +\n        '<div text=\"4\"></div>';\n\n      tb.createView(MyComp, {html: template}).then((view) => {\n\n        view.detectChanges();\n        expect(view.rootNodes).toHaveText('2|');\n\n        view.context.shouldShow = true;\n        view.detectChanges();\n        // TODO(rado): figure out why the second tick is necessary.\n        view.detectChanges();\n        expect(view.rootNodes).toHaveText('2|3|');\n\n        async.done();\n      });\n    }));\n\n    it('should reflect moved directives', inject([TestBed, AsyncTestCompleter], (tb, async) => {\n      var template =\n        '<div text=\"1\"></div>' +\n        '<needs-query text=\"2\"><div *for=\"var i of list\" [text]=\"i\"></div></needs-query>' +\n        '<div text=\"4\"></div>';\n\n      tb.createView(MyComp, {html: template}).then((view) => {\n        view.detectChanges();\n        view.detectChanges();\n\n        expect(view.rootNodes).toHaveText('2|1d|2d|3d|');\n\n        view.context.list = ['3d', '2d'];\n        view.detectChanges();\n        view.detectChanges();\n        expect(view.rootNodes).toHaveText('2|3d|2d|');\n\n        async.done();\n      });\n    }));\n  });\n}\n\n@Component({selector: 'needs-query'})\n@View({\n  directives: [For],\n  template: '<div *for=\"var dir of query\">{{dir.text}}|</div>'\n})\nclass NeedsQuery {\n  query: QueryList;\n  constructor(@Query(TextDirective) query: QueryList) {\n    this.query = query;\n  }\n}\n\nvar _constructiontext = 0;\n\n@Directive({\n  selector: '[text]',\n  properties: {\n    'text': 'text'\n  }\n})\nclass TextDirective {\n  text: string;\n  constructor() {}\n}\n\n@Component({selector: 'my-comp'})\n@View({\n  directives: [NeedsQuery, TextDirective,  If, For]\n})\nclass MyComp {\n  shouldShow: boolean;\n  list;\n  constructor() {\n    this.shouldShow = false;\n    this.list = ['1d', '2d', '3d'];\n  }\n}\n"]}