{"version":3,"sources":["lexer.js"],"names":[],"mappings":"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","file":"angular2/src/change_detection/parser/lexer.es6","sourcesContent":["import {Injectable} from 'angular2/di';\nimport {List, ListWrapper, SetWrapper} from \"angular2/src/facade/collection\";\nimport {int, NumberWrapper, StringJoiner, StringWrapper} from \"angular2/src/facade/lang\";\n\nexport const TOKEN_TYPE_CHARACTER  = 1;\nexport const TOKEN_TYPE_IDENTIFIER = 2;\nexport const TOKEN_TYPE_KEYWORD    = 3;\nexport const TOKEN_TYPE_STRING     = 4;\nexport const TOKEN_TYPE_OPERATOR   = 5;\nexport const TOKEN_TYPE_NUMBER     = 6;\n\n@Injectable()\nexport class Lexer {\n  text:string;\n  tokenize(text:string):List {\n    var scanner = new _Scanner(text);\n    var tokens = [];\n    var token = scanner.scanToken();\n    while (token != null) {\n      ListWrapper.push(tokens, token);\n      token = scanner.scanToken();\n    }\n    return tokens;\n  }\n}\n\nexport class Token {\n  index:int;\n  type:int;\n  _numValue:number;\n  _strValue:string;\n  constructor(index:int, type:int, numValue:number, strValue:string) {\n    /**\n     * NOTE: To ensure that this constructor creates the same hidden class each time, ensure that\n     * all the fields are assigned to in the exact same order in each run of this constructor.\n     */\n    this.index = index;\n    this.type = type;\n    this._numValue = numValue;\n    this._strValue = strValue;\n  }\n\n  isCharacter(code:int):boolean {\n    return (this.type == TOKEN_TYPE_CHARACTER && this._numValue == code);\n  }\n\n  isNumber():boolean {\n    return (this.type == TOKEN_TYPE_NUMBER);\n  }\n\n  isString():boolean {\n    return (this.type == TOKEN_TYPE_STRING);\n  }\n\n  isOperator(operater:string):boolean {\n    return (this.type == TOKEN_TYPE_OPERATOR && this._strValue == operater);\n  }\n\n  isIdentifier():boolean {\n    return (this.type == TOKEN_TYPE_IDENTIFIER);\n  }\n\n  isKeyword():boolean {\n    return (this.type == TOKEN_TYPE_KEYWORD);\n  }\n\n  isKeywordVar():boolean {\n    return (this.type == TOKEN_TYPE_KEYWORD && this._strValue == \"var\");\n  }\n\n  isKeywordNull():boolean {\n    return (this.type == TOKEN_TYPE_KEYWORD && this._strValue == \"null\");\n  }\n\n  isKeywordUndefined():boolean {\n    return (this.type == TOKEN_TYPE_KEYWORD && this._strValue == \"undefined\");\n  }\n\n  isKeywordTrue():boolean {\n    return (this.type == TOKEN_TYPE_KEYWORD && this._strValue == \"true\");\n  }\n\n  isKeywordFalse():boolean {\n    return (this.type == TOKEN_TYPE_KEYWORD && this._strValue == \"false\");\n  }\n\n  toNumber():number {\n    // -1 instead of NULL ok?\n    return (this.type == TOKEN_TYPE_NUMBER) ? this._numValue : -1;\n  }\n\n  toString():string {\n    var type:int = this.type;\n    if (type >= TOKEN_TYPE_CHARACTER && type <= TOKEN_TYPE_STRING) {\n      return this._strValue;\n    } else if (type == TOKEN_TYPE_NUMBER) {\n      return this._numValue.toString();\n    } else {\n      return null;\n    }\n  }\n}\n\nfunction newCharacterToken(index:int, code:int):Token {\n  return new Token(index, TOKEN_TYPE_CHARACTER, code, StringWrapper.fromCharCode(code));\n}\n\nfunction newIdentifierToken(index:int, text:string):Token {\n  return new Token(index, TOKEN_TYPE_IDENTIFIER, 0, text);\n}\n\nfunction newKeywordToken(index:int, text:string):Token {\n  return new Token(index, TOKEN_TYPE_KEYWORD, 0, text);\n}\n\nfunction newOperatorToken(index:int, text:string):Token {\n  return new Token(index, TOKEN_TYPE_OPERATOR, 0, text);\n}\n\nfunction newStringToken(index:int, text:string):Token {\n  return new Token(index, TOKEN_TYPE_STRING, 0, text);\n}\n\nfunction newNumberToken(index:int, n:number):Token {\n  return new Token(index, TOKEN_TYPE_NUMBER, n, \"\");\n}\n\n\nexport var EOF:Token = new Token(-1, 0, 0, \"\");\n\nexport const $EOF       = 0;\nexport const $TAB       = 9;\nexport const $LF        = 10;\nexport const $VTAB      = 11;\nexport const $FF        = 12;\nexport const $CR        = 13;\nexport const $SPACE     = 32;\nexport const $BANG      = 33;\nexport const $DQ        = 34;\nexport const $HASH      = 35;\nexport const $$         = 36;\nexport const $PERCENT   = 37;\nexport const $AMPERSAND = 38;\nexport const $SQ        = 39;\nexport const $LPAREN    = 40;\nexport const $RPAREN    = 41;\nexport const $STAR      = 42;\nexport const $PLUS      = 43;\nexport const $COMMA     = 44;\nexport const $MINUS     = 45;\nexport const $PERIOD    = 46;\nexport const $SLASH     = 47;\nexport const $COLON     = 58;\nexport const $SEMICOLON = 59;\nexport const $LT        = 60;\nexport const $EQ        = 61;\nexport const $GT        = 62;\nexport const $QUESTION  = 63;\n\nconst $0 = 48;\nconst $9 = 57;\n\nconst $A = 65, $E = 69, $Z = 90;\n\nexport const $LBRACKET  = 91;\nexport const $BACKSLASH = 92;\nexport const $RBRACKET  = 93;\nconst $CARET     = 94;\nconst $_         = 95;\n\nconst $a =  97, $e = 101, $f = 102, $n = 110, $r = 114, $t = 116, $u = 117, $v = 118, $z = 122;\n\nexport const $LBRACE = 123;\nexport const $BAR    = 124;\nexport const $RBRACE = 125;\nconst $NBSP   = 160;\n\n\nexport class ScannerError extends Error {\n  message:string;\n  constructor(message) {\n    super();\n    this.message = message;\n  }\n\n  toString() {\n    return this.message;\n  }\n}\n\nclass _Scanner {\n  input:string;\n  length:int;\n  peek:int;\n  index:int;\n\n  constructor(input:string) {\n    this.input = input;\n    this.length = input.length;\n    this.peek = 0;\n    this.index = -1;\n    this.advance();\n  }\n\n  advance() {\n    this.peek = ++this.index >= this.length ? $EOF : StringWrapper.charCodeAt(this.input, this.index);\n  }\n\n  scanToken():Token {\n    var input = this.input,\n        length = this.length,\n        peek = this.peek,\n        index = this.index;\n\n    // Skip whitespace.\n    while (peek <= $SPACE) {\n      if (++index >= length) {\n        peek = $EOF;\n        break;\n      } else {\n        peek = StringWrapper.charCodeAt(input, index);\n      }\n    }\n\n    this.peek = peek;\n    this.index = index;\n\n    if (index >= length) {\n      return null;\n    }\n\n    // Handle identifiers and numbers.\n    if (isIdentifierStart(peek)) return this.scanIdentifier();\n    if (isDigit(peek)) return this.scanNumber(index);\n\n    var start:int = index;\n    switch (peek) {\n      case $PERIOD:\n        this.advance();\n        return isDigit(this.peek) ? this.scanNumber(start) :\n                                    newCharacterToken(start, $PERIOD);\n      case $LPAREN:   case $RPAREN:\n      case $LBRACE:   case $RBRACE:\n      case $LBRACKET: case $RBRACKET:\n      case $COMMA:\n      case $COLON:\n      case $SEMICOLON:\n        return this.scanCharacter(start, peek);\n      case $SQ:\n      case $DQ:\n        return this.scanString();\n      case $HASH:\n        return this.scanOperator(start, StringWrapper.fromCharCode(peek));\n      case $PLUS:\n      case $MINUS:\n      case $STAR:\n      case $SLASH:\n      case $PERCENT:\n      case $CARET:\n      case $QUESTION:\n        return this.scanOperator(start, StringWrapper.fromCharCode(peek));\n      case $LT:\n      case $GT:\n      case $BANG:\n      case $EQ:\n        return this.scanComplexOperator(start, $EQ, StringWrapper.fromCharCode(peek), '=');\n      case $AMPERSAND:\n        return this.scanComplexOperator(start, $AMPERSAND, '&', '&');\n      case $BAR:\n        return this.scanComplexOperator(start, $BAR, '|', '|');\n      case $NBSP:\n        while (isWhitespace(this.peek)) this.advance();\n        return this.scanToken();\n    }\n\n    this.error(`Unexpected character [${StringWrapper.fromCharCode(peek)}]`, 0);\n    return null;\n  }\n\n  scanCharacter(start:int, code:int):Token {\n    assert(this.peek == code);\n    this.advance();\n    return newCharacterToken(start, code);\n  }\n\n\n  scanOperator(start:int, str:string):Token {\n    assert(this.peek == StringWrapper.charCodeAt(str, 0));\n    assert(SetWrapper.has(OPERATORS, str));\n    this.advance();\n    return newOperatorToken(start, str);\n  }\n\n  scanComplexOperator(start:int, code:int, one:string, two:string):Token {\n    assert(this.peek == StringWrapper.charCodeAt(one, 0));\n    this.advance();\n    var str:string = one;\n    while (this.peek == code) {\n      this.advance();\n      str += two;\n    }\n    assert(SetWrapper.has(OPERATORS, str));\n    return newOperatorToken(start, str);\n  }\n\n  scanIdentifier():Token {\n    assert(isIdentifierStart(this.peek));\n    var start:int = this.index;\n    this.advance();\n    while (isIdentifierPart(this.peek)) this.advance();\n    var str:string = this.input.substring(start, this.index);\n    if (SetWrapper.has(KEYWORDS, str)) {\n      return newKeywordToken(start, str);\n    } else {\n      return newIdentifierToken(start, str);\n    }\n  }\n\n  scanNumber(start:int):Token {\n    assert(isDigit(this.peek));\n    var simple:boolean = (this.index === start);\n    this.advance();  // Skip initial digit.\n    while (true) {\n      if (isDigit(this.peek)) {\n        // Do nothing.\n      } else if (this.peek == $PERIOD) {\n        simple = false;\n      } else if (isExponentStart(this.peek)) {\n        this.advance();\n        if (isExponentSign(this.peek)) this.advance();\n        if (!isDigit(this.peek)) this.error('Invalid exponent', -1);\n        simple = false;\n      } else {\n        break;\n      }\n      this.advance();\n    }\n    var str:string = this.input.substring(start, this.index);\n    // TODO\n    var value:number = simple ? NumberWrapper.parseIntAutoRadix(str) : NumberWrapper.parseFloat(str);\n    return newNumberToken(start, value);\n  }\n\n  scanString():Token {\n    assert(this.peek == $SQ || this.peek == $DQ);\n    var start:int = this.index;\n    var quote:int = this.peek;\n    this.advance();  // Skip initial quote.\n\n    var buffer:StringJoiner;\n    var marker:int = this.index;\n    var input:string = this.input;\n\n    while (this.peek != quote) {\n      if (this.peek == $BACKSLASH) {\n        if (buffer == null) buffer = new StringJoiner();\n        buffer.add(input.substring(marker, this.index));\n        this.advance();\n        var unescapedCode:int;\n        if (this.peek == $u) {\n          // 4 character hex code for unicode character.\n          var hex:string = input.substring(this.index + 1, this.index + 5);\n          try {\n            unescapedCode = NumberWrapper.parseInt(hex, 16);\n          } catch (e) {\n            this.error(`Invalid unicode escape [\\\\u${hex}]`, 0);\n          }\n          for (var i:int = 0; i < 5; i++) {\n            this.advance();\n          }\n        } else {\n          unescapedCode = unescape(this.peek);\n          this.advance();\n        }\n        buffer.add(StringWrapper.fromCharCode(unescapedCode));\n        marker = this.index;\n      } else if (this.peek == $EOF) {\n        this.error('Unterminated quote', 0);\n      } else {\n        this.advance();\n      }\n    }\n\n    var last:string = input.substring(marker, this.index);\n    this.advance();  // Skip terminating quote.\n\n    // Compute the unescaped string value.\n    var unescaped:string = last;\n    if (buffer != null) {\n      buffer.add(last);\n      unescaped = buffer.toString();\n    }\n    return newStringToken(start, unescaped);\n  }\n\n  error(message:string, offset:int) {\n    var position:int = this.index + offset;\n    throw new ScannerError(`Lexer Error: ${message} at column ${position} in expression [${this.input}]`);\n  }\n}\n\nfunction isWhitespace(code:int):boolean {\n  return (code >= $TAB && code <= $SPACE) || (code == $NBSP);\n}\n\nfunction isIdentifierStart(code:int):boolean {\n  return ($a <= code && code <= $z) ||\n         ($A <= code && code <= $Z) ||\n         (code == $_) ||\n         (code == $$);\n}\n\nfunction isIdentifierPart(code:int):boolean {\n  return ($a <= code && code <= $z) ||\n         ($A <= code && code <= $Z) ||\n         ($0 <= code && code <= $9) ||\n         (code == $_) ||\n         (code == $$);\n}\n\nfunction isDigit(code:int):boolean {\n  return $0 <= code && code <= $9;\n}\n\nfunction isExponentStart(code:int):boolean {\n  return code == $e || code == $E;\n}\n\nfunction isExponentSign(code:int):boolean {\n  return code == $MINUS || code == $PLUS;\n}\n\nfunction unescape(code:int):int {\n  switch(code) {\n    case $n: return $LF;\n    case $f: return $FF;\n    case $r: return $CR;\n    case $t: return $TAB;\n    case $v: return $VTAB;\n    default: return code;\n  }\n}\n\nvar OPERATORS = SetWrapper.createFromList([\n  '+',\n  '-',\n  '*',\n  '/',\n  '%',\n  '^',\n  '=',\n  '==',\n  '!=',\n  '===',\n  '!==',\n  '<',\n  '>',\n  '<=',\n  '>=',\n  '&&',\n  '||',\n  '&',\n  '|',\n  '!',\n  '?',\n  '#'\n]);\n\n\nvar KEYWORDS = SetWrapper.createFromList([\n    'var',\n    'null',\n    'undefined',\n    'true',\n    'false'\n]);\n"]}