full_build_test: &full_build_test
  - '.sdkmanrc'
  - 'core-web/.nvmrc'
  - '.nvmrc'

backend: &backend
  - '.github/workflows/cicd_comp_*.yml'
  - '.github/workflows/cicd_1-pr.yml'
  - '.github/actions/core-cicd/**/action.yml'
  - 'bom/**'
  - 'build-parent/**'
  - 'core-web/pom.xml'
  - 'dotCMS/src/main/webapp/html/**/!(*.{css,js})'
  - 'dotcms-postman/**'
  - 'test-karate/**'
  - 'e2e/**'
  - 'dotCMS/!(src/main/webapp/html/)**'
  - 'dotcms-integration/**'
  - 'independent-projects/**'
  - 'maven-plugins/**'
  - 'osgi-base/**'
  - 'parent/**'
  - 'plugins-core/**'
  - 'pom.xml'
  - 'reports/**'
  - *full_build_test

frontend: &frontend
  - 'core-web/**'
  - 'dotCMS/src/main/webapp/html/**/*.{css,js}'
  - *full_build_test

cli: &cli
  - 'tools/dotcms-cli/**'

sdk_libs:
  - 'core-web/libs/sdk/**'

# PR area labeling filters
# These are separate from test-triggering filters to avoid false positives
# (e.g., workflow changes should trigger backend tests but shouldn't label PR as "Area : Backend")
area_backend:
  - 'dotCMS/**'
  - 'dotcms-integration/**'
  - 'dotcms-postman/**'
  - 'test-karate/**'
  - 'bom/**'
  - 'build-parent/**'
  - 'parent/**'
  - 'osgi-base/**'
  - 'plugins-core/**'
  - 'maven-plugins/**'
  - 'independent-projects/**'
  - 'reports/**'
  - 'pom.xml'

area_frontend:
  - 'core-web/**'
  - 'dotCMS/src/main/webapp/html/**/*.{css,js}'

area_cli:
  - 'tools/dotcms-cli/**'

area_sdk:
  - 'core-web/libs/sdk/**'

area_documentation:
  - 'docs/**'
  - '*.md'
  - 'CLAUDE.md'
  - '.github/**/*.md'
  - 'core-web/*.md'
  - 'dotCMS/*.md'
  - 'tools/**/*.md'

# IMPORTANT: Negation patterns (like '!pattern') do NOT work correctly with dorny/paths-filter
#
# Due to OR logic in dorny/paths-filter, separate negation patterns match ANY file not
# matching the negation (e.g., '!.github/**/*.md' matches all files in core-web/, dotCMS/).
# This is a known bug: https://github.com/dorny/paths-filter/issues/97
#
# Solution: Use explicit positive patterns only (no negations). Use wildcards for directories
# with many files (workflows/, actions/) and explicit paths for individual config files.
#
# This filter matches CI/CD code and configuration that affects build/test/deploy:
# - GitHub Actions workflows (all files in workflows/)
# - Custom GitHub Actions (all files in actions/)
# - CI/CD configuration files (filters, labels, test matrix)
#
# Does NOT match (intentionally excluded by not listing):
# - ISSUE_TEMPLATE/ and PULL_REQUEST_TEMPLATE/ (non-code metadata)
# - data/ directory (reference data like slack-mappings.json)
# - instructions/ directory (documentation)
# - *.md files (documentation)
# - copilot-instructions.md (AI tool configuration)
area_cicd:
  - '.github/workflows/**'
  - '.github/actions/**'
  - '.github/filters.yaml'
  - '.github/area-labels.yml'
  - '.github/test-matrix.yml'

jvm_unit_test:
  - *backend
  - *cli

build:
  - *backend
  - *cli
  - *frontend
