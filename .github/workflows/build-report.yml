name: CICD Reports
run-name: Reports - ${{ github.event.workflow_run.name }}
on:
  workflow_run:
    workflows: ['Maven CICD Pipeline']
    types: [completed]

permissions:
  checks: write

jobs:
  report:
    runs-on: ubuntu-latest
    if: github.event.workflow_run.conclusion != 'skipped'
    steps:
      - uses: dorny/test-reporter@v1
        with:
          artifact: /^build-reports-(.*)/        # artifact name
          name: 'MVN Test Report $1'               # Name of the check run which will be created
          path: '**/target/**/TEST-*.xml'                     # Path to test results (inside artifact .zip)
          reporter: java-junit            # Format of test results
