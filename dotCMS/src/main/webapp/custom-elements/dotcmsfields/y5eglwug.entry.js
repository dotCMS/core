const e=window.dotcmsFields.h;import{b as t,a as s,d as a,e as i,f as l,j as h,g as u,h as r,i as n,l as d}from"./chunk-41764761.js";class o{constructor(){this.disabled=!1,this.hint="",this.keyPlaceholder="",this.label="",this.name="",this.required=!1,this.requiredMessage="",this.saveBtnLabel="Add",this.valuePlaceholder="",this.value="",this.fieldType="",this.fieldKeyLabel="Key",this.fieldValueLabel="Value",this.buttonDeleteLabel="Delete",this.items=[],this.fieldInput={key:"",value:""}}valueWatch(){this.value=t(this,"value","string"),this.setItems()}reset(){this.fieldInput={key:"",value:""},this.items=[],this.status=s(this.isValid()),this.emitStatusChange(),this.emitValueChange()}deleteItemHandler(e){e.stopImmediatePropagation(),this.items=this.items.filter((t,s)=>s!==e.detail),this.refreshStatus(),this.emitStatusChange(),this.emitValueChange()}componentWillLoad(){this.validateProps(),this.setOriginalStatus(),this.emitStatusChange()}hostData(){return{class:a(this.status,this.isValid(),this.required)}}render(){return e(i,null,e("dot-label",{label:this.label,required:this.required,name:this.name},e("label",null,this.fieldKeyLabel,e("input",{class:l(this.status.dotValid),disabled:this.isDisabled(),id:h(this.name),name:"key",onInput:e=>this.setValue(e),placeholder:this.keyPlaceholder,type:"text",value:this.fieldInput.key})),e("label",null,this.fieldValueLabel,e("input",{class:l(this.status.dotValid),disabled:this.isDisabled(),name:"value",onInput:e=>this.setValue(e),placeholder:this.valuePlaceholder,type:"text",value:this.fieldInput.value})),e("button",{class:"dot-key-value__save__button",type:"button",disabled:this.disabled||null,onClick:()=>this.addKey()},this.saveBtnLabel),this.getKeyValueList()),u(this.hint,this.name),r(this.showErrorMessage(),this.getErrorMessage()))}validateProps(){this.valueWatch()}isDisabled(){return this.disabled||null}getKeyValueList(){return this.items.length?e("key-value-table",{items:this.items,disabled:this.disabled,buttonDeleteLabel:this.buttonDeleteLabel}):null}setItems(){this.items=this.value?this.value.split(",").filter(e=>e.length>0).map(e=>{const[t,s]=e.split("|");return{key:t,value:s}}):[]}setOriginalStatus(){this.status=s(this.isValid())}isValid(){return!(this.required&&!this.items.length)}showErrorMessage(){return this.getErrorMessage()&&!this.status.dotPristine}getErrorMessage(){return this.isValid()?"":this.requiredMessage}setValue(e){this.fieldInput[e.target.name]=e.target.value.toString()}refreshStatus(){this.status=n(this.status,{dotTouched:!0,dotPristine:!1,dotValid:this.isValid()})}emitStatusChange(){this.statusChange.emit({name:this.name,status:this.status})}emitValueChange(){const e=d(this.items);this.valueChange.emit({name:this.name,value:e,fieldType:this.fieldType})}addKey(){this.fieldInput.key&&this.fieldInput.value&&(this.items=[...this.items,{key:this.fieldInput.key,value:this.fieldInput.value}],this.refreshStatus(),this.emitStatusChange(),this.emitValueChange())}static get is(){return"dot-key-value"}static get properties(){return{buttonDeleteLabel:{type:String,attr:"button-delete-label"},disabled:{type:Boolean,attr:"disabled"},el:{elementRef:!0},fieldKeyLabel:{type:String,attr:"field-key-label"},fieldType:{type:String,attr:"field-type"},fieldValueLabel:{type:String,attr:"field-value-label"},hint:{type:String,attr:"hint"},items:{state:!0},keyPlaceholder:{type:String,attr:"key-placeholder"},label:{type:String,attr:"label"},name:{type:String,attr:"name"},required:{type:Boolean,attr:"required"},requiredMessage:{type:String,attr:"required-message"},reset:{method:!0},saveBtnLabel:{type:String,attr:"save-btn-label"},status:{state:!0},value:{type:String,attr:"value",mutable:!0,watchCallbacks:["valueWatch"]},valuePlaceholder:{type:String,attr:"value-placeholder"}}}static get events(){return[{name:"valueChange",method:"valueChange",bubbles:!0,cancelable:!0,composed:!0},{name:"statusChange",method:"statusChange",bubbles:!0,cancelable:!0,composed:!0}]}static get listeners(){return[{name:"deleteItemEvt",method:"deleteItemHandler"}]}static get style(){return""}}class b{constructor(){this.items=[],this.disabled=!1,this.buttonDeleteLabel="Delete"}render(){return e("table",null,e("tbody",null,this.items.map((t,s)=>e("tr",null,e("td",null,e("button",{type:"button",id:`${t.key}_${t.value}_${s}`,disabled:this.disabled||null,onClick:()=>this.deleteItem(s),class:"dot-key-value__delete-button"},this.buttonDeleteLabel)),e("td",null,t.key),e("td",null,t.value)))))}deleteItem(e){this.deleteItemEvt.emit(e)}static get is(){return"key-value-table"}static get properties(){return{buttonDeleteLabel:{type:String,attr:"button-delete-label"},disabled:{type:Boolean,attr:"disabled"},items:{type:"Any",attr:"items"}}}static get events(){return[{name:"deleteItemEvt",method:"deleteItemEvt",bubbles:!0,cancelable:!0,composed:!0}]}}export{o as DotKeyValue,b as KeyValueTable};