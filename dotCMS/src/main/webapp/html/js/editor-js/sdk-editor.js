function u(t){r({action:"edit-contentlet",payload:t})}function T(t=1){console.log("Called reorderMenu");let o=`/c/portal/layout?p_l_id=2df9f117-b140-44bf-93d7-5b10a36fb7f9&p_p_id=site-browser&p_p_action=1&p_p_state=maximized&_site_browser_struts_action=%2Fext%2Ffolders%2Forder_menu&startLevel=${t}&depth=2`;r({action:"reorder-menu",payload:{reorderUrl:o}})}function f(){return typeof window>"u"?!1:window.parent!==window}function m(){console.log("Called initDotUVE"),window.dotUVE=a}function g(){document.querySelectorAll('[data-dot-object="contentlet"]').forEach(o=>{o.clientHeight||o.classList.add("empty-contentlet")})}var a={editContentlet:u,reorderMenu:T,lastScrollYPosition:0};function r(t){window.parent.postMessage(t,"*")}function _(t){return t.map(o=>{let e=o.getBoundingClientRect(),n=Array.from(o.querySelectorAll('[data-dot-object="contentlet"]'));return{x:e.x,y:e.y,width:e.width,height:e.height,payload:JSON.stringify({container:y(o)}),contentlets:h(e,n)}})}function h(t,o){return o.map(e=>{let n=e.getBoundingClientRect();return{x:0,y:n.y-t.y,width:n.width,height:n.height,payload:JSON.stringify({container:e.dataset?.dotContainer?JSON.parse(e.dataset?.dotContainer):E(e),contentlet:{identifier:e.dataset?.dotIdentifier,title:e.dataset?.dotTitle,inode:e.dataset?.dotInode,contentType:e.dataset?.dotType}})}})}function y(t){return{acceptTypes:t.dataset?.dotAcceptTypes||"",identifier:t.dataset?.dotIdentifier||"",maxContentlets:t.dataset?.maxContentlets||"",uuid:t.dataset?.dotUuid||""}}function E(t){let o=t.closest('[data-dot-object="container"]');return o?y(o):(console.warn("No container found for the contentlet"),null)}function p(t){return t?t?.dataset?.dotObject==="contentlet"||t?.dataset?.dotObject==="container"&&t.children.length===0?t:p(t?.parentElement):null}function v(t){let o=t.querySelectorAll('[data-dot-object="vtl-file"]');return o.length?Array.from(o).map(e=>({inode:e.dataset?.dotInode,name:e.dataset?.dotUrl})):null}function M(){let t=document.documentElement.scrollHeight,o=window.innerHeight;return window.scrollY+o>=t}var i=[];function S(){let t=Array.from(document.querySelectorAll('[data-dot-object="container"]')),o=_(t);r({action:"set-bounds",payload:o})}function s(){let t=o=>{({"uve-reload-page":()=>{window.location.reload()},"uve-request-bounds":()=>{S()},"uve-scroll-inside-iframe":()=>{let n=o.data.direction;if(window.scrollY===0&&n==="up"||M()&&n==="down")return;let d=n==="up"?-120:120;window.scrollBy({left:0,top:d,behavior:"smooth"})}})[o.data.name]?.()};window.addEventListener("message",t),i.push({type:"listener",event:"message",callback:t})}function l(){let t=o=>{let e=p(o.target);if(!e)return;let{x:n,y:d,width:C,height:b}=e.getBoundingClientRect(),w=e.dataset?.dotObject==="container",P={identifier:"TEMP_EMPTY_CONTENTLET",title:"TEMP_EMPTY_CONTENTLET",contentType:"TEMP_EMPTY_CONTENTLET_TYPE",inode:"TEMPY_EMPTY_CONTENTLET_INODE",widgetTitle:"TEMP_EMPTY_CONTENTLET",baseType:"TEMP_EMPTY_CONTENTLET",onNumberOfPages:1},L={identifier:e.dataset?.dotIdentifier,title:e.dataset?.dotTitle,inode:e.dataset?.dotInode,contentType:e.dataset?.dotType,baseType:e.dataset?.dotBasetype,widgetTitle:e.dataset?.dotWidgetTitle,onNumberOfPages:e.dataset?.dotOnNumberOfPages},O=v(e),N={container:e.dataset?.dotContainer?JSON.parse(e.dataset?.dotContainer):E(e),contentlet:w?P:L,vtlFiles:O};r({action:"set-contentlet",payload:{x:n,y:d,width:C,height:b,payload:N}})};document.addEventListener("pointermove",t),i.push({type:"listener",event:"pointermove",callback:t})}function c(){let t=()=>{r({action:"scroll"}),window.dotUVE={...window.dotUVE??a,lastScrollYPosition:window.scrollY}},o=()=>{r({action:"scroll-end"})};window.addEventListener("scroll",t),window.addEventListener("scrollend",o),i.push({type:"listener",event:"scroll",callback:o}),i.push({type:"listener",event:"scroll",callback:t})}function D(){let t=()=>{window.scrollTo(0,window.dotUVE?.lastScrollYPosition)};window.addEventListener("load",t),i.push({type:"listener",event:"scroll",callback:t})}f()&&(m(),s(),c(),D(),l(),g());
