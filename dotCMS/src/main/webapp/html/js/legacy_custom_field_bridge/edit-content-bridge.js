(function(){"use strict";class a{constructor(e,t){this.form=e,this.zone=t,this.subscriptions=new Map}get(e){var t;return(t=this.form.get(e))==null?void 0:t.value}set(e,t){this.zone.run(()=>{const n=this.form.get(e);n&&n.value!==t&&(n.setValue(t,{emitEvent:!1}),n.markAsTouched(),n.updateValueAndValidity({emitEvent:!1}))})}onChangeField(e,t){var s;const n=this.subscriptions.get(e);n&&(n.unsubscribe(),this.subscriptions.delete(e));const i=(s=this.form.get(e))==null?void 0:s.valueChanges.subscribe(o=>{this.zone.run(()=>t(o))});i&&this.subscriptions.set(e,i)}destroy(){this.subscriptions.forEach(e=>e.unsubscribe()),this.subscriptions.clear()}}class l{constructor(){this.fieldListeners=new Map,document.addEventListener("beforeunload",()=>this.destroy())}get(e){try{const t=document.getElementById(e);return t instanceof HTMLInputElement?t.value:null}catch(t){return console.warn("Unable to get field value:",t),null}}set(e,t){try{const n=document.getElementById(e);n instanceof HTMLInputElement&&(n.value=String(t??""),n.dispatchEvent(new Event("change",{bubbles:!0})))}catch(n){console.warn("Error setting field value:",n)}}onChangeField(e,t){try{this.cleanupFieldListeners(e);const n=document.getElementById(e);if(n instanceof HTMLInputElement){const i=[{event:"keyup",handler:s=>t(s.target.value)},{event:"change",handler:s=>t(s.target.value)}];i.forEach(({event:s,handler:o})=>{n.addEventListener(s,o)}),this.fieldListeners.set(e,{element:n,handlers:i})}}catch(n){console.warn("Error watching field:",n)}}cleanupFieldListeners(e){const t=this.fieldListeners.get(e);if(t){const{element:n,handlers:i}=t;i.forEach(({event:s,handler:o})=>{n.removeEventListener(s,o)}),this.fieldListeners.delete(e)}}destroy(){Array.from(this.fieldListeners.keys()).forEach(e=>{this.cleanupFieldListeners(e)}),this.loadHandler&&(window.removeEventListener("load",this.loadHandler),this.loadHandler=void 0)}ready(e){this.loadHandler=()=>{e(this)},window.addEventListener("load",this.loadHandler)}}function c(r){return r.type==="angular"?new a(r.form,r.zone):new l}if(typeof window<"u"){const r=c({type:"dojo"});window.DotCustomFieldApi=r}})();
