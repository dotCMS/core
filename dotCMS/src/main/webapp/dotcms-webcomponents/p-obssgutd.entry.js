import{r as t,c as s,h as i,H as e,g as h}from"./p-17c4ed33.js";import{c as a,j as l,h as r,a as u,f as d,b as o,e as n,u as c,g as b}from"./p-f1ae637c.js";const g=({label:t,value:s})=>({key:t,value:s}),m=class{constructor(i){t(this,i),this.value="",this.name="",this.label="",this.hint="",this.required=!1,this.requiredMessage="This field is required",this.disabled=!1,this.items=[],this.dotValueChange=s(this,"dotValueChange",7),this.dotStatusChange=s(this,"dotStatusChange",7)}valueWatch(){this.value=a(this,"value","string"),this.items=l(this.value).map(g)}reset(){this.items=[],this.value="",this.status=r(this.isValid()),this.emitChanges()}deleteItemHandler(t){t.stopImmediatePropagation(),this.items=this.items.filter((s,i)=>i!==t.detail),this.refreshStatus(),this.emitChanges()}addItemHandler({detail:t}){this.items=[...this.items,t],this.refreshStatus(),this.emitChanges()}componentWillLoad(){this.validateProps(),this.setOriginalStatus(),this.emitStatusChange()}render(){const t=u(this.status,this.isValid(),this.required);return i(e,{class:Object.assign({},t)},i("dot-label",{"aria-describedby":n(this.hint),tabIndex:this.hint?0:null,label:this.label,required:this.required,name:this.name},i("key-value-form",{onLostFocus:this.blurHandler.bind(this),"add-button-label":this.formAddButtonLabel,disabled:this.isDisabled(),"key-label":this.formKeyLabel,"key-placeholder":this.formKeyPlaceholder,"value-label":this.formValueLabel,"value-placeholder":this.formValuePlaceholder}),i("key-value-table",{onClick:t=>{t.preventDefault()},"button-label":this.listDeleteLabel,disabled:this.isDisabled(),items:this.items})),o(this.hint),d(this.showErrorMessage(),this.getErrorMessage()))}isDisabled(){return this.disabled||null}blurHandler(){this.status.dotTouched||(this.status=c(this.status,{dotTouched:!0}),this.emitStatusChange())}validateProps(){this.valueWatch()}setOriginalStatus(){this.status=r(this.isValid())}isValid(){return!(this.required&&!this.items.length)}showErrorMessage(){return this.getErrorMessage()&&!this.status.dotPristine}getErrorMessage(){return this.isValid()?"":this.requiredMessage}refreshStatus(){this.status=c(this.status,{dotTouched:!0,dotPristine:!1,dotValid:this.isValid()})}emitStatusChange(){this.dotStatusChange.emit({name:this.name,status:this.status})}emitValueChange(){const t=b(this.items);this.dotValueChange.emit({name:this.name,value:t})}emitChanges(){this.emitStatusChange(),this.emitValueChange()}get el(){return h(this)}static get watchers(){return{value:["valueWatch"]}}static get style(){return""}};export{m as dot_key_value};