var __awaiter=this&&this.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i["throw"](e))}catch(t){o(t)}}function l(e){e.done?n(e.value):r(e.value).then(s,a)}l((i=i.apply(e,t||[])).next())}))};var __generator=this&&this.__generator||function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,r,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol==="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(e){return function(t){return l([e,t])}}function l(s){if(i)throw new TypeError("Generator is already executing.");while(n)try{if(i=1,r&&(o=s[0]&2?r["return"]:s[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;if(r=0,o)s=[s[0]&2,o.value];switch(s[0]){case 0:case 1:o=s;break;case 4:n.label++;return{value:s[1],done:false};case 5:n.label++;r=s[1];s=[0];continue;case 7:s=n.ops.pop();n.trys.pop();continue;default:if(!(o=n.trys,o=o.length>0&&o[o.length-1])&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!o||s[1]>o[0]&&s[1]<o[3])){n.label=s[1];break}if(s[0]===6&&n.label<o[1]){n.label=o[1];o=s;break}if(o&&n.label<o[2]){n.label=o[2];n.ops.push(s);break}if(o[2])n.ops.pop();n.trys.pop();continue}s=t.call(e,n)}catch(a){s=[6,a];r=0}finally{i=o=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:true}}};System.register(["./p-aa15c74d.system.js","./p-5c3fd70d.system.js"],(function(e){"use strict";var t,n,i,r,o,s,a;return{setters:[function(e){t=e.r;n=e.c;i=e.h;r=e.g;o=e.H},function(e){s=e.c;a=e.a}],execute:function(){var l=s((function(e,t){(function(t,n){e.exports=n()})(a,(function(){function e(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}function n(e,n,i){if(n)t(e.prototype,n);if(i)t(e,i);return e}var i="data-id";var r={resultsList:"autoComplete_list",result:"autoComplete_result",highlight:"autoComplete_highlighted",selectedResult:"autoComplete_selected"};var o={ENTER:13,ARROW_UP:38,ARROW_DOWN:40};var s=function e(t){return typeof t==="string"?document.querySelector(t):t()};var a=function e(t){var n=document.createElement(t.element);n.setAttribute("id",r.resultsList);if(t.container){t.container(n)}t.destination.insertAdjacentElement(t.position,n);return n};var l=function e(t){return"<span class=".concat(r.highlight,">").concat(t,"</span>")};var u=function e(t,n,o){var s=document.createDocumentFragment();n.forEach((function(e,t){var a=document.createElement(o.element);var l=n[t].index;a.setAttribute(i,l);a.setAttribute("class",r.result);o.content?o.content(e,a):a.innerHTML=e.match||e;s.appendChild(a)}));t.appendChild(s)};var c=function e(t){return t.innerHTML=""};var h=function e(t,n,r,s,a,l){s({event:t,query:n instanceof HTMLInputElement?n.value:n.innerHTML,matches:a.matches,results:a.list.map((function(e){return e.value})),selection:a.list.find((function(e){if(t.keyCode===o.ENTER){return e.index===Number(l.getAttribute(i))}else if(t.type==="mousedown"){return e.index===Number(t.currentTarget.getAttribute(i))}}))});c(r)};var f=function e(t,n,i,s){var a=n.childNodes,l=a.length-1;var u=undefined,c;var f=function e(t){u.classList.remove(r.selectedResult);if(t===1){c=u.nextSibling}else{c=u.previousSibling}};var d=function e(t){u=t;u.classList.add(r.selectedResult)};t.onkeydown=function(e){if(a.length>0){switch(e.keyCode){case o.ARROW_UP:if(u){f(0);if(c){d(c)}else{d(a[l])}}else{d(a[l])}break;case o.ARROW_DOWN:if(u){f(1);if(c){d(c)}else{d(a[0])}}else{d(a[0])}break;case o.ENTER:if(u){h(e,t,n,i,s,u)}}}};a.forEach((function(e){e.onmousedown=function(e){return h(e,t,n,i,s)}}))};var d={getInput:s,createResultsList:a,highlight:l,addResultsToList:u,navigation:f,clearResults:c};var p=function e(t,n){n=n||{bubbles:false,cancelable:false,detail:undefined};var i=document.createEvent("CustomEvent");i.initCustomEvent(t,n.bubbles,n.cancelable,n.detail);return i};p.prototype=window.Event.prototype;var v=typeof window.CustomEvent==="function"&&window.CustomEvent||p;var m=function e(){if(!Element.prototype.matches){Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector}if(!Element.prototype.closest){Element.prototype.closest=function(e){var t=this;do{if(t.matches(e)){return t}t=t.parentElement||t.parentNode}while(t!==null&&t.nodeType===1);return null}}};var g={CustomEventWrapper:v,initElementClosestPolyfill:m};var y=function(){function t(n){e(this,t);var i=n.selector,r=i===void 0?"#autoComplete":i,o=n.data,s=o.key,a=o.src,l=o.cache,u=l===void 0?true:l,c=n.query,h=n.trigger;h=h===void 0?{}:h;var f=h.event,p=f===void 0?["input"]:f,v=h.condition,m=v===void 0?false:v,g=n.searchEngine,y=g===void 0?"strict":g,b=n.threshold,E=b===void 0?0:b,w=n.debounce,L=w===void 0?0:w,R=n.resultsList;R=R===void 0?{}:R;var _=R.render,T=_===void 0?false:_,x=R.container,C=x===void 0?false:x,k=R.destination,S=R.position,A=S===void 0?"afterend":S,I=R.element,D=I===void 0?"ul":I,O=R.navigation,H=O===void 0?false:O,P=n.sort,M=P===void 0?false:P,q=n.placeHolder,j=n.maxResults,N=j===void 0?5:j,W=n.resultItem;W=W===void 0?{}:W;var F=W.content,B=F===void 0?false:F,K=W.element,V=K===void 0?"li":K,U=n.noResults,X=n.highlight,Y=X===void 0?false:X,G=n.onSelection;var z=T?d.createResultsList({container:C,destination:k||d.getInput(r),position:A,element:D}):null;this.selector=r;this.data={src:function e(){return typeof a==="function"?a():a},key:s,cache:u};this.query=c;this.trigger={event:p,condition:m};this.searchEngine=y==="loose"?"loose":typeof y==="function"?y:"strict";this.threshold=E;this.debounce=L;this.resultsList={render:T,view:z,navigation:H};this.sort=M;this.placeHolder=q;this.maxResults=N;this.resultItem={content:B,element:V};this.noResults=U;this.highlight=Y;this.onSelection=G;this.init()}n(t,[{key:"search",value:function e(t,n){var i=n.toLowerCase();if(this.searchEngine==="loose"){t=t.replace(/ /g,"");var r=[];var o=0;for(var s=0;s<i.length;s++){var a=n[s];if(o<t.length&&i[s]===t[o]){a=this.highlight?d.highlight(a):a;o++}r.push(a)}if(o!==t.length){return false}return r.join("")}else{if(i.includes(t)){var l=new RegExp("".concat(t),"i");t=l.exec(n);return this.highlight?n.replace(t,d.highlight(t)):n}}}},{key:"listMatchedResults",value:function e(t){var n=this;return new Promise((function(e){var i=[];t.filter((function(e,t){var r=function r(o){var s=o?e[o]:e;if(s){var a=typeof n.searchEngine==="function"?n.searchEngine(n.queryValue,s):n.search(n.queryValue,s);if(a&&o){i.push({key:o,index:t,match:a,value:e})}else if(a&&!o){i.push({index:t,match:a,value:e})}}};if(n.data.key){var o=true;var s=false;var a=undefined;try{for(var l=n.data.key[Symbol.iterator](),u;!(o=(u=l.next()).done);o=true){var c=u.value;r(c)}}catch(h){s=true;a=h}finally{try{if(!o&&l["return"]!=null){l["return"]()}}finally{if(s){throw a}}}}else{r()}}));var r=n.sort?i.sort(n.sort).slice(0,n.maxResults):i.slice(0,n.maxResults);return e({matches:i.length,list:r})}))}},{key:"ignite",value:function e(){var t=this;var n=d.getInput(this.selector);if(this.placeHolder){n.setAttribute("placeholder",this.placeHolder)}var i=function e(t,n){var i;return function(){var e=this;var r=arguments;clearTimeout(i);i=setTimeout((function(){return t.apply(e,r)}),n)}};var r=function e(i){var r=n instanceof HTMLInputElement||n instanceof HTMLTextAreaElement?n.value.toLowerCase():n.innerHTML.toLowerCase();var o=t.queryValue=t.query&&t.query.manipulate?t.query.manipulate(r):r;var s=t.resultsList.render;var a=t.trigger.condition?t.trigger.condition(o):o.length>t.threshold&&o.replace(/ /g,"").length;var l=function e(t,i){n.dispatchEvent(new g.CustomEventWrapper("autoComplete",{bubbles:true,detail:{event:t,input:r,query:o,matches:i?i.matches:null,results:i?i.list:null},cancelable:true}))};if(s){var u=t.resultsList.view;var c=d.clearResults(u);if(a){t.listMatchedResults(t.dataStream,i).then((function(e){l(i,e);if(t.resultsList.render){if(e.list.length===0&&t.noResults){t.noResults()}else{d.addResultsToList(u,e.list,t.resultItem);if(t.onSelection){t.resultsList.navigation?t.resultsList.navigation(i,n,u,t.onSelection,e):d.navigation(n,u,t.onSelection,e)}}}}))}else{l(i)}}else if(!s&&a){t.listMatchedResults(t.dataStream,i).then((function(e){l(i,e)}))}};var o=function e(n){Promise.resolve(t.data.cache?t.dataStream:t.data.src()).then((function(e){t.dataStream=e;r(n)}))};this.trigger.event.forEach((function(e){n.addEventListener(e,i((function(e){return o(e)}),t.debounce))}))}},{key:"init",value:function e(){var t=this;if(this.data.cache){Promise.resolve(this.data.src()).then((function(e){t.dataStream=e;t.ignite()}))}else{this.ignite()}g.initElementClosestPolyfill()}}]);return t}();return y}))}));var u=e("dot_autocomplete",function(){function e(e){t(this,e);this.disabled=false;this.placeholder="";this.threshold=0;this.maxResults=0;this.debounce=300;this.data=null;this.id="autoComplete"+(new Date).getTime();this.keyEvent={Enter:this.emitEnter.bind(this),Escape:this.clean.bind(this)};this.selection=n(this,"selection",7);this.enter=n(this,"enter",7);this.lostFocus=n(this,"lostFocus",7)}e.prototype.componentDidLoad=function(){if(this.data){this.initAutocomplete()}};e.prototype.render=function(){var e=this;return i("input",{autoComplete:"off",disabled:this.disabled||null,id:this.id,onBlur:function(t){return e.handleBlur(t)},onKeyDown:function(t){return e.handleKeyDown(t)},placeholder:this.placeholder||null})};e.prototype.watchThreshold=function(){this.initAutocomplete()};e.prototype.watchData=function(){this.initAutocomplete()};e.prototype.watchMaxResults=function(){this.initAutocomplete()};e.prototype.handleKeyDown=function(e){var t=this.getInputElement().value;if(t&&this.keyEvent[e.key]){e.preventDefault();this.keyEvent[e.key](t)}};e.prototype.handleBlur=function(e){var t=this;e.preventDefault();setTimeout((function(){if(document.activeElement.parentElement!==t.getResultList()){t.clean();t.lostFocus.emit(e)}}),0)};e.prototype.clean=function(){this.getInputElement().value="";this.cleanOptions()};e.prototype.cleanOptions=function(){this.getResultList().innerHTML=""};e.prototype.emitselect=function(e){this.clean();this.selection.emit(e)};e.prototype.emitEnter=function(e){if(e){this.clean();this.enter.emit(e)}};e.prototype.getInputElement=function(){return this.el.querySelector("#"+this.id)};e.prototype.initAutocomplete=function(){var e=this;this.clearList();new l({data:{src:function(){return __awaiter(e,void 0,void 0,(function(){return __generator(this,(function(e){return[2,this.getData()]}))}))}},sort:function(e,t){if(e.match<t.match){return-1}if(e.match>t.match){return 1}return 0},placeHolder:this.placeholder,selector:"#"+this.id,threshold:this.threshold,searchEngine:"strict",highlight:true,maxResults:this.maxResults,debounce:this.debounce,resultsList:{container:function(){return e.getResultListId()},destination:this.getInputElement(),position:"afterend"},resultItem:function(e){var t=e.match;return t},onSelection:function(t){var n=t.event,i=t.selection;n.preventDefault();e.focusOnInput();e.emitselect(i.value)}})};e.prototype.clearList=function(){var e=this.getResultList();if(e){e.remove()}};e.prototype.focusOnInput=function(){this.getInputElement().focus()};e.prototype.getResultList=function(){return this.el.querySelector("#"+this.getResultListId())};e.prototype.getResultListId=function(){return this.id+"_results_list"};e.prototype.getData=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,n;return __generator(this,(function(i){switch(i.label){case 0:e=this.getInputElement();e.setAttribute("placeholder","Loading...");if(!(typeof this.data==="function"))return[3,2];return[4,this.data()];case 1:n=i.sent();return[3,3];case 2:n=[];i.label=3;case 3:t=n;e.setAttribute("placeholder",this.placeholder||"");return[2,t]}}))}))};Object.defineProperty(e.prototype,"el",{get:function(){return r(this)},enumerable:true,configurable:true});Object.defineProperty(e,"watchers",{get:function(){return{threshold:["watchThreshold"],data:["watchData"],maxResults:["watchMaxResults"]}},enumerable:true,configurable:true});Object.defineProperty(e,"style",{get:function(){return"dot-autocomplete input{-webkit-box-sizing:border-box;box-sizing:border-box;width:200px}dot-autocomplete ul{background-color:#fff;list-style:none;margin:0;max-height:300px;overflow:auto;padding:0;position:absolute;width:200px}dot-autocomplete ul li{background-color:#fff;border-top:0;border:1px solid #ccc;-webkit-box-sizing:border-box;box-sizing:border-box;cursor:pointer;padding:.25rem}dot-autocomplete ul li:first-child{border-top:1px solid #ccc}dot-autocomplete ul li:focus{background-color:#ffffe0;outline:0}dot-autocomplete ul li .autoComplete_highlighted{font-weight:700}"},enumerable:true,configurable:true});return e}());var c=e("dot_chip",function(){function e(e){t(this,e);this.label="";this.deleteLabel="Delete";this.disabled=false;this.remove=n(this,"remove",7)}e.prototype.render=function(){var e=this;var t=this.label?this.deleteLabel+" "+this.label:null;return i(o,null,i("span",null,this.label),i("button",{type:"button","aria-label":t,disabled:this.disabled,onClick:function(){return e.remove.emit(e.label)}},this.deleteLabel))};Object.defineProperty(e.prototype,"el",{get:function(){return r(this)},enumerable:true,configurable:true});Object.defineProperty(e,"style",{get:function(){return"dot-chip span{margin-right:.25rem}dot-chip button{cursor:pointer}"},enumerable:true,configurable:true});return e}())}}}));