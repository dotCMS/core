var nn=(Y,q,F)=>{if(!q.has(Y))throw TypeError("Cannot "+F)};var Se=(Y,q,F)=>(nn(Y,q,"read from private field"),F?F.call(Y):q.get(Y)),He=(Y,q,F)=>{if(q.has(Y))throw TypeError("Cannot add the same private member more than once");q instanceof WeakSet?q.add(Y):q.set(Y,F)},Xe=(Y,q,F,Pe)=>(nn(Y,q,"write to private field"),Pe?Pe.call(Y,F):q.set(Y,F),F);(function(){"use strict";var Te,we,Ie;function Y(e,t,n,r,o){for(t=t.split?t.split("."):t,r=0;r<t.length;r++)e=e?e[t[r]]:o;return e===o?n:e}var q="undefined",F="object",Pe="any",lt="*",re="__",De=typeof process<"u"?process:{};De.env&&De.env.NODE_ENV;var G=typeof document<"u";De.versions!=null&&De.versions.node!=null,typeof Deno<"u"&&Deno.core,G&&window.name==="nodejs"||typeof navigator<"u"&&navigator.userAgent!==void 0&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom"));function ft(e,t){return t.charAt(0)[e]()+t.slice(1)}var rn=ft.bind(null,"toUpperCase"),on=ft.bind(null,"toLowerCase");function an(e){return dt(e)?rn("null"):typeof e=="object"?fn(e):Object.prototype.toString.call(e).slice(8,-1)}function Le(e,t){t===void 0&&(t=!0);var n=an(e);return t?on(n):n}function Ee(e,t){return typeof t===e}var K=Ee.bind(null,"function"),se=Ee.bind(null,"string"),le=Ee.bind(null,"undefined"),un=Ee.bind(null,"boolean");Ee.bind(null,"symbol");function dt(e){return e===null}function cn(e){return Le(e)==="number"&&!isNaN(e)}function sn(e){return Le(e)==="array"}function J(e){if(!ln(e))return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function ln(e){return e&&(typeof e=="object"||e!==null)}function fn(e){return K(e.constructor)?e.constructor.name:null}function dn(e){return e instanceof Error||se(e.message)&&e.constructor&&cn(e.constructor.stackTraceLimit)}function pt(e,t){if(typeof t!="object"||dt(t))return!1;if(t instanceof e)return!0;var n=Le(new e(""));if(dn(t))for(;t;){if(Le(t)===n)return!0;t=Object.getPrototypeOf(t)}return!1}pt.bind(null,TypeError),pt.bind(null,SyntaxError);function ze(e,t){var n=e instanceof Element||e instanceof HTMLDocument;return n&&t?pn(e,t):n}function pn(e,t){return t===void 0&&(t=""),e&&e.nodeName===t.toUpperCase()}function Ce(e){var t=[].slice.call(arguments,1);return function(){return e.apply(void 0,[].slice.call(arguments).concat(t))}}Ce(ze,"form"),Ce(ze,"button"),Ce(ze,"input"),Ce(ze,"select");function gt(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch{return null}}function gn(){if(G){var e=navigator,t=e.languages;return e.userLanguage||(t&&t.length?t[0]:e.language)}}function mn(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{}}function vn(e){return function(t){for(var n,r=Object.create(null),o=/([^&=]+)=?([^&]*)/g;n=o.exec(t);){var u=gt(n[1]),c=gt(n[2]);u.substring(u.length-2)==="[]"?(r[u=u.substring(0,u.length-2)]||(r[u]=[])).push(c):r[u]=c===""||c}for(var s in r){var S=s.split("[");S.length>1&&(hn(r,S.map(function(v){return v.replace(/[?[\]\\ ]/g,"")}),r[s]),delete r[s])}return r}(function(t){return G&&window.location.search.substring(1)}())}function hn(e,t,n){for(var r=t.length-1,o=0;o<r;++o){var u=t[o];if(u==="__proto__"||u==="constructor")break;u in e||(e[u]={}),e=e[u]}e[t[r]]=n}function Me(){for(var e="",t=0,n=4294967295*Math.random()|0;t++<36;){var r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx"[t-1],o=15&n;e+=r=="-"||r=="4"?r:(r=="x"?o:3&o|8).toString(16),n=t%8==0?4294967295*Math.random()|0:n>>4}return e}var Oe="global",fe=re+"global"+re,de=typeof self===F&&self.self===self&&self||typeof global===F&&global.global===global&&global||void 0;function ie(e){return de[fe][e]}function oe(e,t){return de[fe][e]=t}function pe(e){delete de[fe][e]}function ge(e,t,n){var r;try{if(Ge(e)){var o=window[e];r=o[t].bind(o)}}catch{}return r||n}de[fe]||(de[fe]={});var Ue={};function Ge(e){if(typeof Ue[e]!==q)return Ue[e];try{var t=window[e];t.setItem(q,q),t.removeItem(q)}catch{return Ue[e]=!1}return Ue[e]=!0}function p(){return p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p.apply(this,arguments)}var ee="function",Z="undefined",yn="@@redux/"+Math.random().toString(36),mt=function(){return typeof Symbol===ee&&Symbol.observable||"@@observable"}(),Ve=" != "+ee;function vt(e,t,n){var r;if(typeof t===ee&&typeof n===Z&&(n=t,t=void 0),typeof n!==Z){if(typeof n!==ee)throw new Error("enhancer"+Ve);return n(vt)(e,t)}if(typeof e!==ee)throw new Error("reducer"+Ve);var o=e,u=t,c=[],s=c,S=!1;function v(){s===c&&(s=c.slice())}function z(){return u}function m(h){if(typeof h!==ee)throw new Error("Listener"+Ve);var k=!0;return v(),s.push(h),function(){if(k){k=!1,v();var P=s.indexOf(h);s.splice(P,1)}}}function E(h){if(!J(h))throw new Error("Act != obj");if(typeof h.type===Z)throw new Error("ActType "+Z);if(S)throw new Error("Dispatch in reducer");try{S=!0,u=o(u,h)}finally{S=!1}for(var k=c=s,P=0;P<k.length;P++)(0,k[P])();return h}return E({type:"@@redux/INIT"}),(r={dispatch:E,subscribe:m,getState:z,replaceReducer:function(h){if(typeof h!==ee)throw new Error("next reducer"+Ve);o=h,E({type:"@@redux/INIT"})}})[mt]=function(){var h,k=m;return(h={subscribe:function(P){if(typeof P!="object")throw new TypeError("Observer != obj");function b(){P.next&&P.next(z())}return b(),{unsubscribe:k(b)}}})[mt]=function(){return this},h},r}function bn(e,t){var n=t&&t.type;return"action "+(n&&n.toString()||"?")+"reducer "+e+" returns "+Z}function me(){var e=[].slice.call(arguments);return e.length===0?function(t){return t}:e.length===1?e[0]:e.reduce(function(t,n){return function(){return t(n.apply(void 0,[].slice.call(arguments)))}})}function wn(){var e=arguments;return function(t){return function(n,r,o){var u,c=t(n,r,o),s=c.dispatch,S={getState:c.getState,dispatch:function(v){return s(v)}};return u=[].slice.call(e).map(function(v){return v(S)}),p({},c,{dispatch:s=me.apply(void 0,u)(c.dispatch)})}}}var te=re+"anon_id",ae=re+"user_id",ve=re+"user_traits",ne="userId",he="anonymousId",qe=["bootstrap","params","campaign","initializeStart","initialize","initializeEnd","ready","resetStart","reset","resetEnd","pageStart","page","pageEnd","pageAborted","trackStart","track","trackEnd","trackAborted","identifyStart","identify","identifyEnd","identifyAborted","userIdChanged","registerPlugins","enablePlugin","disablePlugin","online","offline","setItemStart","setItem","setItemEnd","setItemAborted","removeItemStart","removeItem","removeItemEnd","removeItemAborted"],Ke=["name","EVENTS","config","loaded"],g=qe.reduce(function(e,t){return e[t]=t,e},{registerPluginType:function(e){return"registerPlugin:"+e},pluginReadyType:function(e){return"ready:"+e}}),ht=/^utm_/,yt=/^an_prop_/,bt=/^an_trait_/;function In(e){var t=e.storage.setItem;return function(n){return function(r){return function(o){if(o.type===g.bootstrap){var u=o.params,c=o.user,s=o.persistedUser,S=o.initialUser,v=s.userId===c.userId;s.anonymousId!==c.anonymousId&&t(te,c.anonymousId),v||t(ae,c.userId),S.traits&&t(ve,p({},v&&s.traits?s.traits:{},S.traits));var z=Object.keys(o.params);if(z.length){var m=u.an_uid,E=u.an_event,h=z.reduce(function(k,P){if(P.match(ht)||P.match(/^(d|g)clid/)){var b=P.replace(ht,"");k.campaign[b==="campaign"?"name":b]=u[P]}return P.match(yt)&&(k.props[P.replace(yt,"")]=u[P]),P.match(bt)&&(k.traits[P.replace(bt,"")]=u[P]),k},{campaign:{},props:{},traits:{}});n.dispatch(p({type:g.params,raw:u},h,m?{userId:m}:{})),m&&setTimeout(function(){return e.identify(m,h.traits)},0),E&&setTimeout(function(){return e.track(E,h.props)},0),Object.keys(h.campaign).length&&n.dispatch({type:g.campaign,campaign:h.campaign})}}return r(o)}}}}function Sn(e){return function(t,n){if(t===void 0&&(t={}),n===void 0&&(n={}),n.type===g.setItemEnd){if(n.key===te)return p({},t,{anonymousId:n.value});if(n.key===ae)return p({},t,{userId:n.value})}switch(n.type){case g.identify:return Object.assign({},t,{userId:n.userId,traits:p({},t.traits,n.traits)});case g.reset:return[ae,te,ve].forEach(function(r){e.removeItem(r)}),Object.assign({},t,{userId:null,anonymousId:null,traits:{}});default:return t}}}function wt(e){return{userId:e.getItem(ae),anonymousId:e.getItem(te),traits:e.getItem(ve)}}var Qe=function(e){return re+"TEMP"+re+e};function Pn(e){var t=e.storage,n=t.setItem,r=t.removeItem,o=t.getItem;return function(u){return function(c){return function(s){var S=s.userId,v=s.traits,z=s.options;if(s.type===g.reset&&([ae,ve,te].forEach(function(h){r(h)}),[ne,he,"traits"].forEach(function(h){pe(Qe(h))})),s.type===g.identify){o(te)||n(te,Me());var m=o(ae),E=o(ve)||{};m&&m!==S&&u.dispatch({type:g.userIdChanged,old:{userId:m,traits:E},new:{userId:S,traits:v},options:z}),S&&n(ae,S),v&&n(ve,p({},E,v))}return c(s)}}}}var Ae={};function It(e,t){Ae[e]&&K(Ae[e])&&(Ae[e](t),delete Ae[e])}function St(e,t,n){return new Promise(function(r,o){return t()?r(e):n<1?o(p({},e,{queue:!0})):new Promise(function(u){return setTimeout(u,10)}).then(function(u){return St(e,t,n-10).then(r,o)})})}function En(e){return{abort:e}}function Pt(e,t,n){var r={},o=t(),u=e.getState(),c=u.plugins,s=u.queue,S=u.user;if(!u.context.offline&&s&&s.actions&&s.actions.length){var v=s.actions.reduce(function(m,E,h){return c[E.plugin].loaded?(m.process.push(E),m.processIndex.push(h)):(m.requeue.push(E),m.requeueIndex.push(h)),m},{processIndex:[],process:[],requeue:[],requeueIndex:[]});if(v.processIndex&&v.processIndex.length){v.processIndex.forEach(function(m){var E=s.actions[m],h=E.plugin,k=E.payload.type,P=o[h][k];if(P&&K(P)){var b,x=function(d,l){return d===void 0&&(d={}),l===void 0&&(l={}),[ne,he].reduce(function(D,O){return d.hasOwnProperty(O)&&l[O]&&l[O]!==d[O]&&(D[O]=l[O]),D},d)}(E.payload,S),$=r[x.meta.rid];if(!$&&(b=P({payload:x,config:c[h].config,instance:n,abort:En}))&&J(b)&&b.abort)return void(r[x.meta.rid]=!0);if(!$){var T=k+":"+h;e.dispatch(p({},x,{type:T,_:{called:T,from:"queueDrain"}}))}}});var z=s.actions.filter(function(m,E){return!~v.processIndex.indexOf(E)});s.actions=z}}}var Ze=function(e){var t=e.data,n=e.action,r=e.instance,o=e.state,u=e.allPlugins,c=e.allMatches,s=e.store,S=e.EVENTS;try{var v=o.plugins,z=o.context,m=n.type,E=m.match(ye),h=t.exact.map(function(b){return b.pluginName});E&&(h=c.during.map(function(b){return b.pluginName}));var k=function(b,x){return function($,T,d){var l=T.config,D=T.name,O=D+"."+$.type;d&&(O=d.event);var N=$.type.match(ye)?function(C,L,H,M,X){return function(V,y){var W=M?M.name:C,B=y&&_e(y)?y:H;if(M&&(!(B=y&&_e(y)?y:[C]).includes(C)||B.length!==1))throw new Error("Method "+L+" can only abort "+C+" plugin. "+JSON.stringify(B)+" input valid");return p({},X,{abort:{reason:V,plugins:B,caller:L,_:W}})}}(D,O,x,d,$):function(C,L){return function(){throw new Error(C.type+" action not cancellable. Remove abort in "+L)}}($,O);return{payload:On($),instance:b,config:l||{},abort:N}}}(r,h),P=t.exact.reduce(function(b,x){var $=x.pluginName,T=x.methodName,d=!1;return T.match(/^initialize/)||T.match(/^reset/)||(d=!v[$].loaded),z.offline&&T.match(/^(page|track|identify)/)&&(d=!0),b[""+$]=d,b},{});return Promise.resolve(t.exact.reduce(function(b,x,$){try{var T=x.pluginName;return Promise.resolve(b).then(function(d){function l(){return Promise.resolve(d)}var D=function(){if(t.namespaced&&t.namespaced[T])return Promise.resolve(t.namespaced[T].reduce(function(O,N,C){try{return Promise.resolve(O).then(function(L){return N.method&&K(N.method)?(function(V,y){var W=Tt(V);if(W&&W.name===y){var B=Tt(W.method);throw new Error([y+" plugin is calling method "+V,"Plugins cant call self","Use "+W.method+" "+(B?"or "+B.method:"")+" in "+y+" plugin insteadof "+V].join(`
`))}}(N.methodName,N.pluginName),Promise.resolve(N.method({payload:L,instance:r,abort:(H=L,M=T,X=N.pluginName,function(V,y){return p({},H,{abort:{reason:V,plugins:y||[M],caller:m,from:X||M}})}),config:At(N.pluginName,v,u),plugins:v})).then(function(V){var y=J(V)?V:{};return Promise.resolve(p({},L,y))})):L;var H,M,X})}catch(L){return Promise.reject(L)}},Promise.resolve(n))).then(function(O){d[T]=O});d[T]=n}();return D&&D.then?D.then(l):l()})}catch(d){return Promise.reject(d)}},Promise.resolve({}))).then(function(b){return Promise.resolve(t.exact.reduce(function(x,$,T){try{var d=t.exact.length===T+1,l=$.pluginName,D=u[l];return Promise.resolve(x).then(function(O){var N=b[l]?b[l]:{};if(E&&(N=O),tt(N,l))return et({data:N,method:m,instance:r,pluginName:l,store:s}),Promise.resolve(O);if(tt(O,l))return d&&et({data:O,method:m,instance:r,store:s}),Promise.resolve(O);if(P.hasOwnProperty(l)&&P[l]===!0)return s.dispatch({type:"queue",plugin:l,payload:N,_:{called:"queue",from:"queueMechanism"}}),Promise.resolve(O);var C=k(b[l],u[l]);return Promise.resolve(D[m]({abort:C.abort,payload:N,instance:r,config:At(l,v,u),plugins:v})).then(function(L){var H=J(L)?L:{},M=p({},O,H),X=b[l];if(tt(X,l))et({data:X,method:m,instance:r,pluginName:l,store:s});else{var V=m+":"+l;(V.match(/:/g)||[]).length<2&&!m.match(Et)&&!m.match(Ot)&&r.dispatch(p({},E?M:N,{type:V,_:{called:V,from:"submethod"}}))}return Promise.resolve(M)})})}catch(O){return Promise.reject(O)}},Promise.resolve(n))).then(function(x){if(!(m.match(ye)||m.match(/^registerPlugin/)||m.match(Ot)||m.match(Et)||m.match(/^params/)||m.match(/^userIdChanged/))){if(S.plugins.includes(m),x._&&x._.originalAction===m)return x;var $=p({},x,{_:{originalAction:x.type,called:x.type,from:"engineEnd"}});Nt(x,t.exact.length)&&!m.match(/End$/)&&($=p({},$,{type:x.type+"Aborted"})),s.dispatch($)}return x})})}catch(b){return Promise.reject(b)}},ye=/Start$/,Et=/^bootstrap/,Ot=/^ready/;function et(e){var t=e.pluginName,n=e.method+"Aborted"+(t?":"+t:"");e.store.dispatch(p({},e.data,{type:n,_:{called:n,from:"abort"}}))}function At(e,t,n){var r=t[e]||n[e];return r&&r.config?r.config:{}}function _t(e,t){return t.reduce(function(n,r){return r[e]?n.concat({methodName:e,pluginName:r.name,method:r[e]}):n},[])}function xt(e,t){var n=e.replace(ye,""),r=t?":"+t:"";return[""+e+r,""+n+r,n+"End"+r]}function tt(e,t){var n=e.abort;return!!n&&(n===!0||jt(n,t)||n&&jt(n.plugins,t))}function Nt(e,t){var n=e.abort;if(!n)return!1;if(n===!0||se(n))return!0;var r=n.plugins;return _e(n)&&n.length===t||_e(r)&&r.length===t}function _e(e){return Array.isArray(e)}function jt(e,t){return!(!e||!_e(e))&&e.includes(t)}function Tt(e){var t=e.match(/(.*):(.*)/);return!!t&&{method:t[1],name:t[2]}}function On(e){return Object.keys(e).reduce(function(t,n){return n==="type"||(t[n]=J(e[n])?Object.assign({},e[n]):e[n]),t},{})}function An(e,t,n){var r={};return function(o){return function(u){return function(c){try{var s,S=function(d){return s?d:u(m)},v=c.type,z=c.plugins,m=c;if(c.abort)return Promise.resolve(u(c));if(v===g.enablePlugin&&o.dispatch({type:g.initializeStart,plugins:z,disabled:[],fromEnable:!0,meta:c.meta}),v===g.disablePlugin&&setTimeout(function(){return It(c.meta.rid,{payload:c})},0),v===g.initializeEnd){var E=t(),h=Object.keys(E),k=h.filter(function(d){return z.includes(d)}).map(function(d){return E[d]}),P=[],b=[],x=c.disabled,$=k.map(function(d){var l=d.loaded,D=d.name,O=d.config;return St(d,function(){return l({config:O})},1e4).then(function(N){return r[D]||(o.dispatch({type:g.pluginReadyType(D),name:D,events:Object.keys(d).filter(function(C){return!Ke.includes(C)})}),r[D]=!0),P=P.concat(D),d}).catch(function(N){if(N instanceof Error)throw new Error(N);return b=b.concat(N.name),N})});Promise.all($).then(function(d){var l={plugins:P,failed:b,disabled:x};setTimeout(function(){h.length===$.length+x.length&&o.dispatch(p({},{type:g.ready},l))},0)})}var T=function(){if(v!==g.bootstrap)return/^ready:([^:]*)$/.test(v)&&setTimeout(function(){return Pt(o,t,e)},0),Promise.resolve(function(d,l,D,O,N){try{var C=K(l)?l():l,L=d.type,H=L.replace(ye,"");if(d._&&d._.called)return Promise.resolve(d);var M=D.getState(),X=(W=C,(B=M.plugins)===void 0&&(B={}),(ke=d.options)===void 0&&(ke={}),Object.keys(W).filter(function(i){var a=ke.plugins||{};return un(a[i])?a[i]:a.all!==!1&&(!B[i]||B[i].enabled!==!1)}).map(function(i){return W[i]}));L===g.initializeStart&&d.fromEnable&&(X=Object.keys(M.plugins).filter(function(i){var a=M.plugins[i];return d.plugins.includes(i)&&!a.initialized}).map(function(i){return C[i]}));var V=X.map(function(i){return i.name}),y=function(i,a,f){var w=xt(i).map(function(I){return _t(I,a)});return a.reduce(function(I,A){var R=A.name,j=xt(i,R).map(function($e){return _t($e,a)}),U=j[0],_=j[1],Q=j[2];return U.length&&(I.beforeNS[R]=U),_.length&&(I.duringNS[R]=_),Q.length&&(I.afterNS[R]=Q),I},{before:w[0],beforeNS:{},during:w[1],duringNS:{},after:w[2],afterNS:{}})}(L,X);return Promise.resolve(Ze({action:d,data:{exact:y.before,namespaced:y.beforeNS},state:M,allPlugins:C,allMatches:y,instance:D,store:O,EVENTS:N})).then(function(i){function a(){var I=function(){if(L.match(ye))return Promise.resolve(Ze({action:p({},f,{type:H+"End"}),data:{exact:y.after,namespaced:y.afterNS},state:M,allPlugins:C,allMatches:y,instance:D,store:O,EVENTS:N})).then(function(A){A.meta&&A.meta.hasCallback&&It(A.meta.rid,{payload:A})})}();return I&&I.then?I.then(function(){return i}):i}if(Nt(i,V.length))return i;var f,w=function(){if(L!==H)return Promise.resolve(Ze({action:p({},i,{type:H}),data:{exact:y.during,namespaced:y.duringNS},state:M,allPlugins:C,allMatches:y,instance:D,store:O,EVENTS:N})).then(function(I){f=I});f=i}();return w&&w.then?w.then(a):a()})}catch(i){return Promise.reject(i)}var W,B,ke}(c,t,e,o,n)).then(function(d){return s=1,u(d)})}();return Promise.resolve(T&&T.then?T.then(S):S(T))}catch(d){return Promise.reject(d)}}}}}function _n(e){return function(t){return function(n){return function(r){var o=r.type,u=r.key,c=r.value,s=r.options;if(o===g.setItem||o===g.removeItem){if(r.abort)return n(r);o===g.setItem?e.setItem(u,c,s):e.removeItem(u,s)}return n(r)}}}}var xn=function(){var e=this;this.before=[],this.after=[],this.addMiddleware=function(t,n){e[n]=e[n].concat(t)},this.removeMiddleware=function(t,n){var r=e[n].findIndex(function(o){return o===t});r!==-1&&(e[n]=[].concat(e[n].slice(0,r),e[n].slice(r+1)))},this.dynamicMiddlewares=function(t){return function(n){return function(r){return function(o){var u={getState:n.getState,dispatch:function(s){return n.dispatch(s)}},c=e[t].map(function(s){return s(u)});return me.apply(void 0,c)(r)(o)}}}}};function Nn(e){return function(t,n){t===void 0&&(t={});var r={};if(n.type==="initialize:aborted")return t;if(/^registerPlugin:([^:]*)$/.test(n.type)){var o=kt(n.type,"registerPlugin"),u=e()[o];if(!u||!o)return t;var c=n.enabled,s=u.config;return r[o]={enabled:c,initialized:!!c&&!u.initialize,loaded:!!c&&!!u.loaded({config:s}),config:s},p({},t,r)}if(/^initialize:([^:]*)$/.test(n.type)){var S=kt(n.type,g.initialize),v=e()[S];return v&&S?(r[S]=p({},t[S],{initialized:!0,loaded:!!v.loaded({config:v.config})}),p({},t,r)):t}if(/^ready:([^:]*)$/.test(n.type))return r[n.name]=p({},t[n.name],{loaded:!0}),p({},t,r);switch(n.type){case g.disablePlugin:return p({},t,$t(n.plugins,!1,t));case g.enablePlugin:return p({},t,$t(n.plugins,!0,t));default:return t}}}function kt(e,t){return e.substring(t.length+1,e.length)}function $t(e,t,n){return e.reduce(function(r,o){return r[o]=p({},n[o],{enabled:t}),r},n)}function Dt(e){try{return JSON.parse(JSON.stringify(e))}catch{}return e}var jn={last:{},history:[]};function Tn(e,t){e===void 0&&(e=jn);var n=t.options,r=t.meta;if(t.type===g.track){var o=Dt(p({event:t.event,properties:t.properties},Object.keys(n).length&&{options:n},{meta:r}));return p({},e,{last:o,history:e.history.concat(o)})}return e}var kn={actions:[]};function $n(e,t){e===void 0&&(e=kn);var n=t.payload;switch(t.type){case"queue":var r;return r=n&&n.type&&n.type===g.identify?[t].concat(e.actions):e.actions.concat(t),p({},e,{actions:r});case"dequeue":return[];default:return e}}var Lt=/#.*$/;function Dn(e){var t=/(http[s]?:\/\/)?([^\/\s]+\/)(.*)/g.exec(e);return"/"+(t&&t[3]?t[3].split("?")[0].replace(Lt,""):"")}var zt,Ct,Mt,Ut,Ln=function(e){if(e===void 0&&(e={}),!G)return e;var t=document,n=t.title,r=t.referrer,o=window,u=o.location,c=o.innerWidth,s=o.innerHeight,S=u.hash,v=u.search,z=function(E){var h=function(){if(G){for(var k,P=document.getElementsByTagName("link"),b=0;k=P[b];b++)if(k.getAttribute("rel")==="canonical")return k.getAttribute("href")}}();return h?h.match(/\?/)?h:h+E:window.location.href.replace(Lt,"")}(v),m={title:n,url:z,path:Dn(z),hash:S,search:v,width:c,height:s};return r&&r!==""&&(m.referrer=r),p({},m,e)},zn={last:{},history:[]};function Cn(e,t){e===void 0&&(e=zn);var n=t.options;if(t.type===g.page){var r=Dt(p({properties:t.properties,meta:t.meta},Object.keys(n).length&&{options:n}));return p({},e,{last:r,history:e.history.concat(r)})}return e}zt=function(){if(!G)return!1;var e=navigator.appVersion;return~e.indexOf("Win")?"Windows":~e.indexOf("Mac")?"MacOS":~e.indexOf("X11")?"UNIX":~e.indexOf("Linux")?"Linux":"Unknown OS"}(),Ct=G?document.referrer:null,Mt=gn(),Ut=mn();var Vt={initialized:!1,sessionId:Me(),app:null,version:null,debug:!1,offline:!!G&&!navigator.onLine,os:{name:zt},userAgent:G?navigator.userAgent:"node",library:{name:"analytics",version:"0.12.14"},timezone:Ut,locale:Mt,campaign:{},referrer:Ct};function Mn(e,t){e===void 0&&(e=Vt);var n=e.initialized,r=t.campaign;switch(t.type){case g.campaign:return p({},e,{campaign:r});case g.offline:return p({},e,{offline:!0});case g.online:return p({},e,{offline:!1});default:return n?e:p({},Vt,e,{initialized:!0})}}var Un=["plugins","reducers","storage"];function Vn(e,t,n){if(G){var r=window[(n?"add":"remove")+"EventListener"];e.split(" ").forEach(function(o){r(o,t)})}}function qn(e){var t=Vn.bind(null,"online offline",function(n){return Promise.resolve(!navigator.onLine).then(e)});return t(!0),function(n){return t(!1)}}function qt(){return oe("analytics",[]),function(e){return function(t,n,r){var o=e(t,n,r),u=o.dispatch;return Object.assign(o,{dispatch:function(c){return de[fe].analytics.push(c.action||c),u(c)}})}}}function Rt(e){return function(){return me(me.apply(null,arguments),qt())}}function nt(e){return e?sn(e)?e:[e]:[]}function Yt(e,t,n){e===void 0&&(e={});var r,o,u=Me();return t&&(Ae[u]=(r=t,o=function(c){for(var s,S=c||Array.prototype.slice.call(arguments),v=0;v<S.length;v++)if(K(S[v])){s=S[v];break}return s}(n),function(c){o&&o(c),r(c)})),p({},e,{rid:u,ts:new Date().getTime()},t?{hasCallback:!0}:{})}function Rn(e){e===void 0&&(e={});var t=e.reducers||{},n=e.initialUser||{},r=(e.plugins||[]).reduce(function(i,a){if(K(a))return i.middlewares=i.middlewares.concat(a),i;if(a.NAMESPACE&&(a.name=a.NAMESPACE),!a.name)throw new Error("https://lytics.dev/errors/1");a.config||(a.config={});var f=a.EVENTS?Object.keys(a.EVENTS).map(function(A){return a.EVENTS[A]}):[];i.pluginEnabled[a.name]=!(a.enabled===!1||a.config.enabled===!1),delete a.enabled,a.methods&&(i.methods[a.name]=Object.keys(a.methods).reduce(function(A,R){var j;return A[R]=(j=a.methods[R],function(){for(var U=Array.prototype.slice.call(arguments),_=new Array(j.length),Q=0;Q<U.length;Q++)_[Q]=U[Q];return _[_.length]=l,j.apply({instance:l},_)}),A},{}),delete a.methods);var w=Object.keys(a).concat(f),I=new Set(i.events.concat(w));if(i.events=Array.from(I),i.pluginsArray=i.pluginsArray.concat(a),i.plugins[a.name])throw new Error(a.name+"AlreadyLoaded");return i.plugins[a.name]=a,i.plugins[a.name].loaded||(i.plugins[a.name].loaded=function(){return!0}),i},{plugins:{},pluginEnabled:{},methods:{},pluginsArray:[],middlewares:[],events:[]}),o=e.storage?e.storage:{getItem:ie,setItem:oe,removeItem:pe},u=function(i){return function(a,f,w){return f.getState("user")[a]||(w&&J(w)&&w[a]?w[a]:wt(i)[a]||ie(Qe(a))||null)}}(o),c=r.plugins,s=r.events.filter(function(i){return!Ke.includes(i)}).sort(),S=new Set(s.concat(qe).filter(function(i){return!Ke.includes(i)})),v=Array.from(S).sort(),z=function(){return c},m=new xn,E=m.addMiddleware,h=m.removeMiddleware,k=m.dynamicMiddlewares,P=function(){throw new Error("Abort disabled inListener")},b=vn(),x=wt(o),$=p({},x,n,b.an_uid?{userId:b.an_uid}:{},b.an_aid?{anonymousId:b.an_aid}:{});$.anonymousId||($.anonymousId=Me());var T=p({enable:function(i,a){return new Promise(function(f){y.dispatch({type:g.enablePlugin,plugins:nt(i),_:{originalAction:g.enablePlugin}},f,[a])})},disable:function(i,a){return new Promise(function(f){y.dispatch({type:g.disablePlugin,plugins:nt(i),_:{originalAction:g.disablePlugin}},f,[a])})}},r.methods),d=!1,l={identify:function(i,a,f,w){try{var I=se(i)?i:null,A=J(i)?i:a,R=f||{},j=l.user();oe(Qe(ne),I);var U=I||A.userId||u(ne,l,A);return Promise.resolve(new Promise(function(_){y.dispatch(p({type:g.identifyStart,userId:U,traits:A||{},options:R,anonymousId:j.anonymousId},j.id&&j.id!==I&&{previousId:j.id}),_,[a,f,w])}))}catch(_){return Promise.reject(_)}},track:function(i,a,f,w){try{var I=J(i)?i.event:i;if(!I||!se(I))throw new Error("EventMissing");var A=J(i)?i:a||{},R=J(f)?f:{};return Promise.resolve(new Promise(function(j){y.dispatch({type:g.trackStart,event:I,properties:A,options:R,userId:u(ne,l,a),anonymousId:u(he,l,a)},j,[a,f,w])}))}catch(j){return Promise.reject(j)}},page:function(i,a,f){try{var w=J(i)?i:{},I=J(a)?a:{};return Promise.resolve(new Promise(function(A){y.dispatch({type:g.pageStart,properties:Ln(w),options:I,userId:u(ne,l,w),anonymousId:u(he,l,w)},A,[i,a,f])}))}catch(A){return Promise.reject(A)}},user:function(i){if(i===ne||i==="id")return u(ne,l);if(i===he||i==="anonId")return u(he,l);var a=l.getState("user");return i?Y(a,i):a},reset:function(i){return new Promise(function(a){y.dispatch({type:g.resetStart},a,i)})},ready:function(i){return d&&i({plugins:T,instance:l}),l.on(g.ready,function(a){i(a),d=!0})},on:function(i,a){if(!i||!K(a))return!1;if(i===g.bootstrap)throw new Error(".on disabled for "+i);var f=/Start$|Start:/;if(i==="*"){var w=function(j){return function(U){return function(_){return _.type.match(f)&&a({payload:_,instance:l,plugins:c}),U(_)}}},I=function(j){return function(U){return function(_){return _.type.match(f)||a({payload:_,instance:l,plugins:c}),U(_)}}};return E(w,Re),E(I,Ye),function(){h(w,Re),h(I,Ye)}}var A=i.match(f)?Re:Ye,R=function(j){return function(U){return function(_){return _.type===i&&a({payload:_,instance:l,plugins:c,abort:P}),U(_)}}};return E(R,A),function(){return h(R,A)}},once:function(i,a){if(!i||!K(a))return!1;if(i===g.bootstrap)throw new Error(".once disabled for "+i);var f=l.on(i,function(w){a({payload:w.payload,instance:l,plugins:c,abort:P}),f()});return f},getState:function(i){var a=y.getState();return i?Y(a,i):Object.assign({},a)},dispatch:function(i){var a=se(i)?{type:i}:i;if(qe.includes(a.type))throw new Error("reserved action "+a.type);var f=p({},a,{_:p({originalAction:a.type},i._||{})});y.dispatch(f)},enablePlugin:T.enable,disablePlugin:T.disable,plugins:T,storage:{getItem:o.getItem,setItem:function(i,a,f){y.dispatch({type:g.setItemStart,key:i,value:a,options:f})},removeItem:function(i,a){y.dispatch({type:g.removeItemStart,key:i,options:a})}},setAnonymousId:function(i,a){l.storage.setItem(te,i,a)},events:{core:qe,plugins:s}},D=r.middlewares.concat([function(i){return function(a){return function(f){return f.meta||(f.meta=Yt()),a(f)}}},k(Re),An(l,z,{all:v,plugins:s}),_n(o),In(l),Pn(l),k(Ye)]),O={context:Mn,user:Sn(o),page:Cn,track:Tn,plugins:Nn(z),queue:$n},N=me,C=me;if(G&&e.debug){var L=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__;L&&(N=L({trace:!0,traceLimit:25})),C=function(){return arguments.length===0?qt():J(typeof arguments[0])?Rt():Rt().apply(null,arguments)}}var H,M=function(i){return Object.keys(i).reduce(function(a,f){return Un.includes(f)||(a[f]=i[f]),a},{})}(e),X=r.pluginsArray.reduce(function(i,a){var f=a.name,w=a.config,I=a.loaded,A=r.pluginEnabled[f];return i[f]={enabled:A,initialized:!!A&&!a.initialize,loaded:!!I({config:w}),config:w},i},{}),V={context:M,user:$,plugins:X},y=vt(function(i){for(var a=Object.keys(i),f={},w=0;w<a.length;w++){var I=a[w];typeof i[I]===ee&&(f[I]=i[I])}var A,R=Object.keys(f);try{(function(j){Object.keys(j).forEach(function(U){var _=j[U];if(typeof _(void 0,{type:"@@redux/INIT"})===Z||typeof _(void 0,{type:yn})===Z)throw new Error("reducer "+U+" "+Z)})})(f)}catch(j){A=j}return function(j,U){if(j===void 0&&(j={}),A)throw A;for(var _=!1,Q={},$e=0;$e<R.length;$e++){var Fe=R[$e],tn=j[Fe],st=(0,f[Fe])(tn,U);if(typeof st===Z){var ur=bn(Fe,U);throw new Error(ur)}Q[Fe]=st,_=_||st!==tn}return _?Q:j}}(p({},O,t)),V,C(N(wn.apply(void 0,D))));y.dispatch=(H=y.dispatch,function(i,a,f){var w=p({},i,{meta:Yt(i.meta,a,nt(f))});return H.apply(null,[w])});var W=Object.keys(c);y.dispatch({type:g.bootstrap,plugins:W,config:M,params:b,user:$,initialUser:n,persistedUser:x});var B=W.filter(function(i){return r.pluginEnabled[i]}),ke=W.filter(function(i){return!r.pluginEnabled[i]});return y.dispatch({type:g.registerPlugins,plugins:W,enabled:r.pluginEnabled}),r.pluginsArray.map(function(i,a){var f=i.bootstrap,w=i.config,I=i.name;f&&K(f)&&f({instance:l,config:w,payload:i}),y.dispatch({type:g.registerPluginType(I),name:I,enabled:r.pluginEnabled[I],plugin:i}),r.pluginsArray.length===a+1&&y.dispatch({type:g.initializeStart,plugins:B,disabled:ke})}),qn(function(i){y.dispatch({type:i?g.offline:g.online})}),function(i,a,f){setInterval(function(){return Pt(i,a,f)},3e3)}(y,z,l),l}var Re="before",Ye="after",xe="cookie",ue=Bt(),Wt=We,Yn=We;function Jt(e){return ue?We(e,"",-1):pe(e)}function Bt(){if(ue!==void 0)return ue;var e="cookiecookie";try{We(e,e),ue=document.cookie.indexOf(e)!==-1,Jt(e)}catch{ue=!1}return ue}function We(e,t,n,r,o,u){if(typeof window<"u"){var c=arguments.length>1;return ue===!1&&(c?oe(e,t):ie(e)),c?document.cookie=e+"="+encodeURIComponent(t)+(n?"; expires="+new Date(+new Date+1e3*n).toUTCString()+(r?"; path="+r:"")+(o?"; domain="+o:"")+(u?"; secure":""):""):decodeURIComponent((("; "+document.cookie).split("; "+e+"=")[1]||"").split(";")[0])}}var Ne="localStorage",Wn=Ge.bind(null,"localStorage");ge("localStorage","getItem",ie),ge("localStorage","setItem",oe),ge("localStorage","removeItem",pe);var je="sessionStorage",Jn=Ge.bind(null,"sessionStorage");ge("sessionStorage","getItem",ie),ge("sessionStorage","setItem",oe),ge("sessionStorage","removeItem",pe);function be(e){var t=e;try{if((t=JSON.parse(e))==="true")return!0;if(t==="false")return!1;if(J(t))return t;parseFloat(t)===t&&(t=parseFloat(t))}catch{}if(t!==null&&t!=="")return t}var Bn=Wn(),Fn=Jn(),Hn=Bt();function Ft(e,t){if(e){var n=rt(t),r=!ut(n),o=it(n)?be(localStorage.getItem(e)):void 0;if(r&&!le(o))return o;var u=ot(n)?be(Wt(e)):void 0;if(r&&u)return u;var c=at(n)?be(sessionStorage.getItem(e)):void 0;if(r&&c)return c;var s=ie(e);return r?s:{localStorage:o,sessionStorage:c,cookie:u,global:s}}}function Xn(e,t,n){if(e&&!le(t)){var r={},o=rt(n),u=JSON.stringify(t),c=!ut(o);return it(o)&&(r[Ne]=Be(Ne,t,be(localStorage.getItem(e))),localStorage.setItem(e,u),c)?r[Ne]:ot(o)&&(r[xe]=Be(xe,t,be(Wt(e))),Yn(e,u),c)?r[xe]:at(o)&&(r[je]=Be(je,t,be(sessionStorage.getItem(e))),sessionStorage.setItem(e,u),c)?r[je]:(r[Oe]=Be(Oe,t,ie(e)),oe(e,t),c?r[Oe]:r)}}function Gn(e,t){if(e){var n=rt(t),r=Ft(e,lt),o={};return!le(r.localStorage)&&it(n)&&(localStorage.removeItem(e),o[Ne]=r.localStorage),!le(r.cookie)&&ot(n)&&(Jt(e),o[xe]=r.cookie),!le(r.sessionStorage)&&at(n)&&(sessionStorage.removeItem(e),o[je]=r.sessionStorage),!le(r.global)&&Je(n,Oe)&&(pe(e),o[Oe]=r.global),o}}function rt(e){return e?se(e)?e:e.storage:Pe}function it(e){return Bn&&Je(e,Ne)}function ot(e){return Hn&&Je(e,xe)}function at(e){return Fn&&Je(e,je)}function ut(e){return e===lt||e==="all"}function Je(e,t){return e===Pe||e===t||ut(e)}function Be(e,t,n){return{location:e,current:t,previous:n}}var Kn={setItem:Xn,getItem:Ft,removeItem:Gn};function Qn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Xt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ht(Object(n),!0).forEach(function(r){Qn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ht(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Zn(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t={storage:Kn};return Rn(Xt(Xt({},t),e))}const Gt="data-analytics-server",Kt="data-analytics-debug",Qt="data-analytics-auto-page-view",er=[Gt,Kt,Qt],tr="analytics.iife.js",Zt="dotAnalytics",nr=Zt,rr="/api/v1/analytics/content/event",ir=e=>{const t=or(),n=Array.from(t.attributes).reduce((r,o)=>{if(!er.includes(o.name))return r;switch(o.name){case Gt:return{...r,server:o.value};case Kt:return{...r,debug:!0};case Qt:return{...r,autoPageView:o.value.toLowerCase()==="true"};default:return r}},{});return{server:e.href,debug:!1,autoPageView:!0,...n}},or=()=>{const e=document.querySelector(`script[src*="${tr}"]`);if(!e)throw new Error("Analytics script not found");return e};function en(e,t){const n=new URLSearchParams(t.search),r={source:n.get("utm_source")||void 0,medium:n.get("utm_medium")||void 0,campaign:n.get("utm_campaign")||void 0,id:n.get("utm_id")||void 0},o=window.innerWidth,u=window.innerHeight,c=navigator.language,s=document.characterSet;return{event_type:e,utc_time:new Date().toISOString(),local_tz_offset:new Date().getTimezoneOffset(),referer:document.referrer,url:t.href,page_title:document.title,doc_path:t.pathname,doc_host:t.hostname,doc_protocol:t.protocol,doc_hash:t.hash,doc_search:t.search,screen_resolution:`${window.screen.width}x${window.screen.height}`,vp_size:`${o}x${u}`,user_agent:navigator.userAgent,user_language:c,doc_encoding:s,utm:r,src:nr}}function ar(e){let t=!1;return{name:"dot-analytics",config:e,initialize:({config:r})=>{if(!r.server)throw new Error("DotAnalytics: Server URL is required");if(t=!0,r.debug&&console.info("DotAnalytics: Initialized with config",r),r.autoPageView){const o=en("pageview",window.location);n({type:"track",...o})}return Promise.resolve()},track:({payload:r})=>{if(!t)return;const o=en(r.event,window.location);return n({type:"track",...o,...r.properties})},loaded:()=>t};function n(r){const o={...r,timestamp:new Date().toISOString()};return e.debug&&console.log("DotAnalytics: Sending event:",o),fetch(`${e.server}${rr}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).catch(u=>{throw console.error("DotAnalytics: Error sending event:",u),u})}}const ce=class ce{constructor(t){He(this,Te,!1);He(this,we,null);He(this,Ie,void 0);Xe(this,Ie,t)}static getInstance(t){return ce.instance||(ce.instance=new ce(t)),ce.instance}async ready(){if(Se(this,Te))return Promise.resolve();try{Xe(this,we,Zn({app:"dotAnalytics",debug:Se(this,Ie).debug,plugins:[ar(Se(this,Ie))]})),Xe(this,Te,!0)}catch(t){throw console.error("Failed to initialize DotAnalytics:",t),t}}track(t,n){if(!Se(this,we))throw new Error("Analytics not initialized");Se(this,we).track(t,n)}};Te=new WeakMap,we=new WeakMap,Ie=new WeakMap,ce.instance=null;let ct=ce;(async()=>{const e=ir(window.location),t=ct.getInstance({...e});await t.ready(),window[Zt]=t})().catch(e=>{console.error("Failed to initialize analytics:",e)})})();
