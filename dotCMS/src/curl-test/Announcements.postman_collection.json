{
	"info": {
		"_postman_id": "0f1898fc-13bb-49b2-b6d8-3719a256b8ae",
		"name": "Announcements",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "10041132"
	},
	"item": [
		{
			"name": "Create Announcement ContentType",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"var jsonData = pm.response.json();",
							"",
							"pm.collectionVariables.set(\"contentTypeId\", jsonData.entity[0].id);",
							"pm.collectionVariables.set(\"contentTypeVar\", jsonData.entity[0].variable);",
							"",
							"pm.test(\"Status code should be ok 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "basic",
					"basic": [
						{
							"key": "password",
							"value": "admin",
							"type": "string"
						},
						{
							"key": "username",
							"value": "admin@dotcms.com",
							"type": "string"
						},
						{
							"key": "saveHelperData",
							"type": "any"
						},
						{
							"key": "showPassword",
							"value": false,
							"type": "boolean"
						}
					]
				},
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"type": "text",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n\t\"clazz\": \"com.dotcms.contenttype.model.type.SimpleContentType\",\n\t\"description\": \"DotCMS Announcements\",\n\t\"defaultType\": false,\n\t\"system\": false,\n\t\"folder\": \"SYSTEM_FOLDER\",\n\t\"name\": \"Announcement\",\n\t\"variable\": \"dotAnnouncement\",\n\t\"host\": \"SYSTEM_HOST\",\n\t\"fixed\": false,\n    \"icon\": \"dotAnnouncement\",\n    \"sortOrder\": 0,\n\t\"fields\": [\n\t\t{\n\t\t\t\"clazz\": \"com.dotcms.contenttype.model.field.TextField\",\n\t\t\t\"indexed\": true,\n\t\t\t\"dataType\": \"TEXT\",\n\t\t\t\"readOnly\": false,\n\t\t\t\"required\": true,\n\t\t\t\"searchable\": true,\n\t\t\t\"listed\": true,\n\t\t\t\"sortOrder\": 0,\n\t\t\t\"unique\": false,\n\t\t\t\"name\": \"title\",\n\t\t\t\"variable\": \"title\",\n\t\t\t\"fixed\": true\n\t\t},\n        {\n\t\t\t\"clazz\": \"com.dotcms.contenttype.model.field.SelectField\",\n\t\t\t\"indexed\": true,\n\t\t\t\"dataType\": \"TEXT\",\n\t\t\t\"readOnly\": false,\n\t\t\t\"required\": true,\n\t\t\t\"searchable\": true,\n\t\t\t\"listed\": true,\n\t\t\t\"sortOrder\": 1,\n\t\t\t\"unique\": false,\n\t\t\t\"name\": \"type\",\n\t\t\t\"variable\": \"type1\",\n            \"values\": \"Announcement \\n Release \\n Comment\",\n\t\t\t\"fixed\": true\n\t\t},\n        {\n\t\t\t\"clazz\": \"com.dotcms.contenttype.model.field.TextField\",\n\t\t\t\"indexed\": true,\n\t\t\t\"dataType\": \"TEXT\",\n\t\t\t\"readOnly\": false,\n\t\t\t\"required\": true,\n\t\t\t\"searchable\": true,\n\t\t\t\"listed\": true,\n\t\t\t\"sortOrder\": 0,\n\t\t\t\"unique\": false,\n\t\t\t\"name\": \"url\",\n\t\t\t\"variable\": \"url\",\n\t\t\t\"fixed\": true\n\t\t},\n        {\n\t\t\t\"clazz\": \"com.dotcms.contenttype.model.field.DateField\",\n\t\t\t\"indexed\": true,\n\t\t\t\"dataType\": \"DATE\",\n\t\t\t\"readOnly\": false,\n\t\t\t\"required\": true,\n\t\t\t\"searchable\": false,\n\t\t\t\"listed\": true,\n\t\t\t\"sortOrder\": 0,\n\t\t\t\"unique\": false,\n\t\t\t\"name\": \"date\",\n\t\t\t\"variable\": \"date\",\n\t\t\t\"fixed\": true\n\t\t}\n\t],\n    \"workflow\":[\"d61a59e1-a49c-46f2-a929-db2b4bfa88b2\"]\n}"
				},
				"url": {
					"raw": "{{serverURL}}/api/v1/contenttype",
					"host": [
						"{{serverURL}}"
					],
					"path": [
						"api",
						"v1",
						"contenttype"
					]
				},
				"description": "Given a content type payload containing field variables.\nWhen sending a POST.\nExpect that code is 200.\nExpect content type is created with the provided fields.\nExpect that new properties of content types are set (icon and sortOrder)."
			},
			"response": []
		},
		{
			"name": "Create Announcements",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"var jsonData = pm.response.json();",
							"pm.test(\"Status code should be 200\", function() {",
							"    pm.response.to.have.status(200);",
							"});",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "basic",
					"basic": [
						{
							"key": "password",
							"value": "admin",
							"type": "string"
						},
						{
							"key": "username",
							"value": "admin@dotcms.com",
							"type": "string"
						},
						{
							"key": "saveHelperData",
							"type": "any"
						},
						{
							"key": "showPassword",
							"value": false,
							"type": "boolean"
						}
					]
				},
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"contentlets\": [\n       {\n        \"contentType\": \"{{contentTypeId}}\",     \n        \"title\": \"Test Announcement 1\",\n        \"type1\":\"Announcement\",\n        \"date\":\"2024-01-08\",\n        \"url\":\"https://www.dotcms.com\"\n       },{\n        \"contentType\": \"{{contentTypeId}}\",     \n        \"title\": \"Test Announcement 2\",\n        \"type1\":\"Announcement\",\n        \"date\":\"2024-01-08\",\n        \"url\":\"https://www.dotcms.com\"\n       },{\n        \"contentType\": \"{{contentTypeId}}\",     \n        \"title\": \"Test Announcement 3\",\n        \"type1\":\"Announcement\",\n        \"date\":\"2024-01-08\",\n        \"url\":\"https://www.dotcms.com\"\n       },{\n        \"contentType\": \"{{contentTypeId}}\",     \n        \"title\": \"Test Announcement 4\",\n        \"type1\":\"Announcement\",\n        \"date\":\"2024-01-08\",\n        \"url\":\"https://www.dotcms.com\"\n       }\n    ]    \n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{serverURL}}/api/v1/workflow/actions/default/fire/PUBLISH",
					"host": [
						"{{serverURL}}"
					],
					"path": [
						"api",
						"v1",
						"workflow",
						"actions",
						"default",
						"fire",
						"PUBLISH"
					]
				}
			},
			"response": []
		},
		{
			"name": "Retrieve Announcements",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"let jsonData = pm.response.json();",
							"",
							"pm.test(\"Status code should be 200\", function() {",
							"    pm.response.to.have.status(200);    ",
							"    pm.expect(jsonData.entity.length).to.eql(4);  ",
							"    pm.expect(jsonData.entity[0].title).to.eql('Test Announcement 4'); ",
							"    pm.expect(jsonData.entity[1].title).to.eql('Test Announcement 3'); ",
							"    pm.expect(jsonData.entity[2].title).to.eql('Test Announcement 2'); ",
							"    pm.expect(jsonData.entity[3].title).to.eql('Test Announcement 1');  ",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"auth": {
					"type": "basic",
					"basic": [
						{
							"key": "password",
							"value": "admin",
							"type": "string"
						},
						{
							"key": "username",
							"value": "admin@dotcms.com",
							"type": "string"
						},
						{
							"key": "saveHelperData",
							"type": "any"
						},
						{
							"key": "showPassword",
							"value": false,
							"type": "boolean"
						}
					]
				},
				"method": "GET",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{serverURL}}/api/v1/announcements",
					"host": [
						"{{serverURL}}"
					],
					"path": [
						"api",
						"v1",
						"announcements"
					]
				}
			},
			"response": []
		}
	],
	"variable": [
		{
			"key": "contentTypeID",
			"value": ""
		},
		{
			"key": "contentTypeVAR",
			"value": ""
		},
		{
			"key": "contentTypeFieldID",
			"value": ""
		},
		{
			"key": "contentTypeId",
			"value": ""
		},
		{
			"key": "contentTypeVar",
			"value": ""
		}
	]
}