{
	"info": {
		"_postman_id": "5c99a77b-bdc9-41d4-9d20-9424cb3c2e8f",
		"name": "Page API - [api/v1/page]",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "5403727"
	},
	"item": [
		{
			"name": "CreateTestContext",
			"item": [
				{
					"name": "pre_ImportBundleWithContext",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Bundle uploaded sucessfully\", function () {",
									"    pm.response.to.have.status(200);",
									"",
									"    var jsonData = pm.response.json();",
									"    console.log(jsonData);",
									"",
									"    pm.expect(jsonData[\"bundleName\"]).to.eql(\"assets.tar.gz\");",
									"    pm.expect(jsonData[\"status\"]).to.eql(\"SUCCESS\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "admin@dotcms.com",
									"type": "string"
								},
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"type": "text",
								"value": "application/octet-stream"
							},
							{
								"key": "Content-Disposition",
								"type": "text",
								"value": "attachment"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "file",
									"type": "file",
									"src": "resources/GraphQL/assets.tar.gz"
								}
							]
						},
						"url": {
							"raw": "{{serverURL}}/api/bundle?sync=true",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"bundle"
							],
							"query": [
								{
									"key": "sync",
									"value": "true"
								},
								{
									"key": "AUTH_TOKEN",
									"value": "",
									"disabled": true
								}
							]
						},
						"description": "Imports a Bundle that includes:\n* HTMLPage /blog/index\n* HTMLPage /blog/destinations/costa-rica\n* Contentlet [Blog] Ecotourism in Costa Rica\n* Blog Detail Page /blog/blog-detail"
					},
					"response": []
				}
			],
			"description": "Imports a Bundle that includes:\n* HTMLPage /blog/index\n* HTMLPage /blog/destinations/costa-rica\n* Contentlet [Blog] Ecotourism in Costa Rica\n* Blog Detail Page /blog/blog-detail",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			]
		},
		{
			"name": "JSON [api/v1/page/json]",
			"item": [
				{
					"name": "invalidateSession",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{serverURL}}/api/v1/logout",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"logout"
							]
						}
					},
					"response": []
				},
				{
					"name": "GivenInvalidUser_ShouldReturn401",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"",
									"pm.test(\"Status code is 401, Need credentials\", function () {",
									"    pm.response.to.have.status(401);",
									"});",
									"",
									"",
									"",
									"pm.test(\"Response body matches\", function () {",
									"    pm.expect(pm.response.text()).to.eq(\"Invalid User\");",
									"});",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{serverURL}}/api/v1/page/json/destinations/costa-rica",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"page",
								"json",
								"destinations",
								"costa-rica"
							]
						},
						"description": "Given no user, should return 401 and \"Invalid User\" message"
					},
					"response": []
				},
				{
					"name": "Switch site to 'demo.dotcms.com'",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200 \", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"",
									"",
									"pm.test(\"Valid response\", function () {",
									"    var jsonData = pm.response.json();",
									"",
									"    pm.expect(jsonData.entity.hostSwitched).equal(true);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin@dotcms.com",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"type": "any"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{serverURL}}/api/v1/site/switch/48190c8c-42c4-46af-8d1a-0cd5db894797",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"site",
								"switch",
								"48190c8c-42c4-46af-8d1a-0cd5db894797"
							]
						}
					},
					"response": []
				},
				{
					"name": "GivenValidPageURL_ShouldReturnPageInfo",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"",
									"",
									"pm.test(\"Include template\", function () {",
									"    pm.expect(pm.response.text()).to.include(\"template\");",
									"});",
									"",
									"pm.test(\"Inlude layout\", function () {",
									"    pm.expect(pm.response.text()).to.include(\"layout\");",
									"});",
									"",
									"pm.test(\"Include Containers\", function () {",
									"    pm.expect(pm.response.text()).to.include(\"containers\");",
									"});",
									"",
									"pm.test(\"'page' element includes all properties\", function () {",
									"    var jsonData = pm.response.json();",
									"    var page = jsonData[\"entity\"][\"page\"];",
									"    pm.expect(page[\"__icon__\"]).equal(\"pageIcon\");",
									"    pm.expect(page[\"archived\"], 'FAILED:[archived]').equal(false);",
									"    pm.expect(page[\"baseType\"]).equal(\"HTMLPAGE\");",
									"    pm.expect(page[\"cachettl\"]).equal(\"0\");",
									"    pm.expect(page[\"canEdit\"], 'FAILED:[canEdit]').equal(true);",
									"    pm.expect(page[\"canLock\"], 'FAILED:[canLock]').equal(true);",
									"    pm.expect(page[\"canRead\"], 'FAILED:[canRead]').equal(true);",
									"    pm.expect(page[\"deleted\"], 'FAILED:[deleted]').equal(false);",
									"    pm.expect(page[\"description\"]).equal(\"Costa Rica Rain Forest\");",
									"    pm.expect(page[\"extension\"]).equal(\"page\");",
									"    pm.expect(page[\"folder\"]).equal(\"6c8a2ac4-36a7-4b01-b9c0-c2c1d91ddfdb\");",
									"    pm.expect(page[\"friendlyName\"]).equal(\"Costa Rica Rain Forest\");",
									"    pm.expect(page[\"hasLiveVersion\"], 'FAILED:[hasLiveVersion]').equal(true);",
									"    pm.expect(page[\"hasTitleImage\"], 'FAILED:[hasTitleImage]').equal(true);",
									"    pm.expect(page[\"host\"]).equal(\"48190c8c-42c4-46af-8d1a-0cd5db894797\");",
									"    pm.expect(page[\"hostName\"]).equal(\"demo.dotcms.com\");",
									"    ////",
									"    pm.expect(page[\"httpsRequired\"], 'FAILED:[httpsRequired]').equal(false);",
									"    pm.expect(page[\"identifier\"]).equal(\"bec7b960-a8bf-4f14-a22b-0d94caf217f0\");",
									"    pm.expect(page[\"image\"]).equal(\"/dA/bec7b960-a8bf-4f14-a22b-0d94caf217f0/image/costa-rica-tree-frog.jpg\");",
									"    pm.expect(page[\"imageContentAsset\"]).equal(\"bec7b960-a8bf-4f14-a22b-0d94caf217f0/image\");",
									"    pm.expect(page[\"inode\"]).not.equal(null)",
									"    pm.expect(page[\"isContentlet\"], 'FAILED:[isContentlet]').equal(true);",
									"    pm.expect(page[\"languageId\"]).equal(1);",
									"    pm.expect(page[\"live\"], 'FAILED:[live]').equal(true);",
									"    pm.expect(page[\"liveInode\"]).not.equal(null)",
									"    pm.expect(page[\"locked\"], 'FAILED:[locked]').equal(false);",
									"    pm.expect(page[\"mimeType\"]).equal(\"application/dotpage\");",
									"    pm.expect(page[\"modDate\"]).not.equal(null)",
									"    ///",
									"    pm.expect(page[\"modUser\"]).equal(\"system\");",
									"    pm.expect(page[\"modUserName\"]).equal(\"system user system user\");",
									"    pm.expect(page[\"name\"]).equal(\"costa-rica\");",
									"    pm.expect(page[\"owner\"]).equal(\"dotcms.org.1\");",
									"    pm.expect(page[\"pageURI\"]).equal(\"/destinations/costa-rica\");",
									"    pm.expect(page[\"pageUrl\"]).equal(\"costa-rica\");",
									"    pm.expect(page[\"path\"]).equal(\"/destinations/costa-rica\");",
									"    pm.expect(page[\"publishDate\"]).not.equal(null)",
									"    pm.expect(page[\"seoTitle\"]).equal(\"Costa Rica Travel Destinations\");",
									"    pm.expect(page[\"seodescription\"]).equal(\"Visit Costa Rica a rugged, rainforested Central American country with coastlines on the Caribbean and Pacific.\");",
									"    pm.expect(page[\"shortDescription\"]).equal(\"Costa Rica is a rugged, rainforested Central American country with coastlines on the Caribbean and Pacific. Costa Rica is known for its beaches, volcanoes, and biodiversity. Roughly a quarter of its area is made up of protected jungle, teeming with wildlife including spider monkeys and quetzal birds.\");",
									"    pm.expect(page[\"shortyLive\"]).not.equal(null)",
									"    //",
									"    pm.expect(page[\"shortyWorking\"]).not.equal(null)",
									"    pm.expect(page[\"sortOrder\"]).equal(0);",
									"    pm.expect(page[\"stInode\"]).equal(\"91812c8b-0441-4139-8d4d-7423cfb0e979\");",
									"    pm.expect(page[\"statusIcons\"]).equal(\"<span class='greyDotIcon' style='opacity:.4'></span><span class='liveIcon'></span>\");",
									"    pm.expect(page[\"tags\"]).equal(\"diving\");",
									"    pm.expect(page[\"template\"]).equal(\"0c556e37-99e0-4458-a2cd-d42cc7a11045\");",
									"    pm.expect(page[\"title\"]).equal(\"Costa Rica Rain Forest\");",
									"    pm.expect(page[\"titleImage\"]).equal(\"image\");",
									"    pm.expect(page[\"type\"]).equal(\"htmlpage\");",
									"    pm.expect(page[\"url\"]).equal(\"/destinations/costa-rica\");",
									"    pm.expect(page[\"working\"], 'FAILED:[working]').equal(true);",
									"    pm.expect(page[\"workingInode\"]).not.equal(null)",
									"",
									"});",
									"",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin@dotcms.com",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{serverURL}}/api/v1/page/json/destinations/costa-rica",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"page",
								"json",
								"destinations",
								"costa-rica"
							]
						},
						"description": "http://localhost:8080/api/v1/page/json/{page-url}"
					},
					"response": []
				},
				{
					"name": "invalidateSession",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{serverURL}}/api/v1/logout",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"logout"
							]
						}
					},
					"response": []
				},
				{
					"name": "GivenInvalidPageURL_ShouldReturn404",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"",
									"pm.test(\"Status code is 404\", function () {",
									"    pm.response.to.have.status(404);",
									"});",
									"",
									"",
									"",
									"pm.test(\"Valid response\", function () {",
									"    pm.expect(pm.response.text()).to.include(\"Page \\'about-us/index2\\' not found\");",
									"});",
									"",
									"",
									"",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin@dotcms.com",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{serverURL}}/api/v1/page/json/about-us/index2",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"page",
								"json",
								"about-us",
								"index2"
							]
						}
					},
					"response": []
				},
				{
					"name": "GivenURLMappedPage_ShouldReturnPageInfo",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"No errors\", function () {",
									"    ",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.errors.length).to.eql(0);",
									"});",
									"",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"}); ",
									"",
									"pm.test(\"Has Rows and Columns\", function () {",
									"    ",
									"    var jsonData = pm.response.json();",
									"    ",
									"    pm.expect(jsonData.entity.layout.body.rows.length).to.equal(2);",
									"    pm.expect(jsonData.entity.layout.body.rows[0].columns.length).to.equal(1);",
									"     ",
									"});",
									"",
									"pm.test(\"Number of Contents\", function () {",
									"    ",
									"    var jsonData = pm.response.json();",
									"    ",
									"    pm.expect(jsonData.entity.numberContents).to.equal(2);",
									"    ",
									"     ",
									"});",
									"",
									"pm.test(\"Page checks\", function () {",
									"    ",
									"    var jsonData = pm.response.json();",
									"    ",
									"    pm.expect(jsonData.entity.page.pageURI).to.equal('/blog/index');",
									"    pm.expect(jsonData.entity.page.title).to.equal('Blogs');",
									"    pm.expect(jsonData.entity.page.type).to.equal('htmlpage');",
									"     ",
									"});",
									"",
									"pm.test(\"Site checks\", function () {",
									"    ",
									"    var jsonData = pm.response.json();",
									"    ",
									"    pm.expect(jsonData.entity.site.hostname).to.equal('demo.dotcms.com');",
									"    pm.expect(jsonData.entity.site.type).to.equal('contentlet');",
									"     ",
									"});",
									"",
									"pm.test(\"Template checks\", function () {",
									"    ",
									"    var jsonData = pm.response.json();",
									"    ",
									"    pm.expect(jsonData.entity.template.title).to.equal('anonymous_layout_1571406924828');",
									"    pm.expect(jsonData.entity.template.type).to.equal('template');",
									"     ",
									"});",
									"",
									"pm.test(\"Contentlets checks\", function () {",
									"    ",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.entity.containers[\"//demo.dotcms.com/application/containers/default/\"].contentlets[\"uuid-1\"][0].title).to.equal('Travel Blog Header');",
									"    pm.expect(jsonData.entity.containers[\"//demo.dotcms.com/application/containers/default/\"].contentlets[\"uuid-1\"][0].contentType).to.equal('webPageContent');",
									"});",
									"",
									"",
									"",
									"",
									"",
									"",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "admin@dotcms.com",
									"type": "string"
								},
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{serverURL}}/api/v1/page/json/blog/index",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"page",
								"json",
								"blog",
								"index"
							]
						},
						"description": "Gets an Url content map"
					},
					"response": []
				}
			],
			"description": "Returns the metadata in JSON format of the objects that make up an HTML Page in the system.\n\nhttp://localhost:8080/api/v1/page/json/{page-url}",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			]
		},
		{
			"name": "Render [api/v1/page/render]",
			"item": [
				{
					"name": "invalidateSession",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{serverURL}}/api/v1/logout",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"logout"
							]
						}
					},
					"response": []
				},
				{
					"name": "GivenInvalidUser_ShouldReturn401",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"",
									"pm.test(\"Status code is 401, Need credentials\", function () {",
									"    pm.response.to.have.status(401);",
									"});",
									"",
									"",
									"",
									"pm.test(\"Response body matches\", function () {",
									"    pm.expect(pm.response.text()).to.include(\"Invalid User\");",
									"});",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{serverURL}}/api/v1/page/render/destinations/costa-rica",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"page",
								"render",
								"destinations",
								"costa-rica"
							]
						}
					},
					"response": []
				},
				{
					"name": "Switch site to 'demo.dotcms.com' Copy",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200 \", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"",
									"",
									"pm.test(\"Valid response\", function () {",
									"    var jsonData = pm.response.json();",
									"",
									"    pm.expect(jsonData.entity.hostSwitched).equal(true);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin@dotcms.com",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"type": "any"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{serverURL}}/api/v1/site/switch/48190c8c-42c4-46af-8d1a-0cd5db894797",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"site",
								"switch",
								"48190c8c-42c4-46af-8d1a-0cd5db894797"
							]
						}
					},
					"response": []
				},
				{
					"name": "GivenValidPageURL_ShouldReturnPageInfoAndRenderHTML",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"",
									"",
									"pm.test(\"Response body contains\", function () {",
									"    pm.expect(pm.response.text()).to.include(\"rendered\");",
									"});",
									"",
									"pm.test(\"Response body contains\", function () {",
									"    pm.expect(pm.response.text()).to.include(\"uuid\");",
									"});",
									"",
									"pm.test(\"'page' element includes all properties\", function () {",
									"    var jsonData = pm.response.json();",
									"    var page = jsonData[\"entity\"][\"page\"];",
									"    pm.expect(page[\"__icon__\"]).equal(\"pageIcon\");",
									"    pm.expect(page[\"archived\"], 'FAILED:[archived]').equal(false);",
									"    pm.expect(page[\"baseType\"]).equal(\"HTMLPAGE\");",
									"    pm.expect(page[\"cachettl\"]).equal(\"0\");",
									"    pm.expect(page[\"canEdit\"], 'FAILED:[canEdit]').equal(true);",
									"    pm.expect(page[\"canLock\"], 'FAILED:[canLock]').equal(true);",
									"    pm.expect(page[\"canRead\"], 'FAILED:[canRead]').equal(true);",
									"    pm.expect(page[\"deleted\"], 'FAILED:[deleted]').equal(false);",
									"    pm.expect(page[\"description\"]).equal(\"Costa Rica Rain Forest\");",
									"    pm.expect(page[\"extension\"]).equal(\"page\");",
									"    pm.expect(page[\"folder\"]).equal(\"6c8a2ac4-36a7-4b01-b9c0-c2c1d91ddfdb\");",
									"    pm.expect(page[\"friendlyName\"]).equal(\"Costa Rica Rain Forest\");",
									"    pm.expect(page[\"hasLiveVersion\"], 'FAILED:[hasLiveVersion]').equal(true);",
									"    pm.expect(page[\"hasTitleImage\"], 'FAILED:[hasTitleImage]').equal(true);",
									"    pm.expect(page[\"host\"]).equal(\"48190c8c-42c4-46af-8d1a-0cd5db894797\");",
									"    pm.expect(page[\"hostName\"]).equal(\"demo.dotcms.com\");",
									"    ////",
									"    pm.expect(page[\"httpsRequired\"], 'FAILED:[httpsRequired]').equal(false);",
									"    pm.expect(page[\"identifier\"]).equal(\"bec7b960-a8bf-4f14-a22b-0d94caf217f0\");",
									"    pm.expect(page[\"image\"]).equal(\"/dA/bec7b960-a8bf-4f14-a22b-0d94caf217f0/image/costa-rica-tree-frog.jpg\");",
									"    pm.expect(page[\"imageContentAsset\"]).equal(\"bec7b960-a8bf-4f14-a22b-0d94caf217f0/image\");",
									"    pm.expect(page[\"inode\"]).not.equal(null)",
									"    pm.expect(page[\"isContentlet\"], 'FAILED:[isContentlet]').equal(true);",
									"    pm.expect(page[\"languageId\"]).equal(1);",
									"    pm.expect(page[\"live\"], 'FAILED:[live]').equal(true);",
									"    pm.expect(page[\"liveInode\"]).not.equal(null)",
									"    pm.expect(page[\"locked\"], 'FAILED:[locked]').equal(false);",
									"    pm.expect(page[\"mimeType\"]).equal(\"application/dotpage\");",
									"    pm.expect(page[\"modDate\"]).not.equal(null)",
									"    ///",
									"    pm.expect(page[\"modUser\"]).equal(\"system\");",
									"    pm.expect(page[\"modUserName\"]).equal(\"system user system user\");",
									"    pm.expect(page[\"name\"]).equal(\"costa-rica\");",
									"    pm.expect(page[\"owner\"]).equal(\"dotcms.org.1\");",
									"    pm.expect(page[\"pageURI\"]).equal(\"/destinations/costa-rica\");",
									"    pm.expect(page[\"pageUrl\"]).equal(\"costa-rica\");",
									"    pm.expect(page[\"path\"]).equal(\"/destinations/costa-rica\");",
									"    pm.expect(page[\"publishDate\"]).not.equal(null)",
									"    pm.expect(page[\"seoTitle\"]).equal(\"Costa Rica Travel Destinations\");",
									"    pm.expect(page[\"seodescription\"]).equal(\"Visit Costa Rica a rugged, rainforested Central American country with coastlines on the Caribbean and Pacific.\");",
									"    pm.expect(page[\"shortDescription\"]).equal(\"Costa Rica is a rugged, rainforested Central American country with coastlines on the Caribbean and Pacific. Costa Rica is known for its beaches, volcanoes, and biodiversity. Roughly a quarter of its area is made up of protected jungle, teeming with wildlife including spider monkeys and quetzal birds.\");",
									"    pm.expect(page[\"shortyLive\"]).not.equal(null)",
									"    //",
									"    pm.expect(page[\"shortyWorking\"]).not.equal(null)",
									"    pm.expect(page[\"sortOrder\"]).equal(0);",
									"    pm.expect(page[\"stInode\"]).equal(\"91812c8b-0441-4139-8d4d-7423cfb0e979\");",
									"    pm.expect(page[\"statusIcons\"]).equal(\"<span class='greyDotIcon' style='opacity:.4'></span><span class='liveIcon'></span>\");",
									"    pm.expect(page[\"tags\"]).equal(\"diving\");",
									"    pm.expect(page[\"template\"]).equal(\"0c556e37-99e0-4458-a2cd-d42cc7a11045\");",
									"    pm.expect(page[\"title\"]).equal(\"Costa Rica Rain Forest\");",
									"    pm.expect(page[\"titleImage\"]).equal(\"image\");",
									"    pm.expect(page[\"type\"]).equal(\"htmlpage\");",
									"    pm.expect(page[\"url\"]).equal(\"/destinations/costa-rica\");",
									"    pm.expect(page[\"working\"], 'FAILED:[working]').equal(true);",
									"    pm.expect(page[\"workingInode\"]).not.equal(null)",
									"",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin@dotcms.com",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{serverURL}}/api/v1/page/render/destinations/costa-rica",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"page",
								"render",
								"destinations",
								"costa-rica"
							]
						}
					},
					"response": []
				},
				{
					"name": "GivenInvalidPageURL_ShouldReturn404",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"",
									"pm.test(\"Status code is 404\", function () {",
									"    pm.response.to.have.status(404);",
									"});",
									"",
									"",
									"pm.test(\"Response body contains\", function () {",
									"   ",
									"    pm.expect( pm.response.json().message).to.eq(\"Page 'about-us/index2' not found\");",
									"});",
									"",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin@dotcms.com",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{serverURL}}/api/v1/page/render/about-us/index2",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"page",
								"render",
								"about-us",
								"index2"
							]
						}
					},
					"response": []
				},
				{
					"name": "Reset workflow for contentlet",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200 \", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"",
									"",
									"pm.test(\"Correct identifier\", function () {",
									"    pm.expect(pm.response.json().entity.identifier).equal(\"57ee7cd3-66fc-4f01-9b7e-11e53553c220\");",
									"});",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin@dotcms.com",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"type": "any"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{serverURL}}/api/v1/workflow/actions/2d1dc7718f/fire?identifier=57ee7cd3-66fc-4f01-9b7e-11e53553c220",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"workflow",
								"actions",
								"2d1dc7718f",
								"fire"
							],
							"query": [
								{
									"key": "identifier",
									"value": "57ee7cd3-66fc-4f01-9b7e-11e53553c220"
								}
							]
						},
						"description": "The piece of content \"Ecoturism in Costarica\" gets somehow archived at this point after being imported in a previous bundle. This resets its workflow so it can be published in the next request"
					},
					"response": []
				},
				{
					"name": "Publish archived content Copy",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200 \", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"",
									"",
									"pm.test(\"Correct identifier\", function () {",
									"    pm.expect(pm.response.json().entity.identifier).equal(\"57ee7cd3-66fc-4f01-9b7e-11e53553c220\");",
									"});",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin@dotcms.com",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"type": "any"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{serverURL}}/api/v1/workflow/actions/175009d69e/fire?identifier=57ee7cd3-66fc-4f01-9b7e-11e53553c220",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"workflow",
								"actions",
								"175009d69e",
								"fire"
							],
							"query": [
								{
									"key": "identifier",
									"value": "57ee7cd3-66fc-4f01-9b7e-11e53553c220"
								}
							]
						},
						"description": "This publishes the content `Ecotourism in Costa Rica` so it can be tested in the next request"
					},
					"response": []
				},
				{
					"name": "GivenURLMappedPage_ShouldReturnPageInfo",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"No errors\", function () {",
									"    ",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.errors.length).to.eql(0);",
									"});",
									"",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"}); ",
									"",
									"pm.test(\"Has Rows and Columns\", function () {",
									"    ",
									"    var jsonData = pm.response.json();",
									"    ",
									"    pm.expect(jsonData.entity.layout.body.rows.length).to.equal(1);",
									"    pm.expect(jsonData.entity.layout.body.rows[0].columns.length).to.equal(1);",
									"     ",
									"});",
									"",
									"pm.test(\"Number of Contents\", function () {",
									"    ",
									"    var jsonData = pm.response.json();",
									"    ",
									"    pm.expect(jsonData.entity.numberContents).to.equal(1);",
									"    ",
									"     ",
									"});",
									"",
									"pm.test(\"Page checks\", function () {",
									"    ",
									"    var jsonData = pm.response.json();",
									"    ",
									"    pm.expect(jsonData.entity.page.pageURI).to.equal('/blog/post/ecotourism-in-costa-rica');",
									"    pm.expect(jsonData.entity.page.title).to.equal('Blog Detail');",
									"    pm.expect(jsonData.entity.page.type).to.equal('htmlpage');",
									"     ",
									"});",
									"",
									"pm.test(\"Site checks\", function () {",
									"    ",
									"    var jsonData = pm.response.json();",
									"    ",
									"    pm.expect(jsonData.entity.site.hostname).to.equal('demo.dotcms.com');",
									"    pm.expect(jsonData.entity.site.type).to.equal('contentlet');",
									"     ",
									"});",
									"",
									"pm.test(\"Template checks\", function () {",
									"    ",
									"    var jsonData = pm.response.json();",
									"    ",
									"    pm.expect(jsonData.entity.template.title).to.equal('anonymous_layout_1582562696562');",
									"    pm.expect(jsonData.entity.template.type).to.equal('template');",
									"     ",
									"});",
									"",
									"pm.test(\"Url Content Map checks\", function () {",
									"    ",
									"    var jsonData = pm.response.json();",
									"",
									"    pm.expect(jsonData.entity.urlContentMap.hostName).to.equal('demo.dotcms.com');",
									"    pm.expect(jsonData.entity.urlContentMap.baseType).to.equal('CONTENT');",
									"    pm.expect(jsonData.entity.urlContentMap.contentType).to.equal('Blog');",
									"    pm.expect(jsonData.entity.urlContentMap.urlTitle).to.equal('ecotourism-in-costa-rica');",
									"    pm.expect(jsonData.entity.urlContentMap['URL_MAP_FOR_CONTENT']).to.equal('/blog/post/ecotourism-in-costa-rica');",
									"    pm.expect(jsonData.entity.urlContentMap['urlMap']).to.equal('/blog/post/ecotourism-in-costa-rica');",
									"});",
									"",
									"",
									"",
									"",
									"",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "admin@dotcms.com",
									"type": "string"
								},
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{serverURL}}/api/v1/page/render/blog/post/ecotourism-in-costa-rica?mode=EDIT_MODE",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"page",
								"render",
								"blog",
								"post",
								"ecotourism-in-costa-rica"
							],
							"query": [
								{
									"key": "mode",
									"value": "EDIT_MODE"
								}
							]
						},
						"description": "Gets an Url content map"
					},
					"response": []
				}
			]
		},
		{
			"name": "Layout [/api/v1/page/{page-id}/layout]",
			"item": [
				{
					"name": "invalidateSession",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{serverURL}}/api/v1/logout",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"logout"
							]
						}
					},
					"response": []
				},
				{
					"name": "GivenInvalidUser_ShouldReturn401",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"",
									"pm.test(\"Status code is 401, Need credentials\", function () {",
									"    pm.response.to.have.status(401);",
									"});",
									"",
									"",
									"",
									"pm.test(\"Response body matches\", function () {",
									"    pm.expect(pm.response.text()).to.include(\"Invalid User\");",
									"});",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\"title\":null,\"layout\":{\"body\":{\"rows\":[{\"columns\":[{\"leftOffset\":1,\"width\":7,\"containers\":[{\"identifier\":\"a050073a-a31e-4aab-9307-86bfb248096a\",\"uuid\":\"1\"}]},{\"leftOffset\":8,\"width\":4,\"containers\":[{\"identifier\":\"5363c6c6-5ba0-4946-b7af-cf875188ac2e\",\"uuid\":\"1\"}]}]}]},\"header\":true,\"footer\":true,\"sidebar\":{\"location\":\"\",\"containers\":[],\"width\":\"small\"}}}"
						},
						"url": {
							"raw": "{{serverURL}}/api/v1/page/bec7b960-a8bf-4f14-a22b-0d94caf217f0/layout",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"page",
								"bec7b960-a8bf-4f14-a22b-0d94caf217f0",
								"layout"
							]
						},
						"description": "@Path(\"/{pageId}/layout\")"
					},
					"response": []
				},
				{
					"name": "GivenValidLayout_ShouldSaveLayout",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Response code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response body contains 'rendered'\", function () {",
									"    pm.expect(pm.response.text()).to.include(\"rendered\");",
									"});",
									"",
									"var jsonData = pm.response.json();",
									"",
									"pm.test(\"'Containers' section contains expected containers\", function () {",
									"    var containers = jsonData[\"entity\"][\"containers\"];",
									"    pm.expect(containers[\"//demo.dotcms.com/application/containers/default/\"].container.identifier).equal(\"69b3d24d-7e80-4be6-b04a-d352d16493ee\");",
									"",
									"    pm.expect(containers[\"5a07f889-4536-4956-aa6e-e7967969ec3f\"].container.identifier).equal(\"5a07f889-4536-4956-aa6e-e7967969ec3f\");",
									"});",
									"",
									"",
									"var layout = jsonData[\"entity\"][\"layout\"];",
									"var rows = layout[\"body\"][\"rows\"];",
									"var columns = layout[\"body\"][\"rows\"][0][\"columns\"];",
									"pm.expect(columns.length).equal(2);",
									"",
									"// column 1 ",
									"var column1 = columns[0];",
									"var containersColumn1 = column1[\"containers\"];",
									"",
									"// column 2",
									"var column2 = columns[1];",
									"var containersColumn2 = column2[\"containers\"];",
									"",
									"",
									"",
									"pm.test(\"Layout has 1 row\", function () {",
									"    pm.expect(rows.length).equal(1);",
									"});",
									"",
									"pm.test(\"First row has 2 columns\", function () {",
									"    pm.expect(columns.length).equal(2);",
									"});",
									"",
									"pm.test(\"First column has width of 7 \", function () {",
									"    pm.expect(column1[\"width\"]).equal(7);",
									"});   ",
									"",
									"pm.test(\"First column has 1 container with expected identifier\", function () {",
									"    pm.expect(containersColumn1.length).equal(1);",
									"    pm.expect(containersColumn1[0].identifier).equal(\"//demo.dotcms.com/application/containers/default/\");",
									"}); ",
									"",
									"pm.test(\"Second column has width of 4 \", function () {",
									"    pm.expect(column2[\"width\"]).equal(4);",
									"}); ",
									"",
									"pm.test(\"Second column has 1 container with expected identifier\", function () {",
									"    pm.expect(containersColumn2.length).equal(1);",
									"    pm.expect(containersColumn2[0].identifier).equal(\"5a07f889-4536-4956-aa6e-e7967969ec3f\");",
									"}); ",
									"",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin@dotcms.com",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"title\": null,\n    \"layout\": {\n        \"body\": {\n            \"rows\": [\n                {\n                    \"columns\": [\n                        {\n                            \"leftOffset\": 1,\n                            \"width\": 7,\n                            \"containers\": [\n                                {\n                                    \"identifier\": \"//demo.dotcms.com/application/containers/default/\", \n                                    \"uuid\": \"1\"\n                                }\n                            ]\n                        },\n                        {\n                            \"leftOffset\": 8,\n                            \"width\": 4,\n                            \"containers\": [\n                                {\n                                    \"identifier\": \"5a07f889-4536-4956-aa6e-e7967969ec3f\",\n                                    \"uuid\": \"1\"\n                                }\n                            ]\n                        }\n                    ]\n                }\n            ]\n        },\n        \"header\": true,\n        \"footer\": true,\n        \"sidebar\": {\n            \"location\": \"\",\n            \"containers\": [],\n            \"width\": \"small\"\n        }\n    }\n}"
						},
						"url": {
							"raw": "{{serverURL}}/api/v1/page/bec7b960-a8bf-4f14-a22b-0d94caf217f0/layout",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"page",
								"bec7b960-a8bf-4f14-a22b-0d94caf217f0",
								"layout"
							]
						},
						"description": "@Path(\"/{pageId}/layout\")"
					},
					"response": []
				},
				{
					"name": "GivenInvalidPageId_ShouldReturn404",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"",
									"pm.test(\"Status code is 404\", function () {",
									"    pm.response.to.have.status(404);",
									"});",
									"",
									"",
									"",
									"pm.test(\"Response body contains\", function () {",
									"    pm.expect(pm.response.text()).to.include(\"Unable to find page with Identifier: 2c12fe7e6-d338-49d5-973b-2d974d57015b\");",
									"});",
									"",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin@dotcms.com",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\"title\":null,\"layout\":{\"body\":{\"rows\":[{\"columns\":[{\"leftOffset\":1,\"width\":7,\"containers\":[{\"identifier\":\"a050073a-a31e-4aab-9307-86bfb248096a\",\"uuid\":\"1\"}]},{\"leftOffset\":8,\"width\":4,\"containers\":[{\"identifier\":\"5363c6c6-5ba0-4946-b7af-cf875188ac2e\",\"uuid\":\"1\"}]}]}]},\"header\":true,\"footer\":true,\"sidebar\":{\"location\":\"\",\"containers\":[],\"width\":\"small\"}}}"
						},
						"url": {
							"raw": "{{serverURL}}/api/v1/page/2c12fe7e6-d338-49d5-973b-2d974d57015b/layout",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"page",
								"2c12fe7e6-d338-49d5-973b-2d974d57015b",
								"layout"
							]
						},
						"description": "@Path(\"/{pageId}/layout\")"
					},
					"response": []
				},
				{
					"name": "RequestWihoutParameters",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"",
									"pm.test(\"Status code is 400\", function () {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"",
									"",
									"pm.test(\"Response body contains\", function () {",
									"    pm.expect(pm.response.text()).to.include(\"required\");",
									"});",
									"",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin@dotcms.com",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{serverURL}}/api/v1/page/bec7b960-a8bf-4f14-a22b-0d94caf217f0/layout",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"page",
								"bec7b960-a8bf-4f14-a22b-0d94caf217f0",
								"layout"
							]
						},
						"description": "@Path(\"/{pageId}/layout\")"
					},
					"response": []
				},
				{
					"name": "BadRequest",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"",
									"pm.test(\"Status code is 400\", function () {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"",
									"",
									"pm.test(\"Response body contains\", function () {",
									"    pm.expect(pm.response.text()).to.include(\"Unrecognized field\");",
									"});",
									"",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin@dotcms.com",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\"2title\":null,\"layout\":{\"body\":{\"rows\":[{\"columns\":[{\"leftOffset\":1,\"width\":7,\"containers\":[{\"identifier\":\"a050073a-a31e-4aab-9307-86bfb248096a\",\"uuid\":\"1\"}]},{\"leftOffset\":8,\"width\":4,\"containers\":[{\"identifier\":\"5363c6c6-5ba0-4946-b7af-cf875188ac2e\",\"uuid\":\"1\"}]}]}]},\"header\":true,\"footer\":true,\"sidebar\":{\"location\":\"\",\"containers\":[],\"width\":\"small\"}}}"
						},
						"url": {
							"raw": "{{serverURL}}/api/v1/page/bec7b960-a8bf-4f14-a22b-0d94caf217f0/layout",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"page",
								"bec7b960-a8bf-4f14-a22b-0d94caf217f0",
								"layout"
							]
						},
						"description": "@Path(\"/{pageId}/layout\")"
					},
					"response": []
				}
			],
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			]
		},
		{
			"name": "Add Content [/api/v1/page/{page-id}/content]",
			"item": [
				{
					"name": "Test_RespectOrder",
					"item": [
						{
							"name": "ImportBundle",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Bundle uploaded sucessfully\", function () {",
											"    pm.response.to.have.status(200);",
											"",
											"    var jsonData = pm.response.json();",
											"    console.log(jsonData);",
											"    pm.expect(jsonData[\"status\"]).to.eql(\"SUCCESS\");",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "basic",
									"basic": [
										{
											"key": "username",
											"value": "admin@dotcms.com",
											"type": "string"
										},
										{
											"key": "password",
											"value": "admin",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"type": "text",
										"value": "application/octet-stream"
									},
									{
										"key": "Content-Disposition",
										"type": "text",
										"value": "attachment"
									}
								],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "file",
											"type": "file",
											"src": "resources/testRespectOrder_Bundle.tar.gz"
										}
									]
								},
								"url": {
									"raw": "{{serverURL}}/api/bundle?sync=true",
									"host": [
										"{{serverURL}}"
									],
									"path": [
										"api",
										"bundle"
									],
									"query": [
										{
											"key": "sync",
											"value": "true"
										},
										{
											"key": "AUTH_TOKEN",
											"value": "",
											"disabled": true
										}
									]
								},
								"description": "Imports a Bundle that includes:\n\n*   Page (testRespectOrder)\n*   2 Content (testOrder1 and testOrder2)"
							},
							"response": []
						},
						{
							"name": "Get Page To Check Order",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"",
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"",
											"pm.test(\"Response reorder check\", function () {",
											"    pm.expect(pm.response.text()).to.include(\"<h2>testOrder2</h2><h2>testOrder1</h2>\");",
											"",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "basic",
									"basic": [
										{
											"key": "password",
											"value": "admin",
											"type": "string"
										},
										{
											"key": "username",
											"value": "admin@dotcms.com",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{serverURL}}/api/v1/page/render/testrespectorder?language_id=1&host_id=8a7d5e23-da1e-420a-b4f0-471e7da8ea2d",
									"host": [
										"{{serverURL}}"
									],
									"path": [
										"api",
										"v1",
										"page",
										"render",
										"testrespectorder"
									],
									"query": [
										{
											"key": "language_id",
											"value": "1"
										},
										{
											"key": "host_id",
											"value": "8a7d5e23-da1e-420a-b4f0-471e7da8ea2d"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "ReorderContents",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"Response body contains\", function () {",
											"    pm.expect(pm.response.text()).to.include(\"ok\");",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "basic",
									"basic": [
										{
											"key": "password",
											"value": "admin",
											"type": "string"
										},
										{
											"key": "username",
											"value": "admin@dotcms.com",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "[{\"identifier\":\"//default/application/containers/system/\",\"uuid\":\"1\",\"contentletsId\":[\"ffba6c6b2e90ce4dcc2a553c6b860822\",\"844cdd64de4fd9418613b3b53f860c6f\"]}]"
								},
								"url": {
									"raw": "{{serverURL}}/api/v1/page/773c1d064bfedacf26986a67ee90b490/content",
									"host": [
										"{{serverURL}}"
									],
									"path": [
										"api",
										"v1",
										"page",
										"773c1d064bfedacf26986a67ee90b490",
										"content"
									]
								},
								"description": "Reorder the page contents."
							},
							"response": []
						},
						{
							"name": "Get Page To Check Reorder",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"",
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"",
											"pm.test(\"Response reorder check\", function () {",
											"    pm.expect(pm.response.text()).to.include(\"<h2>testOrder1</h2><h2>testOrder2</h2>\");",
											"",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "basic",
									"basic": [
										{
											"key": "password",
											"value": "admin",
											"type": "string"
										},
										{
											"key": "username",
											"value": "admin@dotcms.com",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{serverURL}}/api/v1/page/render/testrespectorder?language_id=1&host_id=8a7d5e23-da1e-420a-b4f0-471e7da8ea2d",
									"host": [
										"{{serverURL}}"
									],
									"path": [
										"api",
										"v1",
										"page",
										"render",
										"testrespectorder"
									],
									"query": [
										{
											"key": "language_id",
											"value": "1"
										},
										{
											"key": "host_id",
											"value": "8a7d5e23-da1e-420a-b4f0-471e7da8ea2d"
										}
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "invalidateSession",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{serverURL}}/api/v1/logout",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"logout"
							]
						}
					},
					"response": []
				},
				{
					"name": "UserAuthenticationValidation",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"",
									"pm.test(\"Status code is 401, Need credentials\", function () {",
									"    pm.response.to.have.status(401);",
									"});",
									"",
									"",
									"",
									"pm.test(\"Response body matches\", function () {",
									"    pm.expect(pm.response.text()).to.include(\"Invalid User\");",
									"});",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "[{\"identifier\":\"a050073a-a31e-4aab-9307-86bfb248096a\",\"uuid\":\"1\",\"contentletsId\":[\"767509b1-2392-4661-a16b-e0e31ce27719\",\"3c30df49-ea78-417a-93ce-631cd25bc66c\"]},{\"identifier\":\"5363c6c6-5ba0-4946-b7af-cf875188ac2e\",\"uuid\":\"1\",\"contentletsId\":[\"2efc77b4-a54f-479b-8a81-a133b9e6da04\",\"5aef0c62-b7d6-4805-9e7c-77a67f4822f3\",\"66d47ebf-7b11-4076-85b0-b6c8c373d000\"]}]"
						},
						"url": {
							"raw": "{{serverURL}}/api/v1/page/bec7b960-a8bf-4f14-a22b-0d94caf217f0/content",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"page",
								"bec7b960-a8bf-4f14-a22b-0d94caf217f0",
								"content"
							]
						},
						"description": "@Path(\"{pageId}/content\")"
					},
					"response": []
				},
				{
					"name": "SuccessRequest",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"",
									"",
									"pm.test(\"Response body contains\", function () {",
									"    pm.expect(pm.response.text()).to.include(\"ok\");",
									"});",
									"",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin@dotcms.com",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "[{\"identifier\":\"5a07f889-4536-4956-aa6e-e7967969ec3f\",\"uuid\":\"1\",\"contentletsId\":[\"d4ed1990-b151-42ca-9bca-0725b07260de\"]},{\"identifier\":\"//demo.dotcms.com/application/containers/default/\",\"uuid\":\"1\",\"contentletsId\":[\"f827c41a-5689-4733-b4d7-916d3a31c9c6\",\"7c9cb3a7-bb68-4fd0-b21d-03ec4be491a7\"]}]"
						},
						"url": {
							"raw": "{{serverURL}}/api/v1/page/bec7b960-a8bf-4f14-a22b-0d94caf217f0/content",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"page",
								"bec7b960-a8bf-4f14-a22b-0d94caf217f0",
								"content"
							]
						},
						"description": "Adds Content to a Page, the container, template, page and contentlets are imported.\n\n7c9cb3a7-bb68-4fd0-b21d-03ec4be491a7 = container Banner\n7c9cb3a7-bb68-4fd0-b21d-03ec4be491a7e = Banner contentlet\n7c9cb3a7-bb68-4fd0-b21d-03ec4be491a7 = Container as File Default\nf827c41a-5689-4733-b4d7-916d3a31c9c6 = Rich Text Contentlet\n7c9cb3a7-bb68-4fd0-b21d-03ec4be491a7 = Widget Contentlet"
					},
					"response": []
				},
				{
					"name": "Save Contentlets Not Valid BadRequest 400",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 400\", function () {",
									"    pm.response.to.have.status(400);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin@dotcms.com",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "[{\"identifier\":\"5a07f889-4536-4956-aa6e-e7967969ec3f\",\"uuid\":\"1\",\"contentletsId\":[\"f827c41a-5689-4733-b4d7-916d3a31c9c6\"]}]"
						},
						"url": {
							"raw": "{{serverURL}}/api/v1/page/bec7b960-a8bf-4f14-a22b-0d94caf217f0/content",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"page",
								"bec7b960-a8bf-4f14-a22b-0d94caf217f0",
								"content"
							]
						},
						"description": "@Path(\"{pageId}/content\")"
					},
					"response": []
				},
				{
					"name": "InvalidPageId",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 404\", function () {",
									"    pm.response.to.have.status(404);",
									"});",
									"",
									"",
									"",
									"pm.test(\"Response body contains\", function () {",
									"    pm.expect(pm.response.text()).to.include(\"Unable to find Page\");",
									"});",
									"",
									"",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin@dotcms.com",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "[{\"identifier\":\"a050073a-a31e-4aab-9307-86bfb248096a\",\"uuid\":\"1\",\"contentletsId\":[\"767509b1-2392-4661-a16b-e0e31ce27719\",\"3c30df49-ea78-417a-93ce-631cd25bc66c\"]},{\"identifier\":\"5363c6c6-5ba0-4946-b7af-cf875188ac2e\",\"uuid\":\"1\",\"contentletsId\":[\"2efc77b4-a54f-479b-8a81-a133b9e6da04\",\"5aef0c62-b7d6-4805-9e7c-77a67f4822f3\",\"66d47ebf-7b11-4076-85b0-b6c8c373d000\"]}]"
						},
						"url": {
							"raw": "{{serverURL}}/api/v1/page/2c12fe7e6-d338-49d5-973b-2d974d57015b/content",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"page",
								"2c12fe7e6-d338-49d5-973b-2d974d57015b",
								"content"
							]
						},
						"description": "@Path(\"{pageId}/content\")"
					},
					"response": []
				},
				{
					"name": "RequestWihoutParameters",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"",
									"pm.test(\"Status code is 400\", function () {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"",
									"",
									"pm.test(\"Layout is required\", function () {",
									"    pm.expect(pm.response.text()).to.include(\"Layout is required\");",
									"});",
									"",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin@dotcms.com",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{serverURL}}/api/v1/page/bec7b960-a8bf-4f14-a22b-0d94caf217f0/content",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"page",
								"bec7b960-a8bf-4f14-a22b-0d94caf217f0",
								"content"
							]
						},
						"description": "@Path(\"{pageId}/content\")"
					},
					"response": []
				},
				{
					"name": "BadRequest",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"",
									"pm.test(\"Status code is 400\", function () {",
									"    pm.response.to.have.status(400);",
									"});",
									"",
									"",
									"",
									"pm.test(\"Response body contains\", function () {",
									"    pm.expect(pm.response.text()).to.include(\"Container id and uuid are required\");",
									"});",
									"",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin@dotcms.com",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "[{\"id222\":\"a050073a-a31e-4aab-9307-86bfb248096a\",\"uuid\":\"1\",\"contentlets\":[\"767509b1-2392-4661-a16b-e0e31ce27719\",\"3c30df49-ea78-417a-93ce-631cd25bc66c\"]},{\"id\":\"5363c6c6-5ba0-4946-b7af-cf875188ac2e\",\"uuid22\":\"1\",\"contentlets\":[\"2efc77b4-a54f-479b-8a81-a133b9e6da04\",\"5aef0c62-b7d6-4805-9e7c-77a67f4822f3\",\"66d47ebf-7b11-4076-85b0-b6c8c373d000\"]}]"
						},
						"url": {
							"raw": "{{serverURL}}/api/v1/page/bec7b960-a8bf-4f14-a22b-0d94caf217f0/content",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"page",
								"bec7b960-a8bf-4f14-a22b-0d94caf217f0",
								"content"
							]
						},
						"description": "@Path(\"{pageId}/content\")"
					},
					"response": []
				},
				{
					"name": "Save Content Upsert Duplicated Containers Body",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"",
									"",
									"pm.test(\"Response body contains\", function () {",
									"    pm.expect(pm.response.text()).to.include(\"ok\");",
									"});",
									"",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin@dotcms.com",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"type": "any"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "[\n    {\n        \"identifier\":\"//demo.dotcms.com/application/containers/default/\",\n        \"uuid\":\"1\",\n        \"contentletsId\":[\"7c9cb3a7-bb68-4fd0-b21d-03ec4be491a7\"]\n    },\n    {\n        \"identifier\":\"//demo.dotcms.com/application/containers/default/\",\n        \"uuid\":\"1\",\n        \"contentletsId\":[\"f827c41a-5689-4733-b4d7-916d3a31c9c6\"]\n    },\n        {\n        \"identifier\":\"//demo.dotcms.com/application/containers/default/\",\n        \"uuid\":\"1\",\n        \"contentletsId\":[\"7c9cb3a7-bb68-4fd0-b21d-03ec4be491a7\"]\n    }\n]",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{serverURL}}/api/v1/page/bec7b960-a8bf-4f14-a22b-0d94caf217f0/content",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"page",
								"bec7b960-a8bf-4f14-a22b-0d94caf217f0",
								"content"
							]
						},
						"description": "This test is for when users make a request sending at the Body the same container and uuid diff times.\nThis will merge all those contentlets and save the page successfully."
					},
					"response": []
				}
			],
			"description": " @Path(\"{pageId}/content\")",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			]
		},
		{
			"name": "Render HTML [/api/v1/page/renderHTML]",
			"item": [
				{
					"name": "invalidateSession",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{serverURL}}/api/v1/logout",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"logout"
							]
						}
					},
					"response": []
				},
				{
					"name": "UserAuthenticationValidation",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"",
									"pm.test(\"Status code is 401, Need credentials\", function () {",
									"    pm.response.to.have.status(401);",
									"});",
									"",
									"",
									"",
									"pm.test(\"Invalid User\", function () {",
									"    pm.expect(pm.response.text()).to.include(\"Invalid User\");",
									"});",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{serverURL}}/api/v1/page/renderHTML/destinations/costa-rica",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"page",
								"renderHTML",
								"destinations",
								"costa-rica"
							]
						},
						"description": "@Path(\"/renderHTML/{uri: .*}\")"
					},
					"response": []
				},
				{
					"name": "pre_ImportBundleWithDemoHost",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Bundle uploaded sucessfully\", function () {",
									"    pm.response.to.have.status(200);",
									"",
									"    var jsonData = pm.response.json();",
									"    console.log(jsonData);",
									"",
									"    pm.expect(jsonData[\"bundleName\"]).to.eql(\"demo.dotcms.com.tar.gz\");",
									"    pm.expect(jsonData[\"status\"]).to.eql(\"SUCCESS\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "admin@dotcms.com",
									"type": "string"
								},
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"type": "text",
								"value": "application/octet-stream"
							},
							{
								"key": "Content-Disposition",
								"type": "text",
								"value": "attachment"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "file",
									"type": "file",
									"src": "resources/GraphQL/demo.dotcms.com.tar.gz"
								}
							]
						},
						"url": {
							"raw": "{{serverURL}}/api/bundle?sync=true",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"bundle"
							],
							"query": [
								{
									"key": "sync",
									"value": "true"
								},
								{
									"key": "AUTH_TOKEN",
									"value": "",
									"disabled": true
								}
							]
						},
						"description": "Imports a Bundle that includes:\n* Imports demo.dotcms.com"
					},
					"response": []
				},
				{
					"name": "SuccessRequest",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"",
									"",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"",
									"",
									"pm.test(\"renders expected HTML only\", function () {",
									"    pm.expect(pm.response.text().startsWith(\"<!doctype html>\")).to.be.true;",
									"    pm.expect(pm.response.text()).to.include(\"body id=\\\"costa-rica-rain-forest\\\"\");",
									"});",
									"",
									"",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin@dotcms.com",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{serverURL}}/api/v1/page/renderHTML/destinations/costa-rica",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"page",
								"renderHTML",
								"destinations",
								"costa-rica"
							]
						},
						"description": "@Path(\"/renderHTML/{uri: .*}\")"
					},
					"response": []
				},
				{
					"name": "InvalidPageURL",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"",
									"pm.test(\"Status code is 404\", function () {",
									"    pm.response.to.have.status(404);",
									"});",
									"",
									"",
									"",
									"pm.test(\"Valid response\", function () {",
									"    pm.expect(pm.response.text()).to.include(\"Page \\'about-us/our-team/index2\\' not found\");",
									"});",
									"",
									"",
									"",
									"",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin@dotcms.com",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{serverURL}}/api/v1/page/renderHTML/about-us/our-team/index2",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"page",
								"renderHTML",
								"about-us",
								"our-team",
								"index2"
							]
						},
						"description": "@Path(\"/renderHTML/{uri: .*}\")"
					},
					"response": []
				}
			],
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			]
		},
		{
			"name": "Whats Changed",
			"item": [
				{
					"name": "pre_ImportBundle",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Bundle uploaded sucessfully\", function () {",
									"    pm.response.to.have.status(200);",
									"",
									"    var jsonData = pm.response.json();",
									"    console.log(jsonData);",
									"",
									"    pm.expect(jsonData[\"bundleName\"]).to.contains(\"testWhatsChanged\");",
									"    pm.expect(jsonData[\"status\"]).to.eql(\"SUCCESS\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "admin@dotcms.com",
									"type": "string"
								},
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"type": "text",
								"value": "application/octet-stream"
							},
							{
								"key": "Content-Disposition",
								"type": "text",
								"value": "attachment"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "file",
									"type": "file",
									"src": "resources/testWhatsChanged-01FTGYNEP672VF4KFRFWSX3RPT.tar.gz"
								}
							]
						},
						"url": {
							"raw": "{{serverURL}}/api/bundle?sync=true",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"bundle"
							],
							"query": [
								{
									"key": "sync",
									"value": "true"
								},
								{
									"key": "AUTH_TOKEN",
									"value": "",
									"disabled": true
								}
							]
						},
						"description": "Imports a Bundle that includes: a page with content, the content has diff versions working and live"
					},
					"response": []
				},
				{
					"name": "Check Whats Changed Endpoint",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"There are diff between live and working page\", function () {",
									"    var jsonData = pm.response.json().entity;",
									"    console.log(jsonData);",
									"    pm.expect(jsonData[\"diff\"]).equal(true);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin@dotcms.com",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"type": "any"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{serverURL}}/api/v1/page/8afe50bc66533c6f0ed7711d74654b80/render/versions",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"page",
								"8afe50bc66533c6f0ed7711d74654b80",
								"render",
								"versions"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "TestHostVariables",
			"item": [
				{
					"name": "Create new Site For Test Host Variables",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code should be 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"var jsonData = pm.response.json();",
									"",
									"pm.test(\"Host check\", function () {",
									"    pm.expect(jsonData.entity.siteName).to.eql('sitevariables.site.com');",
									"});",
									"",
									"pm.collectionVariables.set(\"siteIdTestHost\", jsonData.entity.identifier);",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin@dotcms.com",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"siteName\":\"sitevariables.site.com\"\n\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{serverURL}}/api/v1/site",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"site"
							]
						}
					},
					"response": []
				},
				{
					"name": "Publish Site",
					"request": {
						"method": "PUT",
						"header": [],
						"url": {
							"raw": "{{serverURL}}/api/v1/site/{{siteIdTestHost}}/_publish",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"site",
								"{{siteIdTestHost}}",
								"_publish"
							]
						}
					},
					"response": []
				},
				{
					"name": "Add Site Variable",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code should be 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"var jsonData = pm.response.json();",
									"",
									"pm.test(\"Host check\", function () {",
									"    pm.expect(jsonData.entity.key).to.eql('onevar1');",
									"});",
									"",
									"pm.collectionVariables.set(\"sitevariableIdTestHost\", jsonData.entity.id);",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin@dotcms.com",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"siteId\":\"{{siteIdTestHost}}\",\n    \"name\":\"onevar1\",\n    \"key\":\"onevar1\",\n    \"value\":\"onevar-value\"\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{serverURL}}/api/v1/site/variable",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"site",
								"variable"
							]
						}
					},
					"response": []
				},
				{
					"name": "CreateNewContainer Test Host Variables",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"No errors\", function () {",
									"    ",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.errors.length).to.eql(0);",
									"});",
									"",
									"pm.test(\"Information Saved Correctly\", function () {",
									"    ",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.entity.title).to.eql(\"TestContainerHostVariables\");",
									"    pm.expect(jsonData.entity.notes).to.eql(\"Notes\");",
									"    ",
									"    ",
									"});",
									"",
									"var jsonData = pm.response.json();",
									"pm.collectionVariables.set(\"containeridentifier\", jsonData.entity.identifier);",
									"pm.collectionVariables.set(\"inode\", jsonData.entity.inode);",
									"",
									"",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "admin@dotcms.com",
									"type": "string"
								},
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"title\":\"TestContainerHostVariables\",\n    \"friendlyName\":\"TestContainer description HostVariables\",\n    \"maxContentlets\":1,\n    \"notes\":\"Notes\",\n    \"preLoop\":\"preLoop $host_variable.onevar1\",\n    \"postLoop\":\"postLoop xxxx\",\n    \"containerStructures\":[\n        {\n            \"structureId\":\"webPageContent\",\n            \"code\":\"$title  on container\"\n        }\n    ]\n\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{serverURL}}/api/v1/containers",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"containers"
							]
						},
						"description": "Create a container"
					},
					"response": []
				},
				{
					"name": "SavePublishNewTemplateTestHostVariables",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code should be ok 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"var jsonData = pm.response.json();",
									"",
									"pm.test(\"live check\", function () {",
									"    pm.expect(jsonData.entity.live).to.eql(true);",
									"});",
									"",
									"",
									"pm.test(\"Title check\", function () {",
									"    pm.expect(jsonData.entity.title).to.eql('PostMan Test Save Publish Test Host Variables');",
									"});",
									"",
									"pm.collectionVariables.set(\"templateIdToPublishedHost\", jsonData.entity.identifier);",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin@dotcms.com",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"title\":\"PostMan Test Save Publish Test Host Variables\",\n    \"friendlyName\":\"This is a postman test description\",\n    \"body\":\"#parseContainer('{{containeridentifier}}','1659543155955')\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{serverURL}}/api/v1/templates/_savepublish",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"templates",
								"_savepublish"
							]
						}
					},
					"response": []
				},
				{
					"name": "Create Page using the template",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200 \", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"var jsonData = pm.response.json();",
									"",
									"pm.test(\"Path check\", function () {",
									"    pm.expect(jsonData.entity.path).to.eql(\"/testpagehostvariables\");",
									"});",
									"",
									"",
									"",
									"var jsonData = pm.response.json();",
									"pm.collectionVariables.set(\"pageUrlHostVariablestest\", pm.response.json().path);",
									"",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin@dotcms.com",
									"type": "string"
								},
								{
									"key": "saveHelperData",
									"type": "any"
								},
								{
									"key": "showPassword",
									"value": false,
									"type": "boolean"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"contentlet\": {\n        \"contentType\": \"htmlpageasset\",\n        \"hostFolder\": \"{{siteIdTestHost}}\",\n        \"title\": \"Test Page Host variables\",\n        \"url\": \"testpagehostvariables\",\n        \"template\":\"{{templateIdToPublishedHost}}\",\n        \"sortOrder\":1,\n        \"cachettl\":\"0\",\n        \"friendlyName\":\"testpagehostvariables\"\n\n    }\n}"
						},
						"url": {
							"raw": "{{serverURL}}/api/v1/workflow/actions/default/fire/PUBLISH",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"workflow",
								"actions",
								"default",
								"fire",
								"PUBLISH"
							]
						},
						"description": "Fire any action using the actionId\n\nOptional: If you pass ?inode={inode}, you don't need body here.\n\n@Path(\"/actions/{actionId}/fire\")"
					},
					"response": []
				},
				{
					"name": "Test the host variables",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200 \", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"var text = pm.response.text();",
									"",
									"pm.test(\"Path check\", function () {",
									"    pm.expect(text).to.include(\"onevar-value\");",
									"});",
									"",
									"",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{serverURL}}/api/v1/page/render/testpagehostvariables?language_id=1&host_id={{siteIdTestHost}}",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"page",
								"render",
								"testpagehostvariables"
							],
							"query": [
								{
									"key": "language_id",
									"value": "1"
								},
								{
									"key": "host_id",
									"value": "{{siteIdTestHost}}"
								}
							]
						}
					},
					"response": []
				}
			],
			"description": "1.  This test creates a Host with two variables\n2.  Creates a container with the generic contentlet and use this two variables\n3.  Creates a template that uses this container\n4.  creates a page that uses this page\n5.  Check that the page exists."
		},
		{
			"name": "In-Place Content Copy",
			"item": [
				{
					"name": "Create Test Page",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"HTTP Status code must be 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Test Page created successfully\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.errors.length).to.eql(0);",
									"    pm.collectionVariables.set(\"pageIdentifier\", jsonData.entity.identifier);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin@dotcms.com",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\n\t\"contentlet\": {\n\t\t\"contentType\":\"htmlpageasset\",\n        \"title\":\"testPageCopy\",\n        \"url\":\"testPageCopy\",\n        \"hostFolder\":\"default\",\n        \"template\":\"SYSTEM_TEMPLATE\",\n        \"friendlyName\":\"testPageCopy\",\n        \"cachettl\":0\n\t\t\n\t}\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{serverURL}}/api/v1/workflow/actions/default/fire/PUBLISH?indexPolicy=WAIT_FOR",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"workflow",
								"actions",
								"default",
								"fire",
								"PUBLISH"
							],
							"query": [
								{
									"key": "indexPolicy",
									"value": "WAIT_FOR"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Create Test Rich Text Contentlet",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"HTTP Status code must be 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Test Rich Text created successfully\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.errors.length).to.eql(0);",
									"    pm.collectionVariables.set(\"richContentIdentifier\", jsonData.entity.identifier);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin@dotcms.com",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n\t\n\t\"contentlet\": {\n\t\t\"contentType\":\"webPageContent\",\n        \"title\":\"textContent\",\n        \"contentHost\":\"default\",\n        \"body\":\"Text Content Body\"\n        \n\t}\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{serverURL}}/api/v1/workflow/actions/default/fire/PUBLISH?indexPolicy=WAIT_FOR",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"workflow",
								"actions",
								"default",
								"fire",
								"PUBLISH"
							],
							"query": [
								{
									"key": "indexPolicy",
									"value": "WAIT_FOR"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Add Test Content To Test Page",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"HTTP Status code must be 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Test Content added to Test Page successfuly\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.errors.length).to.eql(0);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin@dotcms.com",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "[\n    {\n        \"identifier\": \"SYSTEM_CONTAINER\",\n        \"uuid\": \"1\",\n        \"contentletsId\": [\n            \"{{richContentIdentifier}}\"\n        ]\n    }\n]",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{serverURL}}/api/v1/page/{{pageIdentifier}}/content",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"page",
								"{{pageIdentifier}}",
								"content"
							]
						}
					},
					"response": []
				},
				{
					"name": "Check That Multi-Tree Data Is Correct",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"HTTP Status code must be 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Retrieving Multi-Tree data for test Contentlet\", function () {",
									"    var entity = pm.response.json().entity;",
									"    var testContentId = pm.collectionVariables.get(\"richContentIdentifier\");",
									"    var found = false;",
									"    entity.forEach((treeEntry) => {",
									"",
									"        if (testContentId == treeEntry.contentId) {",
									"            pm.collectionVariables.set(\"containerId\", treeEntry.containerId);",
									"            pm.collectionVariables.set(\"contentId\", treeEntry.contentId);",
									"            pm.collectionVariables.set(\"pageId\", treeEntry.pageId);",
									"            pm.collectionVariables.set(\"personalization\", treeEntry.personalization);",
									"            pm.collectionVariables.set(\"relationType\", treeEntry.relationType);",
									"            pm.collectionVariables.set(\"treeOrder\", treeEntry.treeOrder);",
									"            pm.collectionVariables.set(\"variantId\", treeEntry.variantId);",
									"            found = true;",
									"        }",
									"",
									"    });",
									"    if (!found) {",
									"        pm.expect.fail(\"Expected test Contentlet with ID '\" + testContentId + \"' was not found\");",
									"    }",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin@dotcms.com",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{serverURL}}/api/v1/page/{{pageIdentifier}}/content/tree",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"page",
								"{{pageIdentifier}}",
								"content",
								"tree"
							]
						}
					},
					"response": []
				},
				{
					"name": "In-Place Copy Of Test Contentlet",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"HTTP Status code must be 200\", function () {",
									"    pm.response.to.have.status(200);",
									"    var jsonData = pm.response.json();",
									"    pm.collectionVariables.set(\"copiedRichContentIdentifier\", jsonData.entity.identifier);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"containerId\": \"{{containerId}}\",\n    \"contentId\": \"{{contentId}}\",\n    \"pageId\": \"{{pageId}}\",\n    \"personalization\": \"{{personalization}}\",\n    \"relationType\": \"{{relationType}}\",\n    \"treeOrder\": \"{{treeOrder}}\",\n    \"variantId\": \"{{variantId}}\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{serverURL}}/api/v1/page/copyContent",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"page",
								"copyContent"
							]
						}
					},
					"response": []
				},
				{
					"name": "Check Multitree Data After In-Place Copy",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"HTTP Status code must be 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Checking that duplicate Contentlet has replaced the existing one\", function () {",
									"    var entity = pm.response.json().entity;",
									"",
									"    var containerId = pm.collectionVariables.get(\"containerId\");",
									"    var contentId   = pm.collectionVariables.get(\"copiedRichContentIdentifier\");",
									"    var pageId      = pm.collectionVariables.get(\"pageId\");",
									"    var personalization = pm.collectionVariables.get(\"personalization\");",
									"    var relationType = pm.collectionVariables.get(\"relationType\");",
									"    var variantId = pm.collectionVariables.get(\"variantId\");",
									"    ",
									"    var found = false;",
									"    entity.forEach((treeEntry) => {",
									"",
									"        if (contentId == treeEntry.contentId) {",
									"            found = true;",
									"            pm.expect(treeEntry.containerId).to.eql(containerId);",
									"            pm.expect(treeEntry.contentId).to.eql(contentId);",
									"            pm.expect(treeEntry.pageId).to.eql(pageId);",
									"            pm.expect(treeEntry.personalization).to.eql(personalization);",
									"            pm.expect(treeEntry.relationType).to.eql(relationType);",
									"            pm.expect(treeEntry.variantId).to.eql(variantId);",
									"        }",
									"",
									"    });",
									"    if (!found) {",
									"        pm.expect.fail(\"Copied test Contentlet with ID '\" + contentId + \"' was not found\");",
									"    }",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin@dotcms.com",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{serverURL}}/api/v1/page/{{pageIdentifier}}/content/tree",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"page",
								"{{pageIdentifier}}",
								"content",
								"tree"
							]
						}
					},
					"response": []
				},
				{
					"name": "Copy Non-Existing Contentlet",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"HTTP Status code must be 404\", function () {",
									"    pm.response.to.have.status(404);",
									"});",
									"",
									"pm.test(\"Checking that the error message is present\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.message).not.eq(\"\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin@dotcms.com",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"containerId\": \"{{containerId}}\",\n    \"contentId\": \"{{contentId}}xxx\",\n    \"pageId\": \"{{pageId}}\",\n    \"personalization\": \"{{personalization}}\",\n    \"relationType\": \"{{relationType}}\",\n    \"treeOrder\": \"{{treeOrder}}\",\n    \"variantId\": \"{{variantId}}\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{serverURL}}/api/v1/page/copyContent",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"page",
								"copyContent"
							]
						}
					},
					"response": []
				},
				{
					"name": "Copy Contentlet to Non-Existing Container",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"HTTP Status code must be 404\", function () {",
									"    pm.response.to.have.status(404);",
									"});",
									"",
									"pm.test(\"Checking that the error message is present\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.message).not.eq(\"\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin@dotcms.com",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"containerId\": \"{{containerId}}xx\",\n    \"contentId\": \"{{contentId}}\",\n    \"pageId\": \"{{pageId}}\",\n    \"personalization\": \"{{personalization}}\",\n    \"relationType\": \"{{relationType}}\",\n    \"treeOrder\": \"{{treeOrder}}\",\n    \"variantId\": \"{{variantId}}\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{serverURL}}/api/v1/page/copyContent",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"page",
								"copyContent"
							]
						}
					},
					"response": []
				},
				{
					"name": "Deep-Clone Test Page",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"HTTP Status code must be 200\", function () {",
									"    pm.response.to.have.status(200);",
									"    var jsonData = pm.response.json();",
									"    pm.collectionVariables.set(\"pageDeepCopyIdentifier\", jsonData.entity.identifier);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin@dotcms.com",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [],
						"url": {
							"raw": "{{serverURL}}/api/v1/page/{{pageIdentifier}}/_deepcopy",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"page",
								"{{pageIdentifier}}",
								"_deepcopy"
							]
						}
					},
					"response": []
				},
				{
					"name": "Check Multi-Tree Data For Deep-Copied Page",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"HTTP Status code must be 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Checking Multi-Tree data Deep-Copied Page\", function () {",
									"    var jsonData = pm.response.json();",
									"    var containerId = pm.collectionVariables.get(\"containerId\");",
									"    var contentId = pm.collectionVariables.get(\"contentId\");",
									"    var pageId = pm.collectionVariables.get(\"pageId\");",
									"    var personalization = pm.collectionVariables.get(\"personalization\");",
									"    var relationType = pm.collectionVariables.get(\"relationType\");",
									"",
									"    pm.expect(jsonData.entity[0].containerId).to.eql(containerId);",
									"    pm.expect(jsonData.entity[0].contentId).to.not.eql(contentId);",
									"    pm.expect(jsonData.entity[0].pageId).to.not.eql(pageId);",
									"    pm.expect(jsonData.entity[0].personalization).to.eql(personalization);",
									"    pm.expect(jsonData.entity[0].relationType).to.eql(relationType);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin@dotcms.com",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{serverURL}}/api/v1/page/{{pageDeepCopyIdentifier}}/content/tree",
							"host": [
								"{{serverURL}}"
							],
							"path": [
								"api",
								"v1",
								"page",
								"{{pageDeepCopyIdentifier}}",
								"content",
								"tree"
							]
						}
					},
					"response": []
				}
			],
			"description": "This Test Collection verifies that the In-Place Contentlet Copy works correctly.\n\nThere are times where a given Contentlet is referenced by several pages. Sometimes, users just want to edit the Contentlet in one specific page without affecting they way such a Contentlet looks like in the other pages. This feature allows them to (1) create an exact copy of the Contentlet -- which replaces the existing one -- and (2) edit that copied Contentlet."
		},
		{
			"name": "Put Create Page With CacheTTL 100",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code should be 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"var jsonData = pm.response.json();",
							"",
							"pm.test(\"Identifier must contains path\", function () {",
							"    pm.expect(jsonData.entity.template).eq(\"SYSTEM_TEMPLATE\");",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "basic",
					"basic": [
						{
							"key": "password",
							"value": "admin",
							"type": "string"
						},
						{
							"key": "username",
							"value": "admin@dotcms.com",
							"type": "string"
						},
						{
							"key": "saveHelperData",
							"type": "any"
						},
						{
							"key": "showPassword",
							"value": false,
							"type": "boolean"
						}
					]
				},
				"method": "PUT",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n\t\"contentlet\":{\n\t\t\"stName\": \"htmlpageasset\",\n\t\t\"title\": \"PageAsset SystemTemplate\",\n        \"url\": \"pageassetsystemtemplate\",\n        \"friendlyName\":\"pageassetsystemtemplate\",\n        \"template\": \"SYSTEM_TEMPLATE\",\n        \"sortOrder\": \"0\",\n        \"cachettl\": \"100\",\n        \"hostFolder\":\"48190c8c-42c4-46af-8d1a-0cd5db894797\"\n\t}\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{serverURL}}/api/v1/workflow/actions/default/fire/PUBLISH",
					"host": [
						"{{serverURL}}"
					],
					"path": [
						"api",
						"v1",
						"workflow",
						"actions",
						"default",
						"fire",
						"PUBLISH"
					]
				}
			},
			"response": []
		},
		{
			"name": "invalidateSession",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{serverURL}}/api/v1/logout",
					"host": [
						"{{serverURL}}"
					],
					"path": [
						"api",
						"v1",
						"logout"
					]
				}
			},
			"response": []
		},
		{
			"name": "Check Cache-Control",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Cache-Control is correct\", function () {",
							"    pm.response.to.be.header('Cache-Control','max-age=100');",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "basic",
					"basic": [
						{
							"key": "password",
							"value": "admin",
							"type": "string"
						},
						{
							"key": "username",
							"value": "admin@dotcms.com",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{serverURL}}/pageassetsystemtemplate",
					"host": [
						"{{serverURL}}"
					],
					"path": [
						"pageassetsystemtemplate"
					]
				}
			},
			"response": []
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "serverURL",
			"value": "http://localhost:8080"
		},
		{
			"key": "siteIdTestHost",
			"value": ""
		},
		{
			"key": "sitevariableIdTestHost",
			"value": ""
		},
		{
			"key": "containeridentifier",
			"value": ""
		},
		{
			"key": "inode",
			"value": ""
		},
		{
			"key": "templateIdToPublishedHost",
			"value": ""
		},
		{
			"key": "contentletIdentifier",
			"value": ""
		},
		{
			"key": "contentletInode",
			"value": ""
		},
		{
			"key": "fireActionLanguageKey",
			"value": ""
		},
		{
			"key": "pageUrlHostVariablestest",
			"value": ""
		},
		{
			"key": "pageIdentifier",
			"value": ""
		},
		{
			"key": "richContentIdentifier",
			"value": ""
		},
		{
			"key": "containerId",
			"value": ""
		},
		{
			"key": "contentId",
			"value": ""
		},
		{
			"key": "pageId",
			"value": ""
		},
		{
			"key": "personalization",
			"value": ""
		},
		{
			"key": "relationType",
			"value": ""
		},
		{
			"key": "treeOrder",
			"value": ""
		},
		{
			"key": "variantId",
			"value": ""
		},
		{
			"key": "copiedRichContentIdentifier",
			"value": ""
		},
		{
			"key": "pageDeepCopyIdentifier",
			"value": ""
		}
	]
}