{
	"info": {
		"_postman_id": "bebbcc93-773f-4a17-a01b-52cedcf7a57a",
		"name": "Integrity Checker From Sender",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Generate ",
			"item": [
				{
					"name": "old Way",
					"item": [
						{
							"name": "Happy path",
							"item": [
								{
									"name": "set USE_JWT_TOKEN_IN_PUSH_PUBLISH to false",
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "PUT",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"USE_JWT_TOKEN_IN_PUSH_PUBLISH\": false\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{serverURL}}/api//v1/configuration",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"api",
												"",
												"v1",
												"configuration"
											]
										}
									},
									"response": []
								},
								{
									"name": "create environment",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "0ad65822-5039-4aac-90b5-42fbc04fd51d",
												"exec": [
													"",
													"environmentName = 'environment-' + new Date().getMilliseconds();",
													"pm.collectionVariables.set(\"environmentName\", environmentName);",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "e4692913-6d9b-48ef-8148-17627374a504",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"",
													"    var environmentId = pm.response.text();",
													"    pm.collectionVariables.set(\"environmentId\", environmentId);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Origin",
												"value": "{{origin}}",
												"type": "text"
											}
										],
										"body": {
											"mode": "formdata",
											"formdata": []
										},
										"url": {
											"raw": "{{serverURL}}/DotAjaxDirector/com.dotcms.publisher.environment.ajax.EnvironmentAjaxAction/cmd/addEnvironment?environmentName={{environmentName}}&pushType=pushToOne&whoCanUseSelect=e7d4e34e-5127-45fc-8123-d48b62d510e3&whoCanUse=e7d4e34e-5127-45fc-8123-d48b62d510e3",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"DotAjaxDirector",
												"com.dotcms.publisher.environment.ajax.EnvironmentAjaxAction",
												"cmd",
												"addEnvironment"
											],
											"query": [
												{
													"key": "environmentName",
													"value": "{{environmentName}}"
												},
												{
													"key": "pushType",
													"value": "pushToOne"
												},
												{
													"key": "whoCanUseSelect",
													"value": "e7d4e34e-5127-45fc-8123-d48b62d510e3"
												},
												{
													"key": "whoCanUse",
													"value": "e7d4e34e-5127-45fc-8123-d48b62d510e3"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "create end point",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "1dd9c455-ec58-4536-97ec-0188dcdfe237",
												"exec": [
													"endpointName = 'endpoint-' + new Date().getMilliseconds();",
													"pm.collectionVariables.set(\"endpointName\", endpointName);",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "2075c9c1-6247-40d5-bd1f-c4aa53da565e",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"",
													"    var environmentId = pm.response.text();",
													"    pm.collectionVariables.set(\"endpintId\", environmentId);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Origin",
												"type": "text",
												"value": "{{origin}}"
											}
										],
										"body": {
											"mode": "formdata",
											"formdata": []
										},
										"url": {
											"raw": "{{serverURL}}/DotAjaxDirector/com.dotcms.publisher.endpoint.ajax.PublishingEndpointAjaxAction/cmd/addEndpoint?sending=false&serverName={{endpointName}}&environmentId={{environmentId}}&protocol=http&address=localhost&port=8080&authKey=123&enabled=on",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"DotAjaxDirector",
												"com.dotcms.publisher.endpoint.ajax.PublishingEndpointAjaxAction",
												"cmd",
												"addEndpoint"
											],
											"query": [
												{
													"key": "sending",
													"value": "false"
												},
												{
													"key": "serverName",
													"value": "{{endpointName}}"
												},
												{
													"key": "environmentId",
													"value": "{{environmentId}}"
												},
												{
													"key": "protocol",
													"value": "http"
												},
												{
													"key": "address",
													"value": "localhost"
												},
												{
													"key": "port",
													"value": "8080"
												},
												{
													"key": "authKey",
													"value": "123"
												},
												{
													"key": "enabled",
													"value": "on"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "create receiver",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "b77e3d3a-ccca-4df8-80d6-88396fbb8adc",
												"exec": [
													"receiverName = 'receiverName-' + new Date().getMilliseconds();",
													"pm.collectionVariables.set(\"receiverName\", receiverName);",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "2eae5120-ac21-4870-a736-6cf5abc64d67",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Origin",
												"type": "text",
												"value": "{{origin}}"
											}
										],
										"body": {
											"mode": "formdata",
											"formdata": []
										},
										"url": {
											"raw": "{{serverURL}}/DotAjaxDirector/com.dotcms.publisher.endpoint.ajax.PublishingEndpointAjaxAction/cmd/addEndpoint?sending=true&serverName={{receiverName}}&environmentId={{environmentId}}&address=localhost&authKey=123&enabled=on",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"DotAjaxDirector",
												"com.dotcms.publisher.endpoint.ajax.PublishingEndpointAjaxAction",
												"cmd",
												"addEndpoint"
											],
											"query": [
												{
													"key": "sending",
													"value": "true"
												},
												{
													"key": "serverName",
													"value": "{{receiverName}}"
												},
												{
													"key": "environmentId",
													"value": "{{environmentId}}"
												},
												{
													"key": "address",
													"value": "localhost"
												},
												{
													"key": "authKey",
													"value": "123"
												},
												{
													"key": "enabled",
													"value": "on"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "generate Integrity Checker",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "63c180f1-ffbc-47ea-ab74-c6c946bdeb43",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"",
													"    response = pm.response.json();",
													"",
													"    pm.expect(response['success']).to.equals(true, );",
													"    pm.expect(response['message']).to.equals(\"Integrity Checking Initialized...\");",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{serverURL}}/api/integrity/checkintegrity/endpoint/{{endpintId}}",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"api",
												"integrity",
												"checkintegrity",
												"endpoint",
												"{{endpintId}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "set USE_JWT_TOKEN_IN_PUSH_PUBLISH to true",
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "PUT",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"USE_JWT_TOKEN_IN_PUSH_PUBLISH\": true\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{serverURL}}/api//v1/configuration",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"api",
												"",
												"v1",
												"configuration"
											]
										}
									},
									"response": []
								},
								{
									"name": "{{serverURL}}/api/v1/apitoken",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "8c8e5210-7359-4b5a-a3eb-14f30b01cb57",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.errors.length).to.eql(0);",
													"    pm.expect(jsonData.entity).to.not.eq(undefined);",
													"    pm.expect(jsonData.entity.jwt).to.not.eq(undefined);",
													"    pm.collectionVariables.set(\"token\", jsonData.entity.jwt);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"claims\": {\n        \"label\": \"testing\"\n    },\n    \"expirationSeconds\": 1,\n    \"network\": \"0.0.0.0/0\",\n    \"userId\": \"dotcms.org.1\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{serverURL}}/api/v1/apitoken",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"api",
												"v1",
												"apitoken"
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "invalid token",
							"item": [
								{
									"name": "set USE_JWT_TOKEN_IN_PUSH_PUBLISH to false",
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "PUT",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"USE_JWT_TOKEN_IN_PUSH_PUBLISH\": false\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{serverURL}}/api//v1/configuration",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"api",
												"",
												"v1",
												"configuration"
											]
										}
									},
									"response": []
								},
								{
									"name": "create environment",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "2f5e5a96-83d3-4d33-8223-bb5362160a96",
												"exec": [
													"",
													"environmentName = 'environment-' + new Date().getMilliseconds();",
													"pm.collectionVariables.set(\"environmentName\", environmentName);",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "6e3ecf3d-825a-4484-936a-2129c1f1469c",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"",
													"    var environmentId = pm.response.text();",
													"    pm.collectionVariables.set(\"environmentId\", environmentId);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Origin",
												"value": "{{origin}}",
												"type": "text"
											}
										],
										"body": {
											"mode": "formdata",
											"formdata": []
										},
										"url": {
											"raw": "{{serverURL}}/DotAjaxDirector/com.dotcms.publisher.environment.ajax.EnvironmentAjaxAction/cmd/addEnvironment?environmentName={{environmentName}}&pushType=pushToOne&whoCanUseSelect=e7d4e34e-5127-45fc-8123-d48b62d510e3&whoCanUse=e7d4e34e-5127-45fc-8123-d48b62d510e3",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"DotAjaxDirector",
												"com.dotcms.publisher.environment.ajax.EnvironmentAjaxAction",
												"cmd",
												"addEnvironment"
											],
											"query": [
												{
													"key": "environmentName",
													"value": "{{environmentName}}"
												},
												{
													"key": "pushType",
													"value": "pushToOne"
												},
												{
													"key": "whoCanUseSelect",
													"value": "e7d4e34e-5127-45fc-8123-d48b62d510e3"
												},
												{
													"key": "whoCanUse",
													"value": "e7d4e34e-5127-45fc-8123-d48b62d510e3"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "create end point",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "28358715-9669-4877-b171-40131d12749f",
												"exec": [
													"endpointName = 'endpoint-' + new Date().getMilliseconds();",
													"pm.collectionVariables.set(\"endpointName\", endpointName);",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "a9ceaaf3-02aa-4202-b669-42e95f033f69",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"",
													"    var environmentId = pm.response.text();",
													"    pm.collectionVariables.set(\"endpintId\", environmentId);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Origin",
												"type": "text",
												"value": "{{origin}}"
											}
										],
										"body": {
											"mode": "formdata",
											"formdata": []
										},
										"url": {
											"raw": "{{serverURL}}/DotAjaxDirector/com.dotcms.publisher.endpoint.ajax.PublishingEndpointAjaxAction/cmd/addEndpoint?sending=false&serverName={{endpointName}}&environmentId={{environmentId}}&protocol=http&address=localhost&port=8080&authKey=123&enabled=on",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"DotAjaxDirector",
												"com.dotcms.publisher.endpoint.ajax.PublishingEndpointAjaxAction",
												"cmd",
												"addEndpoint"
											],
											"query": [
												{
													"key": "sending",
													"value": "false"
												},
												{
													"key": "serverName",
													"value": "{{endpointName}}"
												},
												{
													"key": "environmentId",
													"value": "{{environmentId}}"
												},
												{
													"key": "protocol",
													"value": "http"
												},
												{
													"key": "address",
													"value": "localhost"
												},
												{
													"key": "port",
													"value": "8080"
												},
												{
													"key": "authKey",
													"value": "123"
												},
												{
													"key": "enabled",
													"value": "on"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "create receiver",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "3002b7cd-f4d5-401b-a6b4-a837e814330e",
												"exec": [
													"receiverName = 'receiverName-' + new Date().getMilliseconds();",
													"pm.collectionVariables.set(\"receiverName\", receiverName);",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "7b7c68b2-33de-47ec-80f0-c80f15d4035a",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Origin",
												"type": "text",
												"value": "{{origin}}"
											}
										],
										"body": {
											"mode": "formdata",
											"formdata": []
										},
										"url": {
											"raw": "{{serverURL}}/DotAjaxDirector/com.dotcms.publisher.endpoint.ajax.PublishingEndpointAjaxAction/cmd/addEndpoint?sending=true&serverName={{receiverName}}&environmentId={{environmentId}}&address=localhost&authKey=invalid&enabled=on",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"DotAjaxDirector",
												"com.dotcms.publisher.endpoint.ajax.PublishingEndpointAjaxAction",
												"cmd",
												"addEndpoint"
											],
											"query": [
												{
													"key": "sending",
													"value": "true"
												},
												{
													"key": "serverName",
													"value": "{{receiverName}}"
												},
												{
													"key": "environmentId",
													"value": "{{environmentId}}"
												},
												{
													"key": "address",
													"value": "localhost"
												},
												{
													"key": "authKey",
													"value": "invalid"
												},
												{
													"key": "enabled",
													"value": "on"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "generate Integrity Checker",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "1130d11f-864f-4188-9de6-ab9e4021627f",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(401);",
													"    endPoint = pm.collectionVariables.get(\"endpintId\");",
													"    pm.expect(pm.response.text()).to.equals(\"Invalid token Response indicating Not Authorized received from Endpoint. Please check Auth Token. Endpoint Id: \" + endPoint);",
													"",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{serverURL}}/api/integrity/checkintegrity/endpoint/{{endpintId}}",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"api",
												"integrity",
												"checkintegrity",
												"endpoint",
												"{{endpintId}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "set USE_JWT_TOKEN_IN_PUSH_PUBLISH to true",
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "PUT",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"USE_JWT_TOKEN_IN_PUSH_PUBLISH\": true\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{serverURL}}/api//v1/configuration",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"api",
												"",
												"v1",
												"configuration"
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "using JWT",
					"item": [
						{
							"name": "Happy path",
							"item": [
								{
									"name": "request_token",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "94836223-e9a8-4b1c-b78d-265162220ff0",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.errors.length).to.eql(0);",
													"    pm.expect(jsonData.entity).to.not.eq(undefined);",
													"    pm.expect(jsonData.entity.jwt).to.not.eq(undefined);",
													"    pm.collectionVariables.set(\"token\", jsonData.entity.jwt);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"claims\": {\n        \"label\": \"testing\"\n    },\n    \"expirationSeconds\": 94571365,\n    \"network\": \"0.0.0.0/0\",\n    \"userId\": \"dotcms.org.1\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{serverURL}}/api/v1/apitoken",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"api",
												"v1",
												"apitoken"
											]
										}
									},
									"response": []
								},
								{
									"name": "create environment",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "3f1cb8c1-4ea5-49aa-9e39-37b136714a10",
												"exec": [
													"",
													"environmentName = 'environment-' + new Date().getMilliseconds();",
													"pm.collectionVariables.set(\"environmentName\", environmentName);",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "f790c7dd-b057-4567-b3c8-00d0eae27692",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"",
													"    var environmentId = pm.response.text();",
													"    pm.collectionVariables.set(\"environmentId\", environmentId);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Origin",
												"value": "{{origin}}",
												"type": "text"
											}
										],
										"body": {
											"mode": "formdata",
											"formdata": []
										},
										"url": {
											"raw": "{{serverURL}}/DotAjaxDirector/com.dotcms.publisher.environment.ajax.EnvironmentAjaxAction/cmd/addEnvironment?environmentName={{environmentName}}&pushType=pushToOne&whoCanUseSelect=e7d4e34e-5127-45fc-8123-d48b62d510e3&whoCanUse=e7d4e34e-5127-45fc-8123-d48b62d510e3",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"DotAjaxDirector",
												"com.dotcms.publisher.environment.ajax.EnvironmentAjaxAction",
												"cmd",
												"addEnvironment"
											],
											"query": [
												{
													"key": "environmentName",
													"value": "{{environmentName}}"
												},
												{
													"key": "pushType",
													"value": "pushToOne"
												},
												{
													"key": "whoCanUseSelect",
													"value": "e7d4e34e-5127-45fc-8123-d48b62d510e3"
												},
												{
													"key": "whoCanUse",
													"value": "e7d4e34e-5127-45fc-8123-d48b62d510e3"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "create end point",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "6170f15f-c5f2-458a-88c8-02f0ff0430c4",
												"exec": [
													"endpointName = 'endpoint-' + new Date().getMilliseconds();",
													"pm.collectionVariables.set(\"endpointName\", endpointName);",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "4b4e7278-60f8-40ca-9aab-bd34c336b8dd",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"",
													"    var environmentId = pm.response.text();",
													"    pm.collectionVariables.set(\"endpintId\", environmentId);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Origin",
												"type": "text",
												"value": "{{origin}}"
											}
										],
										"body": {
											"mode": "formdata",
											"formdata": []
										},
										"url": {
											"raw": "{{serverURL}}/DotAjaxDirector/com.dotcms.publisher.endpoint.ajax.PublishingEndpointAjaxAction/cmd/addEndpoint?sending=false&serverName={{endpointName}}&environmentId={{environmentId}}&protocol=http&address=localhost&port=8080&authKey={{token}}&enabled=on",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"DotAjaxDirector",
												"com.dotcms.publisher.endpoint.ajax.PublishingEndpointAjaxAction",
												"cmd",
												"addEndpoint"
											],
											"query": [
												{
													"key": "sending",
													"value": "false"
												},
												{
													"key": "serverName",
													"value": "{{endpointName}}"
												},
												{
													"key": "environmentId",
													"value": "{{environmentId}}"
												},
												{
													"key": "protocol",
													"value": "http"
												},
												{
													"key": "address",
													"value": "localhost"
												},
												{
													"key": "port",
													"value": "8080"
												},
												{
													"key": "authKey",
													"value": "{{token}}"
												},
												{
													"key": "enabled",
													"value": "on"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "generate Integrity Checker",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "d862f37a-20e9-41cc-a359-970cef36bc9b",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"",
													"    response = pm.response.json();",
													"",
													"    pm.expect(response['success']).to.equals(true, );",
													"    pm.expect(response['message']).to.equals(\"Integrity Checking Initialized...\");",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{serverURL}}/api/integrity/checkintegrity/endpoint/{{endpintId}}",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"api",
												"integrity",
												"checkintegrity",
												"endpoint",
												"{{endpintId}}"
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "Invalid Token",
							"item": [
								{
									"name": "create environment",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "f6653dd2-eaab-4e4c-80eb-211e75c1a0b6",
												"exec": [
													"",
													"environmentName = 'environment-' + new Date().getMilliseconds();",
													"pm.collectionVariables.set(\"environmentName\", environmentName);",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "6e30749c-4aac-46af-98fa-12c711babdd2",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"",
													"    var environmentId = pm.response.text();",
													"    pm.collectionVariables.set(\"environmentId\", environmentId);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Origin",
												"value": "{{origin}}",
												"type": "text"
											}
										],
										"body": {
											"mode": "formdata",
											"formdata": []
										},
										"url": {
											"raw": "{{serverURL}}/DotAjaxDirector/com.dotcms.publisher.environment.ajax.EnvironmentAjaxAction/cmd/addEnvironment?environmentName={{environmentName}}&pushType=pushToOne&whoCanUseSelect=e7d4e34e-5127-45fc-8123-d48b62d510e3&whoCanUse=e7d4e34e-5127-45fc-8123-d48b62d510e3",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"DotAjaxDirector",
												"com.dotcms.publisher.environment.ajax.EnvironmentAjaxAction",
												"cmd",
												"addEnvironment"
											],
											"query": [
												{
													"key": "environmentName",
													"value": "{{environmentName}}"
												},
												{
													"key": "pushType",
													"value": "pushToOne"
												},
												{
													"key": "whoCanUseSelect",
													"value": "e7d4e34e-5127-45fc-8123-d48b62d510e3"
												},
												{
													"key": "whoCanUse",
													"value": "e7d4e34e-5127-45fc-8123-d48b62d510e3"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "create end point",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "b87e25b4-98fa-4508-9cd5-79430eccfd98",
												"exec": [
													"endpointName = 'endpoint-' + new Date().getMilliseconds();",
													"pm.collectionVariables.set(\"endpointName\", endpointName);",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "2ffdf0e3-25d1-47a0-9013-286246f66a1b",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"",
													"    var environmentId = pm.response.text();",
													"    pm.collectionVariables.set(\"endpintId\", environmentId);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Origin",
												"type": "text",
												"value": "{{origin}}"
											}
										],
										"body": {
											"mode": "formdata",
											"formdata": []
										},
										"url": {
											"raw": "{{serverURL}}/DotAjaxDirector/com.dotcms.publisher.endpoint.ajax.PublishingEndpointAjaxAction/cmd/addEndpoint?sending=false&serverName={{endpointName}}&environmentId={{environmentId}}&protocol=http&address=localhost&port=8080&authKey=123&enabled=on",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"DotAjaxDirector",
												"com.dotcms.publisher.endpoint.ajax.PublishingEndpointAjaxAction",
												"cmd",
												"addEndpoint"
											],
											"query": [
												{
													"key": "sending",
													"value": "false"
												},
												{
													"key": "serverName",
													"value": "{{endpointName}}"
												},
												{
													"key": "environmentId",
													"value": "{{environmentId}}"
												},
												{
													"key": "protocol",
													"value": "http"
												},
												{
													"key": "address",
													"value": "localhost"
												},
												{
													"key": "port",
													"value": "8080"
												},
												{
													"key": "authKey",
													"value": "123"
												},
												{
													"key": "enabled",
													"value": "on"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Shoyld response with 401",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "fa051653-5c86-49b4-95c8-12cd6e1f33a3",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(401);",
													"    endPoint = pm.collectionVariables.get(\"endpintId\");",
													"    pm.expect(pm.response.text()).to.equals(\"Invalid token Response indicating Not Authorized received from Endpoint. Please check Auth Token. Endpoint Id: \" + endPoint);",
													"",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{serverURL}}/api/integrity/checkintegrity/endpoint/{{endpintId}}",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"api",
												"integrity",
												"checkintegrity",
												"endpoint",
												"{{endpintId}}"
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "experied Token",
							"item": [
								{
									"name": "request_token",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "54c09382-1e1a-46a0-a997-d95be8b47f25",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.errors.length).to.eql(0);",
													"    pm.expect(jsonData.entity).to.not.eq(undefined);",
													"    pm.expect(jsonData.entity.jwt).to.not.eq(undefined);",
													"    pm.collectionVariables.set(\"token\", jsonData.entity.jwt);",
													"",
													"    eval(pm.collectionVariables.get(\"wait\"))(2);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"claims\": {\n        \"label\": \"testing\"\n    },\n    \"expirationSeconds\": 94571365,\n    \"network\": \"0.0.0.0/0\",\n    \"userId\": \"dotcms.org.1\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{serverURL}}/api/v1/apitoken",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"api",
												"v1",
												"apitoken"
											]
										}
									},
									"response": []
								},
								{
									"name": "create environment",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "2b32209a-bb05-4e39-bd1d-d4222f390ff9",
												"exec": [
													"",
													"environmentName = 'environment-' + new Date().getMilliseconds();",
													"pm.collectionVariables.set(\"environmentName\", environmentName);",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "c082a427-606f-4f1c-8277-7d7d3fe5a13b",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"",
													"    var environmentId = pm.response.text();",
													"    pm.collectionVariables.set(\"environmentId\", environmentId);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Origin",
												"value": "{{origin}}",
												"type": "text"
											}
										],
										"body": {
											"mode": "formdata",
											"formdata": []
										},
										"url": {
											"raw": "{{serverURL}}/DotAjaxDirector/com.dotcms.publisher.environment.ajax.EnvironmentAjaxAction/cmd/addEnvironment?environmentName={{environmentName}}&pushType=pushToOne&whoCanUseSelect=e7d4e34e-5127-45fc-8123-d48b62d510e3&whoCanUse=e7d4e34e-5127-45fc-8123-d48b62d510e3",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"DotAjaxDirector",
												"com.dotcms.publisher.environment.ajax.EnvironmentAjaxAction",
												"cmd",
												"addEnvironment"
											],
											"query": [
												{
													"key": "environmentName",
													"value": "{{environmentName}}"
												},
												{
													"key": "pushType",
													"value": "pushToOne"
												},
												{
													"key": "whoCanUseSelect",
													"value": "e7d4e34e-5127-45fc-8123-d48b62d510e3"
												},
												{
													"key": "whoCanUse",
													"value": "e7d4e34e-5127-45fc-8123-d48b62d510e3"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "create end point",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "a0e8bc37-4825-4569-ac05-39fd0bf839fb",
												"exec": [
													"endpointName = 'endpoint-' + new Date().getMilliseconds();",
													"pm.collectionVariables.set(\"endpointName\", endpointName);",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "8825739a-9425-4571-82d1-e82c24c314eb",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"",
													"    var environmentId = pm.response.text();",
													"    pm.collectionVariables.set(\"endpintId\", environmentId);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Origin",
												"type": "text",
												"value": "{{origin}}"
											}
										],
										"body": {
											"mode": "formdata",
											"formdata": []
										},
										"url": {
											"raw": "{{serverURL}}/DotAjaxDirector/com.dotcms.publisher.endpoint.ajax.PublishingEndpointAjaxAction/cmd/addEndpoint?sending=false&serverName={{endpointName}}&environmentId={{environmentId}}&protocol=http&address=localhost&port=8080&authKey=123&enabled=on",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"DotAjaxDirector",
												"com.dotcms.publisher.endpoint.ajax.PublishingEndpointAjaxAction",
												"cmd",
												"addEndpoint"
											],
											"query": [
												{
													"key": "sending",
													"value": "false"
												},
												{
													"key": "serverName",
													"value": "{{endpointName}}"
												},
												{
													"key": "environmentId",
													"value": "{{environmentId}}"
												},
												{
													"key": "protocol",
													"value": "http"
												},
												{
													"key": "address",
													"value": "localhost"
												},
												{
													"key": "port",
													"value": "8080"
												},
												{
													"key": "authKey",
													"value": "123"
												},
												{
													"key": "enabled",
													"value": "on"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Shoyld response with 401",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "442f9aa0-55f0-41b2-9fca-a4c2547a6e5e",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(401);",
													"    endPoint = pm.collectionVariables.get(\"endpintId\");",
													"    pm.expect(pm.response.text()).to.equals(\"Invalid token Response indicating Not Authorized received from Endpoint. Please check Auth Token. Endpoint Id: \" + endPoint);",
													"",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "noauth"
										},
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{serverURL}}/api/integrity/checkintegrity/endpoint/{{endpintId}}",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"api",
												"integrity",
												"checkintegrity",
												"endpoint",
												"{{endpintId}}"
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				}
			],
			"protocolProfileBehavior": {}
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "71206d30-b7c5-469c-b91b-22cd76424b08",
				"type": "text/javascript",
				"exec": [
					"wait = (ms) => {",
					"   var start = new Date().getTime();",
					"   var end = start;",
					"   while(end < start + ms) {",
					"     end = new Date().getTime();",
					"  }",
					"};",
					"",
					"pm.collectionVariables.set(\"wait\", wait.toString());",
					"",
					"serverURL = pm.environment.get(\"serverURL\");",
					"",
					"console.log('hostName', serverURL);",
					"pm.collectionVariables.set(\"origin\", serverURL);"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "ee1eac1b-26c2-4de8-b486-68ad292cc651",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"id": "bc22274e-f650-481b-8a31-4a88756e02b6",
			"key": "endpointName",
			"value": "endpoint-602"
		},
		{
			"id": "6dc3e100-63fb-4e0a-bcfa-27c0310501d9",
			"key": "environmentName",
			"value": "environment-518"
		},
		{
			"id": "e6d5de63-d39b-4d2c-bf71-7aaa38528521",
			"key": "origin",
			"value": "http://localhost:8080"
		},
		{
			"id": "1881fdff-7ea3-402d-9f21-2e293228b5d8",
			"key": "environmentId",
			"value": "45bfcadd-77fb-4029-ac05-62cb369ace8f"
		},
		{
			"id": "13065228-c0a5-4017-b01a-c9206d3f0a61",
			"key": "endpintId",
			"value": "fed35809-457d-40b0-89ed-356314d35b57"
		},
		{
			"id": "0619abae-7a60-46b4-953e-ff96324d0c9c",
			"key": "receiverName",
			"value": "receiverName-221"
		},
		{
			"id": "1315fdb5-87d7-4cb8-9269-caf32e15a0ff",
			"key": "token",
			"value": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhcGljZjhiZmQyMC0zNTE1LTQxNzgtOWQwZi1kYWUxNTY1YmViZmYiLCJ4bW9kIjoxNjAxMDU0MzQyMDAwLCJuYmYiOjE2MDEwNTQzNDIsImlzcyI6ImFjNWMwMDc2N2YiLCJsYWJlbCI6InRlc3RpbmciLCJleHAiOjE2OTU2MjU3MDcsImlhdCI6MTYwMTA1NDM0MiwianRpIjoiZWIxYmFkMTQtZmFjZi00MWNiLTkzNTctMWEzODdiODJjY2JjIn0.ezWYPQ77-Gzr7MN0V7ne_3MedeJ9IgmU3By8RE-flvk"
		},
		{
			"id": "b323d4b0-900a-4966-924f-839cb70f13d3",
			"key": "wait",
			"value": "(ms) => {\n   var start = new Date().getTime();\n   var end = start;\n   while(end < start + ms) {\n     end = new Date().getTime();\n  }\n}"
		}
	],
	"protocolProfileBehavior": {}
}