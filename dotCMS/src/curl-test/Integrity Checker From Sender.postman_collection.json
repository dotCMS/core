{
	"info": {
		"_postman_id": "dd186df9-8ba0-4585-8c52-108630271d94",
		"name": "Integrity Checker From Sender",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Generate ",
			"item": [
				{
					"name": "old Way",
					"item": [
						{
							"name": "Happy path",
							"item": [
								{
									"name": "set USE_JWT_TOKEN_IN_PUSH_PUBLISH to false",
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "PUT",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"USE_JWT_TOKEN_IN_PUSH_PUBLISH\": false\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{serverURL}}/api//v1/configuration",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"api",
												"",
												"v1",
												"configuration"
											]
										}
									},
									"response": []
								},
								{
									"name": "create environment",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "34ed52ed-5657-4ca1-896f-32595203d20d",
												"exec": [
													"",
													"environmentName = 'environment-' + new Date().getMilliseconds();",
													"pm.collectionVariables.set(\"environmentName\", environmentName);",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "0319a22e-54e5-4f4a-a1d2-a2b9a43785ff",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"",
													"    var environmentId = pm.response.text();",
													"    pm.collectionVariables.set(\"environmentId\", environmentId);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Origin",
												"value": "{{origin}}",
												"type": "text"
											}
										],
										"body": {
											"mode": "formdata",
											"formdata": []
										},
										"url": {
											"raw": "{{serverURL}}/DotAjaxDirector/com.dotcms.publisher.environment.ajax.EnvironmentAjaxAction/cmd/addEnvironment?environmentName={{environmentName}}&pushType=pushToOne&whoCanUseSelect=e7d4e34e-5127-45fc-8123-d48b62d510e3&whoCanUse=e7d4e34e-5127-45fc-8123-d48b62d510e3",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"DotAjaxDirector",
												"com.dotcms.publisher.environment.ajax.EnvironmentAjaxAction",
												"cmd",
												"addEnvironment"
											],
											"query": [
												{
													"key": "environmentName",
													"value": "{{environmentName}}"
												},
												{
													"key": "pushType",
													"value": "pushToOne"
												},
												{
													"key": "whoCanUseSelect",
													"value": "e7d4e34e-5127-45fc-8123-d48b62d510e3"
												},
												{
													"key": "whoCanUse",
													"value": "e7d4e34e-5127-45fc-8123-d48b62d510e3"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "create end point",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "16dce9e5-3ec1-4d0e-be69-95b1ea0d9d6c",
												"exec": [
													"endpointName = 'endpoint-' + new Date().getMilliseconds();",
													"pm.collectionVariables.set(\"endpointName\", endpointName);",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "3fb22cf3-1b55-4f9c-8c9a-12d1550e97b1",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"",
													"    var environmentId = pm.response.text();",
													"    pm.collectionVariables.set(\"endpintId\", environmentId);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Origin",
												"type": "text",
												"value": "{{origin}}"
											}
										],
										"body": {
											"mode": "formdata",
											"formdata": []
										},
										"url": {
											"raw": "{{serverURL}}/DotAjaxDirector/com.dotcms.publisher.endpoint.ajax.PublishingEndpointAjaxAction/cmd/addEndpoint?sending=false&serverName={{endpointName}}&environmentId={{environmentId}}&protocol=http&address=localhost&port=8080&authKey=123&enabled=on",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"DotAjaxDirector",
												"com.dotcms.publisher.endpoint.ajax.PublishingEndpointAjaxAction",
												"cmd",
												"addEndpoint"
											],
											"query": [
												{
													"key": "sending",
													"value": "false"
												},
												{
													"key": "serverName",
													"value": "{{endpointName}}"
												},
												{
													"key": "environmentId",
													"value": "{{environmentId}}"
												},
												{
													"key": "protocol",
													"value": "http"
												},
												{
													"key": "address",
													"value": "localhost"
												},
												{
													"key": "port",
													"value": "8080"
												},
												{
													"key": "authKey",
													"value": "123"
												},
												{
													"key": "enabled",
													"value": "on"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "create receiver",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "3ad75ab7-fa22-41d8-9dde-f9942b3daff0",
												"exec": [
													"receiverName = 'receiverName-' + new Date().getMilliseconds();",
													"pm.collectionVariables.set(\"receiverName\", receiverName);",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "5f3f7122-fe26-4e72-ac20-1afe120e5671",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Origin",
												"type": "text",
												"value": "{{origin}}"
											}
										],
										"body": {
											"mode": "formdata",
											"formdata": []
										},
										"url": {
											"raw": "{{serverURL}}/DotAjaxDirector/com.dotcms.publisher.endpoint.ajax.PublishingEndpointAjaxAction/cmd/addEndpoint?sending=true&serverName={{receiverName}}&environmentId={{environmentId}}&address=localhost&authKey=123&enabled=on",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"DotAjaxDirector",
												"com.dotcms.publisher.endpoint.ajax.PublishingEndpointAjaxAction",
												"cmd",
												"addEndpoint"
											],
											"query": [
												{
													"key": "sending",
													"value": "true"
												},
												{
													"key": "serverName",
													"value": "{{receiverName}}"
												},
												{
													"key": "environmentId",
													"value": "{{environmentId}}"
												},
												{
													"key": "address",
													"value": "localhost"
												},
												{
													"key": "authKey",
													"value": "123"
												},
												{
													"key": "enabled",
													"value": "on"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "generate Integrity Checker",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "499cd4f6-8326-4694-a4da-dca02a231ad7",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"",
													"    response = pm.response.json();",
													"",
													"    pm.expect(response['success']).to.equals(true, );",
													"    pm.expect(response['message']).to.equals(\"Integrity Checking Initialized...\");",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{serverURL}}/api/integrity/checkintegrity/endpoint/{{endpintId}}",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"api",
												"integrity",
												"checkintegrity",
												"endpoint",
												"{{endpintId}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "set USE_JWT_TOKEN_IN_PUSH_PUBLISH to true",
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "PUT",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"USE_JWT_TOKEN_IN_PUSH_PUBLISH\": true\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{serverURL}}/api//v1/configuration",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"api",
												"",
												"v1",
												"configuration"
											]
										}
									},
									"response": []
								},
								{
									"name": "{{serverURL}}/api/v1/apitoken",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "061a53c0-bc21-406f-b7fd-70584d1684e6",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.errors.length).to.eql(0);",
													"    pm.expect(jsonData.entity).to.not.eq(undefined);",
													"    pm.expect(jsonData.entity.jwt).to.not.eq(undefined);",
													"    pm.collectionVariables.set(\"token\", jsonData.entity.jwt);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"claims\": {\n        \"label\": \"testing\"\n    },\n    \"expirationSeconds\": 1,\n    \"network\": \"0.0.0.0/0\",\n    \"userId\": \"dotcms.org.1\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{serverURL}}/api/v1/apitoken",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"api",
												"v1",
												"apitoken"
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "invalid token",
							"item": [
								{
									"name": "set USE_JWT_TOKEN_IN_PUSH_PUBLISH to false",
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "PUT",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"USE_JWT_TOKEN_IN_PUSH_PUBLISH\": false\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{serverURL}}/api//v1/configuration",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"api",
												"",
												"v1",
												"configuration"
											]
										}
									},
									"response": []
								},
								{
									"name": "create environment",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "9cad30a5-95be-4b04-87c6-944f64a09c8a",
												"exec": [
													"",
													"environmentName = 'environment-' + new Date().getMilliseconds();",
													"pm.collectionVariables.set(\"environmentName\", environmentName);",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "142a75cf-e35f-4860-9fb1-ec6dcda44d6b",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"",
													"    var environmentId = pm.response.text();",
													"    pm.collectionVariables.set(\"environmentId\", environmentId);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Origin",
												"value": "{{origin}}",
												"type": "text"
											}
										],
										"body": {
											"mode": "formdata",
											"formdata": []
										},
										"url": {
											"raw": "{{serverURL}}/DotAjaxDirector/com.dotcms.publisher.environment.ajax.EnvironmentAjaxAction/cmd/addEnvironment?environmentName={{environmentName}}&pushType=pushToOne&whoCanUseSelect=e7d4e34e-5127-45fc-8123-d48b62d510e3&whoCanUse=e7d4e34e-5127-45fc-8123-d48b62d510e3",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"DotAjaxDirector",
												"com.dotcms.publisher.environment.ajax.EnvironmentAjaxAction",
												"cmd",
												"addEnvironment"
											],
											"query": [
												{
													"key": "environmentName",
													"value": "{{environmentName}}"
												},
												{
													"key": "pushType",
													"value": "pushToOne"
												},
												{
													"key": "whoCanUseSelect",
													"value": "e7d4e34e-5127-45fc-8123-d48b62d510e3"
												},
												{
													"key": "whoCanUse",
													"value": "e7d4e34e-5127-45fc-8123-d48b62d510e3"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "create end point",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "0f7ebf0f-6c3a-41be-a4fa-37154bd66a26",
												"exec": [
													"endpointName = 'endpoint-' + new Date().getMilliseconds();",
													"pm.collectionVariables.set(\"endpointName\", endpointName);",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "d6c32571-2379-45b3-973c-a6c3633804c5",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"",
													"    var environmentId = pm.response.text();",
													"    pm.collectionVariables.set(\"endpintId\", environmentId);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Origin",
												"type": "text",
												"value": "{{origin}}"
											}
										],
										"body": {
											"mode": "formdata",
											"formdata": []
										},
										"url": {
											"raw": "{{serverURL}}/DotAjaxDirector/com.dotcms.publisher.endpoint.ajax.PublishingEndpointAjaxAction/cmd/addEndpoint?sending=false&serverName={{endpointName}}&environmentId={{environmentId}}&protocol=http&address=localhost&port=8080&authKey=invalid&enabled=on",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"DotAjaxDirector",
												"com.dotcms.publisher.endpoint.ajax.PublishingEndpointAjaxAction",
												"cmd",
												"addEndpoint"
											],
											"query": [
												{
													"key": "sending",
													"value": "false"
												},
												{
													"key": "serverName",
													"value": "{{endpointName}}"
												},
												{
													"key": "environmentId",
													"value": "{{environmentId}}"
												},
												{
													"key": "protocol",
													"value": "http"
												},
												{
													"key": "address",
													"value": "localhost"
												},
												{
													"key": "port",
													"value": "8080"
												},
												{
													"key": "authKey",
													"value": "invalid"
												},
												{
													"key": "enabled",
													"value": "on"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "generate Integrity Checker",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "0c3bdfca-2647-442b-8bc8-02ce77b2562c",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(401);",
													"    endPoint = pm.collectionVariables.get(\"endpintId\");",
													"    pm.expect(pm.response.text()).to.equals(\"Invalid token Response indicating Not Authorized received from Endpoint. Please check Auth Token. Endpoint Id: \" + endPoint);",
													"",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{serverURL}}/api/integrity/checkintegrity/endpoint/{{endpintId}}",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"api",
												"integrity",
												"checkintegrity",
												"endpoint",
												"{{endpintId}}"
											]
										}
									},
									"response": []
								},
								{
									"name": "set USE_JWT_TOKEN_IN_PUSH_PUBLISH to true",
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "PUT",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"USE_JWT_TOKEN_IN_PUSH_PUBLISH\": true\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{serverURL}}/api//v1/configuration",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"api",
												"",
												"v1",
												"configuration"
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "using JWT",
					"item": [
						{
							"name": "Happy path",
							"item": [
								{
									"name": "request_token",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "0f1ff669-b6e7-483e-854a-297312223d24",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.errors.length).to.eql(0);",
													"    pm.expect(jsonData.entity).to.not.eq(undefined);",
													"    pm.expect(jsonData.entity.jwt).to.not.eq(undefined);",
													"    pm.collectionVariables.set(\"token\", jsonData.entity.jwt);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"claims\": {\n        \"label\": \"testing\"\n    },\n    \"expirationSeconds\": 94571365,\n    \"network\": \"0.0.0.0/0\",\n    \"userId\": \"dotcms.org.1\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{serverURL}}/api/v1/apitoken",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"api",
												"v1",
												"apitoken"
											]
										}
									},
									"response": []
								},
								{
									"name": "create environment",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "db6ea036-3bfd-4174-a056-caadc9623cec",
												"exec": [
													"",
													"environmentName = 'environment-' + new Date().getMilliseconds();",
													"pm.collectionVariables.set(\"environmentName\", environmentName);",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "e169957f-0a1a-4eb7-ab56-be7a144e3699",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"",
													"    var environmentId = pm.response.text();",
													"    pm.collectionVariables.set(\"environmentId\", environmentId);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Origin",
												"value": "{{origin}}",
												"type": "text"
											}
										],
										"body": {
											"mode": "formdata",
											"formdata": []
										},
										"url": {
											"raw": "{{serverURL}}/DotAjaxDirector/com.dotcms.publisher.environment.ajax.EnvironmentAjaxAction/cmd/addEnvironment?environmentName={{environmentName}}&pushType=pushToOne&whoCanUseSelect=e7d4e34e-5127-45fc-8123-d48b62d510e3&whoCanUse=e7d4e34e-5127-45fc-8123-d48b62d510e3",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"DotAjaxDirector",
												"com.dotcms.publisher.environment.ajax.EnvironmentAjaxAction",
												"cmd",
												"addEnvironment"
											],
											"query": [
												{
													"key": "environmentName",
													"value": "{{environmentName}}"
												},
												{
													"key": "pushType",
													"value": "pushToOne"
												},
												{
													"key": "whoCanUseSelect",
													"value": "e7d4e34e-5127-45fc-8123-d48b62d510e3"
												},
												{
													"key": "whoCanUse",
													"value": "e7d4e34e-5127-45fc-8123-d48b62d510e3"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "create end point",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "2bd3eac5-671c-484f-8ee9-6692f07ea009",
												"exec": [
													"endpointName = 'endpoint-' + new Date().getMilliseconds();",
													"pm.collectionVariables.set(\"endpointName\", endpointName);",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "8a3325d6-62a5-4627-8dcd-311638cf202a",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"",
													"    var environmentId = pm.response.text();",
													"    pm.collectionVariables.set(\"endpintId\", environmentId);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Origin",
												"type": "text",
												"value": "{{origin}}"
											}
										],
										"body": {
											"mode": "formdata",
											"formdata": []
										},
										"url": {
											"raw": "{{serverURL}}/DotAjaxDirector/com.dotcms.publisher.endpoint.ajax.PublishingEndpointAjaxAction/cmd/addEndpoint?sending=false&serverName={{endpointName}}&environmentId={{environmentId}}&protocol=http&address=localhost&port=8080&authKey={{token}}&enabled=on",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"DotAjaxDirector",
												"com.dotcms.publisher.endpoint.ajax.PublishingEndpointAjaxAction",
												"cmd",
												"addEndpoint"
											],
											"query": [
												{
													"key": "sending",
													"value": "false"
												},
												{
													"key": "serverName",
													"value": "{{endpointName}}"
												},
												{
													"key": "environmentId",
													"value": "{{environmentId}}"
												},
												{
													"key": "protocol",
													"value": "http"
												},
												{
													"key": "address",
													"value": "localhost"
												},
												{
													"key": "port",
													"value": "8080"
												},
												{
													"key": "authKey",
													"value": "{{token}}"
												},
												{
													"key": "enabled",
													"value": "on"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "generate Integrity Checker",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "c8d0b4eb-6366-443e-ab32-118c81d2f761",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"",
													"    response = pm.response.json();",
													"",
													"    pm.expect(response['success']).to.equals(true, );",
													"    pm.expect(response['message']).to.equals(\"Integrity Checking Initialized...\");",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{token}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{serverURL}}/api/integrity/checkintegrity/endpoint/{{endpintId}}",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"api",
												"integrity",
												"checkintegrity",
												"endpoint",
												"{{endpintId}}"
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "Invalid Token",
							"item": [
								{
									"name": "create environment",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "518a4542-2c4b-47e8-955f-49fa8ddc3689",
												"exec": [
													"",
													"environmentName = 'environment-' + new Date().getMilliseconds();",
													"pm.collectionVariables.set(\"environmentName\", environmentName);",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "f659d397-c2cc-4171-8f77-fd7acb43613d",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"",
													"    var environmentId = pm.response.text();",
													"    pm.collectionVariables.set(\"environmentId\", environmentId);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Origin",
												"value": "{{origin}}",
												"type": "text"
											}
										],
										"body": {
											"mode": "formdata",
											"formdata": []
										},
										"url": {
											"raw": "{{serverURL}}/DotAjaxDirector/com.dotcms.publisher.environment.ajax.EnvironmentAjaxAction/cmd/addEnvironment?environmentName={{environmentName}}&pushType=pushToOne&whoCanUseSelect=e7d4e34e-5127-45fc-8123-d48b62d510e3&whoCanUse=e7d4e34e-5127-45fc-8123-d48b62d510e3",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"DotAjaxDirector",
												"com.dotcms.publisher.environment.ajax.EnvironmentAjaxAction",
												"cmd",
												"addEnvironment"
											],
											"query": [
												{
													"key": "environmentName",
													"value": "{{environmentName}}"
												},
												{
													"key": "pushType",
													"value": "pushToOne"
												},
												{
													"key": "whoCanUseSelect",
													"value": "e7d4e34e-5127-45fc-8123-d48b62d510e3"
												},
												{
													"key": "whoCanUse",
													"value": "e7d4e34e-5127-45fc-8123-d48b62d510e3"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "create end point",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "ee7f12fa-5ee5-4abf-b83c-24981c7cee21",
												"exec": [
													"endpointName = 'endpoint-' + new Date().getMilliseconds();",
													"pm.collectionVariables.set(\"endpointName\", endpointName);",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "3867ed32-e9b9-4938-83fe-c75744d9bedd",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"",
													"    var environmentId = pm.response.text();",
													"    pm.collectionVariables.set(\"endpintId\", environmentId);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Origin",
												"type": "text",
												"value": "{{origin}}"
											}
										],
										"body": {
											"mode": "formdata",
											"formdata": []
										},
										"url": {
											"raw": "{{serverURL}}/DotAjaxDirector/com.dotcms.publisher.endpoint.ajax.PublishingEndpointAjaxAction/cmd/addEndpoint?sending=false&serverName={{endpointName}}&environmentId={{environmentId}}&protocol=http&address=localhost&port=8080&authKey=123&enabled=on",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"DotAjaxDirector",
												"com.dotcms.publisher.endpoint.ajax.PublishingEndpointAjaxAction",
												"cmd",
												"addEndpoint"
											],
											"query": [
												{
													"key": "sending",
													"value": "false"
												},
												{
													"key": "serverName",
													"value": "{{endpointName}}"
												},
												{
													"key": "environmentId",
													"value": "{{environmentId}}"
												},
												{
													"key": "protocol",
													"value": "http"
												},
												{
													"key": "address",
													"value": "localhost"
												},
												{
													"key": "port",
													"value": "8080"
												},
												{
													"key": "authKey",
													"value": "123"
												},
												{
													"key": "enabled",
													"value": "on"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "logout",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "0a2c30da-655e-4604-9926-c11f9ac70f8d",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{serverURL}}/api/v1/logout",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"api",
												"v1",
												"logout"
											]
										}
									},
									"response": []
								},
								{
									"name": "Shoyld response with 401",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "65a9c500-af37-4da7-9e88-1511f9df58e8",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(401);",
													"",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "invalid_token",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{serverURL}}/api/integrity/checkintegrity/endpoint/{{endpintId}}",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"api",
												"integrity",
												"checkintegrity",
												"endpoint",
												"{{endpintId}}"
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						},
						{
							"name": "experied Token",
							"item": [
								{
									"name": "request_token",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "8de752a5-c0d9-420e-a91a-129d289d6713",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"",
													"    var jsonData = pm.response.json();",
													"    pm.expect(jsonData.errors.length).to.eql(0);",
													"    pm.expect(jsonData.entity).to.not.eq(undefined);",
													"    pm.expect(jsonData.entity.jwt).to.not.eq(undefined);",
													"    pm.collectionVariables.set(\"token\", jsonData.entity.jwt);",
													"",
													"    console.log('token', jsonData.entity.jwt);",
													"    eval(pm.collectionVariables.get(\"wait\"))(2);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"claims\": {\n        \"label\": \"testing\"\n    },\n    \"expirationSeconds\": 94571365,\n    \"network\": \"0.0.0.0/0\",\n    \"userId\": \"dotcms.org.1\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{serverURL}}/api/v1/apitoken",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"api",
												"v1",
												"apitoken"
											]
										}
									},
									"response": []
								},
								{
									"name": "create environment",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "2a6cdf76-7008-4ce7-bbc8-59cb1e26ee83",
												"exec": [
													"",
													"environmentName = 'environment-' + new Date().getMilliseconds();",
													"pm.collectionVariables.set(\"environmentName\", environmentName);",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "1c757b45-3b3a-46e9-8acb-b4b77c204695",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"",
													"    var environmentId = pm.response.text();",
													"    pm.collectionVariables.set(\"environmentId\", environmentId);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Origin",
												"value": "{{origin}}",
												"type": "text"
											}
										],
										"body": {
											"mode": "formdata",
											"formdata": []
										},
										"url": {
											"raw": "{{serverURL}}/DotAjaxDirector/com.dotcms.publisher.environment.ajax.EnvironmentAjaxAction/cmd/addEnvironment?environmentName={{environmentName}}&pushType=pushToOne&whoCanUseSelect=e7d4e34e-5127-45fc-8123-d48b62d510e3&whoCanUse=e7d4e34e-5127-45fc-8123-d48b62d510e3",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"DotAjaxDirector",
												"com.dotcms.publisher.environment.ajax.EnvironmentAjaxAction",
												"cmd",
												"addEnvironment"
											],
											"query": [
												{
													"key": "environmentName",
													"value": "{{environmentName}}"
												},
												{
													"key": "pushType",
													"value": "pushToOne"
												},
												{
													"key": "whoCanUseSelect",
													"value": "e7d4e34e-5127-45fc-8123-d48b62d510e3"
												},
												{
													"key": "whoCanUse",
													"value": "e7d4e34e-5127-45fc-8123-d48b62d510e3"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "create end point",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"id": "113a50d7-2aa6-4a58-8cde-5a2ebe28e41e",
												"exec": [
													"endpointName = 'endpoint-' + new Date().getMilliseconds();",
													"pm.collectionVariables.set(\"endpointName\", endpointName);",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"id": "f9ab92d0-170d-41ed-8440-74df79737a52",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(200);",
													"",
													"    var environmentId = pm.response.text();",
													"    pm.collectionVariables.set(\"endpintId\", environmentId);",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "basic",
											"basic": [
												{
													"key": "password",
													"value": "admin",
													"type": "string"
												},
												{
													"key": "username",
													"value": "admin@dotcms.com",
													"type": "string"
												}
											]
										},
										"method": "POST",
										"header": [
											{
												"key": "Origin",
												"type": "text",
												"value": "{{origin}}"
											}
										],
										"body": {
											"mode": "formdata",
											"formdata": []
										},
										"url": {
											"raw": "{{serverURL}}/DotAjaxDirector/com.dotcms.publisher.endpoint.ajax.PublishingEndpointAjaxAction/cmd/addEndpoint?sending=false&serverName={{endpointName}}&environmentId={{environmentId}}&protocol=http&address=localhost&port=8080&authKey={{token}}&enabled=on",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"DotAjaxDirector",
												"com.dotcms.publisher.endpoint.ajax.PublishingEndpointAjaxAction",
												"cmd",
												"addEndpoint"
											],
											"query": [
												{
													"key": "sending",
													"value": "false"
												},
												{
													"key": "serverName",
													"value": "{{endpointName}}"
												},
												{
													"key": "environmentId",
													"value": "{{environmentId}}"
												},
												{
													"key": "protocol",
													"value": "http"
												},
												{
													"key": "address",
													"value": "localhost"
												},
												{
													"key": "port",
													"value": "8080"
												},
												{
													"key": "authKey",
													"value": "{{token}}"
												},
												{
													"key": "enabled",
													"value": "on"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Shoyld response with 401",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "b993f668-cd5b-4062-96bc-554bb31d3b02",
												"exec": [
													"pm.test(\"Status code is 200\", function () {",
													"    pm.response.to.have.status(401);",
													"",
													"});"
												],
												"type": "text/javascript"
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": [
												{
													"key": "token",
													"value": "{{token}}",
													"type": "string"
												}
											]
										},
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{serverURL}}/api/integrity/checkintegrity/endpoint/{{endpintId}}",
											"host": [
												"{{serverURL}}"
											],
											"path": [
												"api",
												"integrity",
												"checkintegrity",
												"endpoint",
												"{{endpintId}}"
											]
										}
									},
									"response": []
								}
							],
							"protocolProfileBehavior": {},
							"_postman_isSubFolder": true
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				}
			],
			"protocolProfileBehavior": {}
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "4271273d-2ecb-4055-a7ee-cb335cb0b51e",
				"type": "text/javascript",
				"exec": [
					"wait = (ms) => {",
					"   var start = new Date().getTime();",
					"   var end = start;",
					"   while(end < start + ms) {",
					"     end = new Date().getTime();",
					"  }",
					"};",
					"",
					"pm.collectionVariables.set(\"wait\", wait.toString());",
					"",
					"serverURL = pm.environment.get(\"serverURL\");",
					"",
					"console.log('hostName', serverURL);",
					"pm.collectionVariables.set(\"origin\", serverURL);"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "e6f46256-f95d-43de-acf5-304364bbd21a",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"id": "1e9c897a-f62d-427c-b5db-f405b701a098",
			"key": "endpointName",
			"value": "endpoint-522"
		},
		{
			"id": "8f23f638-db0d-4b8e-8589-be26b3182d3b",
			"key": "environmentName",
			"value": "environment-825"
		},
		{
			"id": "59f1d79a-030e-4487-9f08-97d71ca78cfa",
			"key": "origin",
			"value": "http://localhost:8080"
		},
		{
			"id": "db630e82-b824-4a7b-8940-c19bec7df934",
			"key": "environmentId",
			"value": "e6ab2470-3026-4dac-98ee-29657a7e1b12"
		},
		{
			"id": "f1d37d6f-afa2-47d5-b290-ca8555caa7dc",
			"key": "endpintId",
			"value": "22b998af-f1cd-4473-85cd-dbfa251c3525"
		},
		{
			"id": "5253a919-a558-4c27-a408-aaced702378d",
			"key": "receiverName",
			"value": "receiverName-443"
		},
		{
			"id": "f0fddc21-6eff-4e28-b6df-7be1387e72d3",
			"key": "token",
			"value": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhcGk4NDQxNGYwNi0xM2U5LTQ3MzMtOTE1NC05MTUwNGJiOGU0NTIiLCJ4bW9kIjoxNjAzMTM4MDE2MDAwLCJuYmYiOjE2MDMxMzgwMTYsImlzcyI6ImUxYjUwYzhmMDQiLCJsYWJlbCI6InRlc3RpbmciLCJleHAiOjE2MDMxMzgwMTcsImlhdCI6MTYwMzEzODAxNiwianRpIjoiMmNiZGYxMzEtMzBmMS00Mjk2LTlhYWYtYTkxZmM5MTg3ZDgwIn0.yXVh1ThaFnRu4U5Qo2A5BN8dGc6-uDNN01sLjSQ68_Y"
		},
		{
			"id": "ea123afe-adbb-47b0-a020-b5efc6347380",
			"key": "wait",
			"value": "(ms) => {\n   var start = new Date().getTime();\n   var end = start;\n   while(end < start + ms) {\n     end = new Date().getTime();\n  }\n}"
		}
	],
	"protocolProfileBehavior": {}
}