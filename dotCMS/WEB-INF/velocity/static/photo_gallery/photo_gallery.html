#if($request.getParameter("indexFolder"))
	#set ($indexFolder = $request.getParameter("indexFolder"))
#end

#if(!$photoWidth)
	#set ($photoWidth = "600")
#end

#if(!$photoHeight)
	#set ($photoHeight = "450")
#end

#if(!$thumbnailWidth)
	#set ($thumbnailWidth = "90")
#end

#if(!$thumbnailHeight)
	#set ($thumbnailHeight = "90")
#end

#if(!$UtilMethods.isSet($showSubgalleryTitle))
	#set($showSubgalleryTitle = true)
#end

#if(!$UtilMethods.isSet($showPhotoTitle))
	#set($showPhotoTitle = true)
#end

#if($UtilMethods.isSet($indexFolder))

	<script type="text/javascript" src="/html/js/lightbox/js/prototype.js"></script>
	<script type="text/javascript" src="/html/js/lightbox/js/scriptaculous.js?load=effects"></script>
	<script type="text/javascript" src="/html/js/lightbox/js/lightbox.js"></script>
   #if(!$UtilMethods.isSet($doNotIncludeCSS) || $doNotIncludeCSS == false)
	<link rel="stylesheet" href="/html/js/lightbox/css/lightbox.css" type="text/css" media="screen" />
   #end

	#if (!($UtilMethods.isSet($dontShowIndexFolderImages) && ($dontShowIndexFolderImages == 'true')))
		#if($folderImages.size() > 0)
		<div class="photoGallery">
			#foreach ($img in $folderImages)
				
				#if($showPhotoGalleryCSS)
					#set($cssClass = "photoGalleryGridView")
						#if($velocityCount == $images.size())
							#set($cssClass = "photoGalleryGridView last")
						#end
				#else
						#set($cssClass = "photoList")
						#if($velocityCount == $images.size())
							#set($cssClass = "photoList last")
						#end
				 
				#end
				<div class="${cssClass}">
					<a href="/thumbnail?id=${img.identifier}&amp;w=${photoWidth}&amp;h=${photoHeight}&amp;r=246&amp;g=243&amp;b=238" rel="lightbox[gallery]" title="${img.friendlyName}">
					<img src="/thumbnail?id=${img.identifier}&amp;w=${thumbnailWidth}&amp;h=${thumbnailHeight}&amp;r=246&amp;g=243&amp;b=238" alt="${img.title}" border="0" style="border: solid 1px #D7CCB3;"/></a>
					 #if($showPhotoTitle)<h6>${img.friendlyName}</h6>#end
					</div>
			#end
		</div>
		#end
	#end

	#if($images.size() > 0)
	<div class="photoGalleriesIndex">
		#foreach ($img in $images)
			#if($showPhotoGalleryCSS)
					#set($cssClass = "photoGalleryGridIndex")
						#if($velocityCount == $images.size())
							#set($cssClass = "photoGalleryGridIndex last")
						#end
				#else
						#set($cssClass = "photoList")
						#if($velocityCount == $images.size())
							#set($cssClass = "photoList last")
						#end
				 
				#end
				<div class="${cssClass}">
					<a href="?indexFolder=$img.get('galleryPath')&amp;crumbTitle=$img.get('galleryName')">
					<img src="/thumbnail?inode=$img.get('indexImageInode')&amp;w=${thumbnailWidth}&amp;h=${thumbnailHeight}&amp;r=246&amp;g=243&amp;b=238" border="0" style="border: solid 1px #666666;"/>
			
					#if($showSubgalleryTitle)<h6>$img.get('galleryName')($img.get('totalImages'))</h6>#end
					</a>
				</div>
		#end
	</div>
	#end

#else

	No parameters given

#end
